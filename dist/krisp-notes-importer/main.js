/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var oe=Object.create;var Lt=Object.defineProperty;var ce=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var ue=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty;var de=(b,o)=>()=>(o||b((o={exports:{}}).exports,o),o.exports),pe=(b,o)=>{for(var e in o)Lt(b,e,{get:o[e],enumerable:!0})},Qt=(b,o,e,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of le(o))!he.call(b,t)&&t!==e&&Lt(b,t,{get:()=>o[t],enumerable:!(n=ce(o,t))||n.enumerable});return b};var xt=(b,o,e)=>(e=b!=null?oe(ue(b)):{},Qt(o||!b||!b.__esModule?Lt(e,"default",{value:b,enumerable:!0}):e,b)),fe=b=>Qt(Lt({},"__esModule",{value:!0}),b);var ee=de((te,Gt)=>{(function(b){typeof te=="object"&&typeof Gt!="undefined"?Gt.exports=b():typeof define=="function"&&define.amd?define([],b):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).JSZip=b()})(function(){return function b(o,e,n){function t(h,d){if(!e[h]){if(!o[h]){var m=typeof require=="function"&&require;if(!d&&m)return m(h,!0);if(i)return i(h,!0);var y=new Error("Cannot find module '"+h+"'");throw y.code="MODULE_NOT_FOUND",y}var c=e[h]={exports:{}};o[h][0].call(c.exports,function(f){var l=o[h][1][f];return t(l||f)},c,c.exports,b,o,e,n)}return e[h].exports}for(var i=typeof require=="function"&&require,s=0;s<n.length;s++)t(n[s]);return t}({1:[function(b,o,e){"use strict";var n=b("./utils"),t=b("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var h,d,m,y,c,f,l,p=[],u=0,v=s.length,S=v,k=n.getTypeOf(s)!=="string";u<s.length;)S=v-u,m=k?(h=s[u++],d=u<v?s[u++]:0,u<v?s[u++]:0):(h=s.charCodeAt(u++),d=u<v?s.charCodeAt(u++):0,u<v?s.charCodeAt(u++):0),y=h>>2,c=(3&h)<<4|d>>4,f=1<S?(15&d)<<2|m>>6:64,l=2<S?63&m:64,p.push(i.charAt(y)+i.charAt(c)+i.charAt(f)+i.charAt(l));return p.join("")},e.decode=function(s){var h,d,m,y,c,f,l=0,p=0,u="data:";if(s.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var v,S=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&S--,s.charAt(s.length-2)===i.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=t.uint8array?new Uint8Array(0|S):new Array(0|S);l<s.length;)h=i.indexOf(s.charAt(l++))<<2|(y=i.indexOf(s.charAt(l++)))>>4,d=(15&y)<<4|(c=i.indexOf(s.charAt(l++)))>>2,m=(3&c)<<6|(f=i.indexOf(s.charAt(l++))),v[p++]=h,c!==64&&(v[p++]=d),f!==64&&(v[p++]=m);return v}},{"./support":30,"./utils":32}],2:[function(b,o,e){"use strict";var n=b("./external"),t=b("./stream/DataWorker"),i=b("./stream/Crc32Probe"),s=b("./stream/DataLengthProbe");function h(d,m,y,c,f){this.compressedSize=d,this.uncompressedSize=m,this.crc32=y,this.compression=c,this.compressedContent=f}h.prototype={getContentWorker:function(){var d=new t(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),m=this;return d.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new t(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(d,m,y){return d.pipe(new i).pipe(new s("uncompressedSize")).pipe(m.compressWorker(y)).pipe(new s("compressedSize")).withStreamInfo("compression",m)},o.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(b,o,e){"use strict";var n=b("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},e.DEFLATE=b("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(b,o,e){"use strict";var n=b("./utils"),t=function(){for(var i,s=[],h=0;h<256;h++){i=h;for(var d=0;d<8;d++)i=1&i?3988292384^i>>>1:i>>>1;s[h]=i}return s}();o.exports=function(i,s){return i!==void 0&&i.length?n.getTypeOf(i)!=="string"?function(h,d,m,y){var c=t,f=y+m;h^=-1;for(var l=y;l<f;l++)h=h>>>8^c[255&(h^d[l])];return-1^h}(0|s,i,i.length,0):function(h,d,m,y){var c=t,f=y+m;h^=-1;for(var l=y;l<f;l++)h=h>>>8^c[255&(h^d.charCodeAt(l))];return-1^h}(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(b,o,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(b,o,e){"use strict";var n=null;n=typeof Promise!="undefined"?Promise:b("lie"),o.exports={Promise:n}},{lie:37}],7:[function(b,o,e){"use strict";var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",t=b("pako"),i=b("./utils"),s=b("./stream/GenericWorker"),h=n?"uint8array":"array";function d(m,y){s.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=y,this.meta={}}e.magic="\b\0",i.inherits(d,s),d.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(h,m.data),!1)},d.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new t[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(y){m.push({data:y,meta:m.meta})}},e.compressWorker=function(m){return new d("Deflate",m)},e.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(b,o,e){"use strict";function n(c,f){var l,p="";for(l=0;l<f;l++)p+=String.fromCharCode(255&c),c>>>=8;return p}function t(c,f,l,p,u,v){var S,k,E=c.file,B=c.compression,P=v!==h.utf8encode,$=i.transformTo("string",v(E.name)),F=i.transformTo("string",h.utf8encode(E.name)),M=E.comment,H=i.transformTo("string",v(M)),_=i.transformTo("string",h.utf8encode(M)),z=F.length!==E.name.length,a=_.length!==M.length,N="",G="",O="",J=E.dir,W=E.date,X={crc32:0,compressedSize:0,uncompressedSize:0};f&&!l||(X.crc32=c.crc32,X.compressedSize=c.compressedSize,X.uncompressedSize=c.uncompressedSize);var A=0;f&&(A|=8),P||!z&&!a||(A|=2048);var C=0,q=0;J&&(C|=16),u==="UNIX"?(q=798,C|=function(U,nt){var ct=U;return U||(ct=nt?16893:33204),(65535&ct)<<16}(E.unixPermissions,J)):(q=20,C|=function(U){return 63&(U||0)}(E.dosPermissions)),S=W.getUTCHours(),S<<=6,S|=W.getUTCMinutes(),S<<=5,S|=W.getUTCSeconds()/2,k=W.getUTCFullYear()-1980,k<<=4,k|=W.getUTCMonth()+1,k<<=5,k|=W.getUTCDate(),z&&(G=n(1,1)+n(d($),4)+F,N+="up"+n(G.length,2)+G),a&&(O=n(1,1)+n(d(H),4)+_,N+="uc"+n(O.length,2)+O);var K="";return K+=`
\0`,K+=n(A,2),K+=B.magic,K+=n(S,2),K+=n(k,2),K+=n(X.crc32,4),K+=n(X.compressedSize,4),K+=n(X.uncompressedSize,4),K+=n($.length,2),K+=n(N.length,2),{fileRecord:m.LOCAL_FILE_HEADER+K+$+N,dirRecord:m.CENTRAL_FILE_HEADER+n(q,2)+K+n(H.length,2)+"\0\0\0\0"+n(C,4)+n(p,4)+$+N+H}}var i=b("../utils"),s=b("../stream/GenericWorker"),h=b("../utf8"),d=b("../crc32"),m=b("../signature");function y(c,f,l,p){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=l,this.encodeFileName=p,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(y,s),y.prototype.push=function(c){var f=c.meta.percent||0,l=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,s.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:l?(f+100*(l-p-1))/l:100}}))},y.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var f=this.streamFiles&&!c.file.dir;if(f){var l=t(c,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:l.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(c){this.accumulate=!1;var f=this.streamFiles&&!c.file.dir,l=t(c,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(l.dirRecord),f)this.push({data:function(p){return m.DATA_DESCRIPTOR+n(p.crc32,4)+n(p.compressedSize,4)+n(p.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:l.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var c=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var l=this.bytesWritten-c,p=function(u,v,S,k,E){var B=i.transformTo("string",E(k));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(u,2)+n(u,2)+n(v,4)+n(S,4)+n(B.length,2)+B}(this.dirRecords.length,l,c,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(c){this._sources.push(c);var f=this;return c.on("data",function(l){f.processChunk(l)}),c.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),c.on("error",function(l){f.error(l)}),this},y.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(c){var f=this._sources;if(!s.prototype.error.call(this,c))return!1;for(var l=0;l<f.length;l++)try{f[l].error(c)}catch(p){}return!0},y.prototype.lock=function(){s.prototype.lock.call(this);for(var c=this._sources,f=0;f<c.length;f++)c[f].lock()},o.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(b,o,e){"use strict";var n=b("../compressions"),t=b("./ZipFileWorker");e.generateWorker=function(i,s,h){var d=new t(s.streamFiles,h,s.platform,s.encodeFileName),m=0;try{i.forEach(function(y,c){m++;var f=function(v,S){var k=v||S,E=n[k];if(!E)throw new Error(k+" is not a valid compression method !");return E}(c.options.compression,s.compression),l=c.options.compressionOptions||s.compressionOptions||{},p=c.dir,u=c.date;c._compressWorker(f,l).withStreamInfo("file",{name:y,dir:p,date:u,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(d)}),d.entriesCount=m}catch(y){d.error(y)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(b,o,e){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var i in this)typeof this[i]!="function"&&(t[i]=this[i]);return t}}(n.prototype=b("./object")).loadAsync=b("./load"),n.support=b("./support"),n.defaults=b("./defaults"),n.version="3.10.1",n.loadAsync=function(t,i){return new n().loadAsync(t,i)},n.external=b("./external"),o.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(b,o,e){"use strict";var n=b("./utils"),t=b("./external"),i=b("./utf8"),s=b("./zipEntries"),h=b("./stream/Crc32Probe"),d=b("./nodejsUtils");function m(y){return new t.Promise(function(c,f){var l=y.decompressed.getContentWorker().pipe(new h);l.on("error",function(p){f(p)}).on("end",function(){l.streamInfo.crc32!==y.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}o.exports=function(y,c){var f=this;return c=n.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),d.isNode&&d.isStream(y)?t.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",y,!0,c.optimizedBinaryString,c.base64).then(function(l){var p=new s(c);return p.load(l),p}).then(function(l){var p=[t.Promise.resolve(l)],u=l.files;if(c.checkCRC32)for(var v=0;v<u.length;v++)p.push(m(u[v]));return t.Promise.all(p)}).then(function(l){for(var p=l.shift(),u=p.files,v=0;v<u.length;v++){var S=u[v],k=S.fileNameStr,E=n.resolve(S.fileNameStr);f.file(E,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:c.createFolders}),S.dir||(f.file(E).unsafeOriginalName=k)}return p.zipComment.length&&(f.comment=p.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(b,o,e){"use strict";var n=b("../utils"),t=b("../stream/GenericWorker");function i(s,h){t.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(h)}n.inherits(i,t),i.prototype._bindStream=function(s){var h=this;(this._stream=s).pause(),s.on("data",function(d){h.push({data:d,meta:{percent:0}})}).on("error",function(d){h.isPaused?this.generatedError=d:h.error(d)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},i.prototype.pause=function(){return!!t.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(b,o,e){"use strict";var n=b("readable-stream").Readable;function t(i,s,h){n.call(this,s),this._helper=i;var d=this;i.on("data",function(m,y){d.push(m)||d._helper.pause(),h&&h(y)}).on("error",function(m){d.emit("error",m)}).on("end",function(){d.push(null)})}b("../utils").inherits(t,n),t.prototype._read=function(){this._helper.resume()},o.exports=t},{"../utils":32,"readable-stream":16}],14:[function(b,o,e){"use strict";o.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(n,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,t);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,t)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var t=new Buffer(n);return t.fill(0),t},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(b,o,e){"use strict";function n(E,B,P){var $,F=i.getTypeOf(B),M=i.extend(P||{},d);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(E=u(E)),M.createFolders&&($=p(E))&&v.call(this,$,!0);var H=F==="string"&&M.binary===!1&&M.base64===!1;P&&P.binary!==void 0||(M.binary=!H),(B instanceof m&&B.uncompressedSize===0||M.dir||!B||B.length===0)&&(M.base64=!1,M.binary=!0,B="",M.compression="STORE",F="string");var _=null;_=B instanceof m||B instanceof s?B:f.isNode&&f.isStream(B)?new l(E,B):i.prepareContent(E,B,M.binary,M.optimizedBinaryString,M.base64);var z=new y(E,_,M);this.files[E]=z}var t=b("./utf8"),i=b("./utils"),s=b("./stream/GenericWorker"),h=b("./stream/StreamHelper"),d=b("./defaults"),m=b("./compressedObject"),y=b("./zipObject"),c=b("./generate"),f=b("./nodejsUtils"),l=b("./nodejs/NodejsStreamInputAdapter"),p=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var B=E.lastIndexOf("/");return 0<B?E.substring(0,B):""},u=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},v=function(E,B){return B=B!==void 0?B:d.createFolders,E=u(E),this.files[E]||n.call(this,E,null,{dir:!0,createFolders:B}),this.files[E]};function S(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var B,P,$;for(B in this.files)$=this.files[B],(P=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&E(P,$)},filter:function(E){var B=[];return this.forEach(function(P,$){E(P,$)&&B.push($)}),B},file:function(E,B,P){if(arguments.length!==1)return E=this.root+E,n.call(this,E,B,P),this;if(S(E)){var $=E;return this.filter(function(M,H){return!H.dir&&$.test(M)})}var F=this.files[this.root+E];return F&&!F.dir?F:null},folder:function(E){if(!E)return this;if(S(E))return this.filter(function(F,M){return M.dir&&E.test(F)});var B=this.root+E,P=v.call(this,B),$=this.clone();return $.root=P.name,$},remove:function(E){E=this.root+E;var B=this.files[E];if(B||(E.slice(-1)!=="/"&&(E+="/"),B=this.files[E]),B&&!B.dir)delete this.files[E];else for(var P=this.filter(function(F,M){return M.name.slice(0,E.length)===E}),$=0;$<P.length;$++)delete this.files[P[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var B,P={};try{if((P=i.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:t.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");i.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var $=P.comment||this.comment||"";B=c.generateWorker(this,P,$)}catch(F){(B=new s("error")).error(F)}return new h(B,P.type||"string",P.mimeType)},generateAsync:function(E,B){return this.generateInternalStream(E).accumulate(B)},generateNodeStream:function(E,B){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(B)}};o.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(b,o,e){"use strict";o.exports=b("stream")},{stream:void 0}],17:[function(b,o,e){"use strict";var n=b("./DataReader");function t(i){n.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}b("../utils").inherits(t,n),t.prototype.byteAt=function(i){return this.data[this.zero+i]},t.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),h=i.charCodeAt(1),d=i.charCodeAt(2),m=i.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===s&&this.data[y+1]===h&&this.data[y+2]===d&&this.data[y+3]===m)return y-this.zero;return-1},t.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),h=i.charCodeAt(1),d=i.charCodeAt(2),m=i.charCodeAt(3),y=this.readData(4);return s===y[0]&&h===y[1]&&d===y[2]&&m===y[3]},t.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./DataReader":18}],18:[function(b,o,e){"use strict";var n=b("../utils");function t(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}t.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,h=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)h=(h<<8)+this.byteAt(s);return this.index+=i,h},readString:function(i){return n.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},o.exports=t},{"../utils":32}],19:[function(b,o,e){"use strict";var n=b("./Uint8ArrayReader");function t(i){n.call(this,i)}b("../utils").inherits(t,n),t.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(b,o,e){"use strict";var n=b("./DataReader");function t(i){n.call(this,i)}b("../utils").inherits(t,n),t.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},t.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},t.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},t.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./DataReader":18}],21:[function(b,o,e){"use strict";var n=b("./ArrayReader");function t(i){n.call(this,i)}b("../utils").inherits(t,n),t.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./ArrayReader":17}],22:[function(b,o,e){"use strict";var n=b("../utils"),t=b("../support"),i=b("./ArrayReader"),s=b("./StringReader"),h=b("./NodeBufferReader"),d=b("./Uint8ArrayReader");o.exports=function(m){var y=n.getTypeOf(m);return n.checkSupport(y),y!=="string"||t.uint8array?y==="nodebuffer"?new h(m):t.uint8array?new d(n.transformTo("uint8array",m)):new i(n.transformTo("array",m)):new s(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(b,o,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(b,o,e){"use strict";var n=b("./GenericWorker"),t=b("../utils");function i(s){n.call(this,"ConvertWorker to "+s),this.destType=s}t.inherits(i,n),i.prototype.processChunk=function(s){this.push({data:t.transformTo(this.destType,s.data),meta:s.meta})},o.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(b,o,e){"use strict";var n=b("./GenericWorker"),t=b("../crc32");function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}b("../utils").inherits(i,n),i.prototype.processChunk=function(s){this.streamInfo.crc32=t(s.data,this.streamInfo.crc32||0),this.push(s)},o.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(b,o,e){"use strict";var n=b("../utils"),t=b("./GenericWorker");function i(s){t.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}n.inherits(i,t),i.prototype.processChunk=function(s){if(s){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+s.data.length}t.prototype.processChunk.call(this,s)},o.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(b,o,e){"use strict";var n=b("../utils"),t=b("./GenericWorker");function i(s){t.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(d){h.dataIsReady=!0,h.data=d,h.max=d&&d.length||0,h.type=n.getTypeOf(d),h.isPaused||h._tickAndRepeat()},function(d){h.error(d)})}n.inherits(i,t),i.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,h);break;case"uint8array":s=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":s=this.data.slice(this.index,h)}return this.index=h,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(b,o,e){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,i){return this._listeners[t].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,i){if(this._listeners[t])for(var s=0;s<this._listeners[t].length;s++)this._listeners[t][s].call(this,i)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var i=this;return t.on("data",function(s){i.processChunk(s)}),t.on("end",function(){i.end()}),t.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,i){return this.extraStreamInfo[t]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},o.exports=n},{}],29:[function(b,o,e){"use strict";var n=b("../utils"),t=b("./ConvertWorker"),i=b("./GenericWorker"),s=b("../base64"),h=b("../support"),d=b("../external"),m=null;if(h.nodestream)try{m=b("../nodejs/NodejsStreamOutputAdapter")}catch(f){}function y(f,l){return new d.Promise(function(p,u){var v=[],S=f._internalType,k=f._outputType,E=f._mimeType;f.on("data",function(B,P){v.push(B),l&&l(P)}).on("error",function(B){v=[],u(B)}).on("end",function(){try{var B=function(P,$,F){switch(P){case"blob":return n.newBlob(n.transformTo("arraybuffer",$),F);case"base64":return s.encode($);default:return n.transformTo(P,$)}}(k,function(P,$){var F,M=0,H=null,_=0;for(F=0;F<$.length;F++)_+=$[F].length;switch(P){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(H=new Uint8Array(_),F=0;F<$.length;F++)H.set($[F],M),M+=$[F].length;return H;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+P+"'")}}(S,v),E);p(B)}catch(P){u(P)}v=[]}).resume()})}function c(f,l,p){var u=l;switch(l){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=l,this._mimeType=p,n.checkSupport(u),this._worker=f.pipe(new t(u)),f.lock()}catch(v){this._worker=new i("error"),this._worker.error(v)}}c.prototype={accumulate:function(f){return y(this,f)},on:function(f,l){var p=this;return f==="data"?this._worker.on(f,function(u){l.call(p,u.data,u.meta)}):this._worker.on(f,function(){n.delay(l,arguments,p)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},f)}},o.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(b,o,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",e.nodebuffer=typeof Buffer!="undefined",e.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=new Blob([n],{type:"application/zip"}).size===0}catch(i){try{var t=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);t.append(n),e.blob=t.getBlob("application/zip").size===0}catch(s){e.blob=!1}}}try{e.nodestream=!!b("readable-stream").Readable}catch(i){e.nodestream=!1}},{"readable-stream":16}],31:[function(b,o,e){"use strict";for(var n=b("./utils"),t=b("./support"),i=b("./nodejsUtils"),s=b("./stream/GenericWorker"),h=new Array(256),d=0;d<256;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;h[254]=h[254]=1;function m(){s.call(this,"utf-8 decode"),this.leftOver=null}function y(){s.call(this,"utf-8 encode")}e.utf8encode=function(c){return t.nodebuffer?i.newBufferFrom(c,"utf-8"):function(f){var l,p,u,v,S,k=f.length,E=0;for(v=0;v<k;v++)(64512&(p=f.charCodeAt(v)))==55296&&v+1<k&&(64512&(u=f.charCodeAt(v+1)))==56320&&(p=65536+(p-55296<<10)+(u-56320),v++),E+=p<128?1:p<2048?2:p<65536?3:4;for(l=t.uint8array?new Uint8Array(E):new Array(E),v=S=0;S<E;v++)(64512&(p=f.charCodeAt(v)))==55296&&v+1<k&&(64512&(u=f.charCodeAt(v+1)))==56320&&(p=65536+(p-55296<<10)+(u-56320),v++),p<128?l[S++]=p:(p<2048?l[S++]=192|p>>>6:(p<65536?l[S++]=224|p>>>12:(l[S++]=240|p>>>18,l[S++]=128|p>>>12&63),l[S++]=128|p>>>6&63),l[S++]=128|63&p);return l}(c)},e.utf8decode=function(c){return t.nodebuffer?n.transformTo("nodebuffer",c).toString("utf-8"):function(f){var l,p,u,v,S=f.length,k=new Array(2*S);for(l=p=0;l<S;)if((u=f[l++])<128)k[p++]=u;else if(4<(v=h[u]))k[p++]=65533,l+=v-1;else{for(u&=v===2?31:v===3?15:7;1<v&&l<S;)u=u<<6|63&f[l++],v--;1<v?k[p++]=65533:u<65536?k[p++]=u:(u-=65536,k[p++]=55296|u>>10&1023,k[p++]=56320|1023&u)}return k.length!==p&&(k.subarray?k=k.subarray(0,p):k.length=p),n.applyFromCharCode(k)}(c=n.transformTo(t.uint8array?"uint8array":"array",c))},n.inherits(m,s),m.prototype.processChunk=function(c){var f=n.transformTo(t.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(t.uint8array){var l=f;(f=new Uint8Array(l.length+this.leftOver.length)).set(this.leftOver,0),f.set(l,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var p=function(v,S){var k;for((S=S||v.length)>v.length&&(S=v.length),k=S-1;0<=k&&(192&v[k])==128;)k--;return k<0||k===0?S:k+h[v[k]]>S?k:S}(f),u=f;p!==f.length&&(t.uint8array?(u=f.subarray(0,p),this.leftOver=f.subarray(p,f.length)):(u=f.slice(0,p),this.leftOver=f.slice(p,f.length))),this.push({data:e.utf8decode(u),meta:c.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=m,n.inherits(y,s),y.prototype.processChunk=function(c){this.push({data:e.utf8encode(c.data),meta:c.meta})},e.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(b,o,e){"use strict";var n=b("./support"),t=b("./base64"),i=b("./nodejsUtils"),s=b("./external");function h(l){return l}function d(l,p){for(var u=0;u<l.length;++u)p[u]=255&l.charCodeAt(u);return p}b("setimmediate"),e.newBlob=function(l,p){e.checkSupport("blob");try{return new Blob([l],{type:p})}catch(v){try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(l),u.getBlob(p)}catch(S){throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(l,p,u){var v=[],S=0,k=l.length;if(k<=u)return String.fromCharCode.apply(null,l);for(;S<k;)p==="array"||p==="nodebuffer"?v.push(String.fromCharCode.apply(null,l.slice(S,Math.min(S+u,k)))):v.push(String.fromCharCode.apply(null,l.subarray(S,Math.min(S+u,k)))),S+=u;return v.join("")},stringifyByChar:function(l){for(var p="",u=0;u<l.length;u++)p+=String.fromCharCode(l[u]);return p},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(l){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch(l){return!1}}()}};function y(l){var p=65536,u=e.getTypeOf(l),v=!0;if(u==="uint8array"?v=m.applyCanBeUsed.uint8array:u==="nodebuffer"&&(v=m.applyCanBeUsed.nodebuffer),v)for(;1<p;)try{return m.stringifyByChunk(l,u,p)}catch(S){p=Math.floor(p/2)}return m.stringifyByChar(l)}function c(l,p){for(var u=0;u<l.length;u++)p[u]=l[u];return p}e.applyFromCharCode=y;var f={};f.string={string:h,array:function(l){return d(l,new Array(l.length))},arraybuffer:function(l){return f.string.uint8array(l).buffer},uint8array:function(l){return d(l,new Uint8Array(l.length))},nodebuffer:function(l){return d(l,i.allocBuffer(l.length))}},f.array={string:y,array:h,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return i.newBufferFrom(l)}},f.arraybuffer={string:function(l){return y(new Uint8Array(l))},array:function(l){return c(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:h,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return i.newBufferFrom(new Uint8Array(l))}},f.uint8array={string:y,array:function(l){return c(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:h,nodebuffer:function(l){return i.newBufferFrom(l)}},f.nodebuffer={string:y,array:function(l){return c(l,new Array(l.length))},arraybuffer:function(l){return f.nodebuffer.uint8array(l).buffer},uint8array:function(l){return c(l,new Uint8Array(l.length))},nodebuffer:h},e.transformTo=function(l,p){if(p=p||"",!l)return p;e.checkSupport(l);var u=e.getTypeOf(p);return f[u][l](p)},e.resolve=function(l){for(var p=l.split("/"),u=[],v=0;v<p.length;v++){var S=p[v];S==="."||S===""&&v!==0&&v!==p.length-1||(S===".."?u.pop():u.push(S))}return u.join("/")},e.getTypeOf=function(l){return typeof l=="string"?"string":Object.prototype.toString.call(l)==="[object Array]"?"array":n.nodebuffer&&i.isBuffer(l)?"nodebuffer":n.uint8array&&l instanceof Uint8Array?"uint8array":n.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(l){if(!n[l.toLowerCase()])throw new Error(l+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(l){var p,u,v="";for(u=0;u<(l||"").length;u++)v+="\\x"+((p=l.charCodeAt(u))<16?"0":"")+p.toString(16).toUpperCase();return v},e.delay=function(l,p,u){setImmediate(function(){l.apply(u||null,p||[])})},e.inherits=function(l,p){function u(){}u.prototype=p.prototype,l.prototype=new u},e.extend=function(){var l,p,u={};for(l=0;l<arguments.length;l++)for(p in arguments[l])Object.prototype.hasOwnProperty.call(arguments[l],p)&&u[p]===void 0&&(u[p]=arguments[l][p]);return u},e.prepareContent=function(l,p,u,v,S){return s.Promise.resolve(p).then(function(k){return n.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader!="undefined"?new s.Promise(function(E,B){var P=new FileReader;P.onload=function($){E($.target.result)},P.onerror=function($){B($.target.error)},P.readAsArrayBuffer(k)}):k}).then(function(k){var E=e.getTypeOf(k);return E?(E==="arraybuffer"?k=e.transformTo("uint8array",k):E==="string"&&(S?k=t.decode(k):u&&v!==!0&&(k=function(B){return d(B,n.uint8array?new Uint8Array(B.length):new Array(B.length))}(k))),k):s.Promise.reject(new Error("Can't read the data of '"+l+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(b,o,e){"use strict";var n=b("./reader/readerFor"),t=b("./utils"),i=b("./signature"),s=b("./zipEntry"),h=b("./support");function d(m){this.files=[],this.loadOptions=m}d.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+t.pretty(y)+", expected "+t.pretty(m)+")")}},isSignature:function(m,y){var c=this.reader.index;this.reader.setIndex(m);var f=this.reader.readString(4)===y;return this.reader.setIndex(c),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),y=h.uint8array?"uint8array":"array",c=t.transformTo(y,m);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,y,c,f=this.zip64EndOfCentralSize-44;0<f;)m=this.reader.readInt(2),y=this.reader.readInt(4),c=this.reader.readData(y),this.zip64ExtensibleData[m]={id:m,length:y,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,y;for(m=0;m<this.files.length;m++)y=this.files[m],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(m=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var y=m;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===t.MAX_VALUE_16BITS||this.diskWithCentralDirStart===t.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===t.MAX_VALUE_16BITS||this.centralDirRecords===t.MAX_VALUE_16BITS||this.centralDirSize===t.MAX_VALUE_32BITS||this.centralDirOffset===t.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var f=y-c;if(0<f)this.isSignature(y,i.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(m){this.reader=n(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(b,o,e){"use strict";var n=b("./reader/readerFor"),t=b("./utils"),i=b("./compressedObject"),s=b("./crc32"),h=b("./utf8"),d=b("./compressions"),m=b("./support");function y(c,f){this.options=c,this.loadOptions=f}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var f,l;if(c.skip(22),this.fileNameLength=c.readInt(2),l=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=function(p){for(var u in d)if(Object.prototype.hasOwnProperty.call(d,u)&&d[u].magic===p)return d[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+t.pretty(this.compressionMethod)+" unknown (inner file : "+t.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,f,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var f=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(f),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=n(this.extraFields[1].value);this.uncompressedSize===t.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===t.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===t.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===t.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var f,l,p,u=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<u;)f=c.readInt(2),l=c.readInt(2),p=c.readData(l),this.extraFields[f]={id:f,length:l,value:p};c.setIndex(u)},handleUTF8:function(){var c=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var l=t.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(l)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var u=t.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var f=n(c.value);return f.readInt(1)!==1||s(this.fileName)!==f.readInt(4)?null:h.utf8decode(f.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var f=n(c.value);return f.readInt(1)!==1||s(this.fileComment)!==f.readInt(4)?null:h.utf8decode(f.readData(c.length-5))}return null}},o.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(b,o,e){"use strict";function n(f,l,p){this.name=f,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=l,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var t=b("./stream/StreamHelper"),i=b("./stream/DataWorker"),s=b("./utf8"),h=b("./compressedObject"),d=b("./stream/GenericWorker");n.prototype={internalStream:function(f){var l=null,p="string";try{if(!f)throw new Error("No output type specified.");var u=(p=f.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),l=this._decompressWorker();var v=!this._dataBinary;v&&!u&&(l=l.pipe(new s.Utf8EncodeWorker)),!v&&u&&(l=l.pipe(new s.Utf8DecodeWorker))}catch(S){(l=new d("error")).error(S)}return new t(l,p,"")},async:function(f,l){return this.internalStream(f).accumulate(l)},nodeStream:function(f,l){return this.internalStream(f||"nodebuffer").toNodejsStream(l)},_compressWorker:function(f,l){if(this._data instanceof h&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new s.Utf8EncodeWorker)),h.createWorkerFrom(p,f,l)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof d?this._data:new i(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<m.length;c++)n.prototype[m[c]]=y;o.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(b,o,e){(function(n){"use strict";var t,i,s=n.MutationObserver||n.WebKitMutationObserver;if(s){var h=0,d=new s(f),m=n.document.createTextNode("");d.observe(m,{characterData:!0}),t=function(){m.data=h=++h%2}}else if(n.setImmediate||n.MessageChannel===void 0)t="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var l=n.document.createElement("script");l.onreadystatechange=function(){f(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},n.document.documentElement.appendChild(l)}:function(){setTimeout(f,0)};else{var y=new n.MessageChannel;y.port1.onmessage=f,t=function(){y.port2.postMessage(0)}}var c=[];function f(){var l,p;i=!0;for(var u=c.length;u;){for(p=c,c=[],l=-1;++l<u;)p[l]();u=c.length}i=!1}o.exports=function(l){c.push(l)!==1||i||t()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(b,o,e){"use strict";var n=b("immediate");function t(){}var i={},s=["REJECTED"],h=["FULFILLED"],d=["PENDING"];function m(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,u!==t&&l(this,u)}function y(u,v,S){this.promise=u,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function c(u,v,S){n(function(){var k;try{k=v(S)}catch(E){return i.reject(u,E)}k===u?i.reject(u,new TypeError("Cannot resolve promise with itself")):i.resolve(u,k)})}function f(u){var v=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof v=="function")return function(){v.apply(u,arguments)}}function l(u,v){var S=!1;function k(P){S||(S=!0,i.reject(u,P))}function E(P){S||(S=!0,i.resolve(u,P))}var B=p(function(){v(E,k)});B.status==="error"&&k(B.value)}function p(u,v){var S={};try{S.value=u(v),S.status="success"}catch(k){S.status="error",S.value=k}return S}(o.exports=m).prototype.finally=function(u){if(typeof u!="function")return this;var v=this.constructor;return this.then(function(S){return v.resolve(u()).then(function(){return S})},function(S){return v.resolve(u()).then(function(){throw S})})},m.prototype.catch=function(u){return this.then(null,u)},m.prototype.then=function(u,v){if(typeof u!="function"&&this.state===h||typeof v!="function"&&this.state===s)return this;var S=new this.constructor(t);return this.state!==d?c(S,this.state===h?u:v,this.outcome):this.queue.push(new y(S,u,v)),S},y.prototype.callFulfilled=function(u){i.resolve(this.promise,u)},y.prototype.otherCallFulfilled=function(u){c(this.promise,this.onFulfilled,u)},y.prototype.callRejected=function(u){i.reject(this.promise,u)},y.prototype.otherCallRejected=function(u){c(this.promise,this.onRejected,u)},i.resolve=function(u,v){var S=p(f,v);if(S.status==="error")return i.reject(u,S.value);var k=S.value;if(k)l(u,k);else{u.state=h,u.outcome=v;for(var E=-1,B=u.queue.length;++E<B;)u.queue[E].callFulfilled(v)}return u},i.reject=function(u,v){u.state=s,u.outcome=v;for(var S=-1,k=u.queue.length;++S<k;)u.queue[S].callRejected(v);return u},m.resolve=function(u){return u instanceof this?u:i.resolve(new this(t),u)},m.reject=function(u){var v=new this(t);return i.reject(v,u)},m.all=function(u){var v=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=u.length,k=!1;if(!S)return this.resolve([]);for(var E=new Array(S),B=0,P=-1,$=new this(t);++P<S;)F(u[P],P);return $;function F(M,H){v.resolve(M).then(function(_){E[H]=_,++B!==S||k||(k=!0,i.resolve($,E))},function(_){k||(k=!0,i.reject($,_))})}},m.race=function(u){var v=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=u.length,k=!1;if(!S)return this.resolve([]);for(var E=-1,B=new this(t);++E<S;)P=u[E],v.resolve(P).then(function($){k||(k=!0,i.resolve(B,$))},function($){k||(k=!0,i.reject(B,$))});var P;return B}},{immediate:36}],38:[function(b,o,e){"use strict";var n={};(0,b("./lib/utils/common").assign)(n,b("./lib/deflate"),b("./lib/inflate"),b("./lib/zlib/constants")),o.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(b,o,e){"use strict";var n=b("./zlib/deflate"),t=b("./utils/common"),i=b("./utils/strings"),s=b("./zlib/messages"),h=b("./zlib/zstream"),d=Object.prototype.toString,m=0,y=-1,c=0,f=8;function l(u){if(!(this instanceof l))return new l(u);this.options=t.assign({level:y,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},u||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(S!==m)throw new Error(s[S]);if(v.header&&n.deflateSetHeader(this.strm,v.header),v.dictionary){var k;if(k=typeof v.dictionary=="string"?i.string2buf(v.dictionary):d.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(S=n.deflateSetDictionary(this.strm,k))!==m)throw new Error(s[S]);this._dict_set=!0}}function p(u,v){var S=new l(v);if(S.push(u,!0),S.err)throw S.msg||s[S.err];return S.result}l.prototype.push=function(u,v){var S,k,E=this.strm,B=this.options.chunkSize;if(this.ended)return!1;k=v===~~v?v:v===!0?4:0,typeof u=="string"?E.input=i.string2buf(u):d.call(u)==="[object ArrayBuffer]"?E.input=new Uint8Array(u):E.input=u,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new t.Buf8(B),E.next_out=0,E.avail_out=B),(S=n.deflate(E,k))!==1&&S!==m)return this.onEnd(S),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(t.shrinkBuf(E.output,E.next_out))):this.onData(t.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&S!==1);return k===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===m):k!==2||(this.onEnd(m),!(E.avail_out=0))},l.prototype.onData=function(u){this.chunks.push(u)},l.prototype.onEnd=function(u){u===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},e.Deflate=l,e.deflate=p,e.deflateRaw=function(u,v){return(v=v||{}).raw=!0,p(u,v)},e.gzip=function(u,v){return(v=v||{}).gzip=!0,p(u,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(b,o,e){"use strict";var n=b("./zlib/inflate"),t=b("./utils/common"),i=b("./utils/strings"),s=b("./zlib/constants"),h=b("./zlib/messages"),d=b("./zlib/zstream"),m=b("./zlib/gzheader"),y=Object.prototype.toString;function c(l){if(!(this instanceof c))return new c(l);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},l||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||l&&l.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var u=n.inflateInit2(this.strm,p.windowBits);if(u!==s.Z_OK)throw new Error(h[u]);this.header=new m,n.inflateGetHeader(this.strm,this.header)}function f(l,p){var u=new c(p);if(u.push(l,!0),u.err)throw u.msg||h[u.err];return u.result}c.prototype.push=function(l,p){var u,v,S,k,E,B,P=this.strm,$=this.options.chunkSize,F=this.options.dictionary,M=!1;if(this.ended)return!1;v=p===~~p?p:p===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof l=="string"?P.input=i.binstring2buf(l):y.call(l)==="[object ArrayBuffer]"?P.input=new Uint8Array(l):P.input=l,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new t.Buf8($),P.next_out=0,P.avail_out=$),(u=n.inflate(P,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&F&&(B=typeof F=="string"?i.string2buf(F):y.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,u=n.inflateSetDictionary(this.strm,B)),u===s.Z_BUF_ERROR&&M===!0&&(u=s.Z_OK,M=!1),u!==s.Z_STREAM_END&&u!==s.Z_OK)return this.onEnd(u),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&u!==s.Z_STREAM_END&&(P.avail_in!==0||v!==s.Z_FINISH&&v!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=i.utf8border(P.output,P.next_out),k=P.next_out-S,E=i.buf2string(P.output,S),P.next_out=k,P.avail_out=$-k,k&&t.arraySet(P.output,P.output,S,k,0),this.onData(E)):this.onData(t.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(M=!0)}while((0<P.avail_in||P.avail_out===0)&&u!==s.Z_STREAM_END);return u===s.Z_STREAM_END&&(v=s.Z_FINISH),v===s.Z_FINISH?(u=n.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===s.Z_OK):v!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(P.avail_out=0))},c.prototype.onData=function(l){this.chunks.push(l)},c.prototype.onEnd=function(l){l===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},e.Inflate=c,e.inflate=f,e.inflateRaw=function(l,p){return(p=p||{}).raw=!0,f(l,p)},e.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(b,o,e){"use strict";var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";e.assign=function(s){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var d=h.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var m in d)d.hasOwnProperty(m)&&(s[m]=d[m])}}return s},e.shrinkBuf=function(s,h){return s.length===h?s:s.subarray?s.subarray(0,h):(s.length=h,s)};var t={arraySet:function(s,h,d,m,y){if(h.subarray&&s.subarray)s.set(h.subarray(d,d+m),y);else for(var c=0;c<m;c++)s[y+c]=h[d+c]},flattenChunks:function(s){var h,d,m,y,c,f;for(h=m=0,d=s.length;h<d;h++)m+=s[h].length;for(f=new Uint8Array(m),h=y=0,d=s.length;h<d;h++)c=s[h],f.set(c,y),y+=c.length;return f}},i={arraySet:function(s,h,d,m,y){for(var c=0;c<m;c++)s[y+c]=h[d+c]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,t)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(n)},{}],42:[function(b,o,e){"use strict";var n=b("./common"),t=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(m){t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(m){i=!1}for(var s=new n.Buf8(256),h=0;h<256;h++)s[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function d(m,y){if(y<65537&&(m.subarray&&i||!m.subarray&&t))return String.fromCharCode.apply(null,n.shrinkBuf(m,y));for(var c="",f=0;f<y;f++)c+=String.fromCharCode(m[f]);return c}s[254]=s[254]=1,e.string2buf=function(m){var y,c,f,l,p,u=m.length,v=0;for(l=0;l<u;l++)(64512&(c=m.charCodeAt(l)))==55296&&l+1<u&&(64512&(f=m.charCodeAt(l+1)))==56320&&(c=65536+(c-55296<<10)+(f-56320),l++),v+=c<128?1:c<2048?2:c<65536?3:4;for(y=new n.Buf8(v),l=p=0;p<v;l++)(64512&(c=m.charCodeAt(l)))==55296&&l+1<u&&(64512&(f=m.charCodeAt(l+1)))==56320&&(c=65536+(c-55296<<10)+(f-56320),l++),c<128?y[p++]=c:(c<2048?y[p++]=192|c>>>6:(c<65536?y[p++]=224|c>>>12:(y[p++]=240|c>>>18,y[p++]=128|c>>>12&63),y[p++]=128|c>>>6&63),y[p++]=128|63&c);return y},e.buf2binstring=function(m){return d(m,m.length)},e.binstring2buf=function(m){for(var y=new n.Buf8(m.length),c=0,f=y.length;c<f;c++)y[c]=m.charCodeAt(c);return y},e.buf2string=function(m,y){var c,f,l,p,u=y||m.length,v=new Array(2*u);for(c=f=0;c<u;)if((l=m[c++])<128)v[f++]=l;else if(4<(p=s[l]))v[f++]=65533,c+=p-1;else{for(l&=p===2?31:p===3?15:7;1<p&&c<u;)l=l<<6|63&m[c++],p--;1<p?v[f++]=65533:l<65536?v[f++]=l:(l-=65536,v[f++]=55296|l>>10&1023,v[f++]=56320|1023&l)}return d(v,f)},e.utf8border=function(m,y){var c;for((y=y||m.length)>m.length&&(y=m.length),c=y-1;0<=c&&(192&m[c])==128;)c--;return c<0||c===0?y:c+s[m[c]]>y?c:y}},{"./common":41}],43:[function(b,o,e){"use strict";o.exports=function(n,t,i,s){for(var h=65535&n|0,d=n>>>16&65535|0,m=0;i!==0;){for(i-=m=2e3<i?2e3:i;d=d+(h=h+t[s++]|0)|0,--m;);h%=65521,d%=65521}return h|d<<16|0}},{}],44:[function(b,o,e){"use strict";o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(b,o,e){"use strict";var n=function(){for(var t,i=[],s=0;s<256;s++){t=s;for(var h=0;h<8;h++)t=1&t?3988292384^t>>>1:t>>>1;i[s]=t}return i}();o.exports=function(t,i,s,h){var d=n,m=h+s;t^=-1;for(var y=h;y<m;y++)t=t>>>8^d[255&(t^i[y])];return-1^t}},{}],46:[function(b,o,e){"use strict";var n,t=b("../utils/common"),i=b("./trees"),s=b("./adler32"),h=b("./crc32"),d=b("./messages"),m=0,y=4,c=0,f=-2,l=-1,p=4,u=2,v=8,S=9,k=286,E=30,B=19,P=2*k+1,$=15,F=3,M=258,H=M+F+1,_=42,z=113,a=1,N=2,G=3,O=4;function J(r,D){return r.msg=d[D],D}function W(r){return(r<<1)-(4<r?9:0)}function X(r){for(var D=r.length;0<=--D;)r[D]=0}function A(r){var D=r.state,T=D.pending;T>r.avail_out&&(T=r.avail_out),T!==0&&(t.arraySet(r.output,D.pending_buf,D.pending_out,T,r.next_out),r.next_out+=T,D.pending_out+=T,r.total_out+=T,r.avail_out-=T,D.pending-=T,D.pending===0&&(D.pending_out=0))}function C(r,D){i._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,D),r.block_start=r.strstart,A(r.strm)}function q(r,D){r.pending_buf[r.pending++]=D}function K(r,D){r.pending_buf[r.pending++]=D>>>8&255,r.pending_buf[r.pending++]=255&D}function U(r,D){var T,w,g=r.max_chain_length,x=r.strstart,L=r.prev_length,R=r.nice_match,I=r.strstart>r.w_size-H?r.strstart-(r.w_size-H):0,Z=r.window,Y=r.w_mask,j=r.prev,V=r.strstart+M,rt=Z[x+L-1],et=Z[x+L];r.prev_length>=r.good_match&&(g>>=2),R>r.lookahead&&(R=r.lookahead);do if(Z[(T=D)+L]===et&&Z[T+L-1]===rt&&Z[T]===Z[x]&&Z[++T]===Z[x+1]){x+=2,T++;do;while(Z[++x]===Z[++T]&&Z[++x]===Z[++T]&&Z[++x]===Z[++T]&&Z[++x]===Z[++T]&&Z[++x]===Z[++T]&&Z[++x]===Z[++T]&&Z[++x]===Z[++T]&&Z[++x]===Z[++T]&&x<V);if(w=M-(V-x),x=V-M,L<w){if(r.match_start=D,R<=(L=w))break;rt=Z[x+L-1],et=Z[x+L]}}while((D=j[D&Y])>I&&--g!=0);return L<=r.lookahead?L:r.lookahead}function nt(r){var D,T,w,g,x,L,R,I,Z,Y,j=r.w_size;do{if(g=r.window_size-r.lookahead-r.strstart,r.strstart>=j+(j-H)){for(t.arraySet(r.window,r.window,j,j,0),r.match_start-=j,r.strstart-=j,r.block_start-=j,D=T=r.hash_size;w=r.head[--D],r.head[D]=j<=w?w-j:0,--T;);for(D=T=j;w=r.prev[--D],r.prev[D]=j<=w?w-j:0,--T;);g+=j}if(r.strm.avail_in===0)break;if(L=r.strm,R=r.window,I=r.strstart+r.lookahead,Z=g,Y=void 0,Y=L.avail_in,Z<Y&&(Y=Z),T=Y===0?0:(L.avail_in-=Y,t.arraySet(R,L.input,L.next_in,Y,I),L.state.wrap===1?L.adler=s(L.adler,R,Y,I):L.state.wrap===2&&(L.adler=h(L.adler,R,Y,I)),L.next_in+=Y,L.total_in+=Y,Y),r.lookahead+=T,r.lookahead+r.insert>=F)for(x=r.strstart-r.insert,r.ins_h=r.window[x],r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+F-1])&r.hash_mask,r.prev[x&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=x,x++,r.insert--,!(r.lookahead+r.insert<F)););}while(r.lookahead<H&&r.strm.avail_in!==0)}function ct(r,D){for(var T,w;;){if(r.lookahead<H){if(nt(r),r.lookahead<H&&D===m)return a;if(r.lookahead===0)break}if(T=0,r.lookahead>=F&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+F-1])&r.hash_mask,T=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),T!==0&&r.strstart-T<=r.w_size-H&&(r.match_length=U(r,T)),r.match_length>=F)if(w=i._tr_tally(r,r.strstart-r.match_start,r.match_length-F),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=F){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+F-1])&r.hash_mask,T=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else w=i._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(w&&(C(r,!1),r.strm.avail_out===0))return a}return r.insert=r.strstart<F-1?r.strstart:F-1,D===y?(C(r,!0),r.strm.avail_out===0?G:O):r.last_lit&&(C(r,!1),r.strm.avail_out===0)?a:N}function tt(r,D){for(var T,w,g;;){if(r.lookahead<H){if(nt(r),r.lookahead<H&&D===m)return a;if(r.lookahead===0)break}if(T=0,r.lookahead>=F&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+F-1])&r.hash_mask,T=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=F-1,T!==0&&r.prev_length<r.max_lazy_match&&r.strstart-T<=r.w_size-H&&(r.match_length=U(r,T),r.match_length<=5&&(r.strategy===1||r.match_length===F&&4096<r.strstart-r.match_start)&&(r.match_length=F-1)),r.prev_length>=F&&r.match_length<=r.prev_length){for(g=r.strstart+r.lookahead-F,w=i._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-F),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=g&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+F-1])&r.hash_mask,T=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=F-1,r.strstart++,w&&(C(r,!1),r.strm.avail_out===0))return a}else if(r.match_available){if((w=i._tr_tally(r,0,r.window[r.strstart-1]))&&C(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return a}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(w=i._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<F-1?r.strstart:F-1,D===y?(C(r,!0),r.strm.avail_out===0?G:O):r.last_lit&&(C(r,!1),r.strm.avail_out===0)?a:N}function it(r,D,T,w,g){this.good_length=r,this.max_lazy=D,this.nice_length=T,this.max_chain=w,this.func=g}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(2*P),this.dyn_dtree=new t.Buf16(2*(2*E+1)),this.bl_tree=new t.Buf16(2*(2*B+1)),X(this.dyn_ltree),X(this.dyn_dtree),X(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16($+1),this.heap=new t.Buf16(2*k+1),X(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*k+1),X(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function st(r){var D;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=u,(D=r.state).pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?_:z,r.adler=D.wrap===2?0:1,D.last_flush=m,i._tr_init(D),c):J(r,f)}function mt(r){var D=st(r);return D===c&&function(T){T.window_size=2*T.w_size,X(T.head),T.max_lazy_match=n[T.level].max_lazy,T.good_match=n[T.level].good_length,T.nice_match=n[T.level].nice_length,T.max_chain_length=n[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=F-1,T.match_available=0,T.ins_h=0}(r.state),D}function ft(r,D,T,w,g,x){if(!r)return f;var L=1;if(D===l&&(D=6),w<0?(L=0,w=-w):15<w&&(L=2,w-=16),g<1||S<g||T!==v||w<8||15<w||D<0||9<D||x<0||p<x)return J(r,f);w===8&&(w=9);var R=new ot;return(r.state=R).strm=r,R.wrap=L,R.gzhead=null,R.w_bits=w,R.w_size=1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=g+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+F-1)/F),R.window=new t.Buf8(2*R.w_size),R.head=new t.Buf16(R.hash_size),R.prev=new t.Buf16(R.w_size),R.lit_bufsize=1<<g+6,R.pending_buf_size=4*R.lit_bufsize,R.pending_buf=new t.Buf8(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=D,R.strategy=x,R.method=T,mt(r)}n=[new it(0,0,0,0,function(r,D){var T=65535;for(T>r.pending_buf_size-5&&(T=r.pending_buf_size-5);;){if(r.lookahead<=1){if(nt(r),r.lookahead===0&&D===m)return a;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var w=r.block_start+T;if((r.strstart===0||r.strstart>=w)&&(r.lookahead=r.strstart-w,r.strstart=w,C(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-H&&(C(r,!1),r.strm.avail_out===0))return a}return r.insert=0,D===y?(C(r,!0),r.strm.avail_out===0?G:O):(r.strstart>r.block_start&&(C(r,!1),r.strm.avail_out),a)}),new it(4,4,8,4,ct),new it(4,5,16,8,ct),new it(4,6,32,32,ct),new it(4,4,16,16,tt),new it(8,16,32,32,tt),new it(8,16,128,128,tt),new it(8,32,128,256,tt),new it(32,128,258,1024,tt),new it(32,258,258,4096,tt)],e.deflateInit=function(r,D){return ft(r,D,v,15,8,0)},e.deflateInit2=ft,e.deflateReset=mt,e.deflateResetKeep=st,e.deflateSetHeader=function(r,D){return r&&r.state?r.state.wrap!==2?f:(r.state.gzhead=D,c):f},e.deflate=function(r,D){var T,w,g,x;if(!r||!r.state||5<D||D<0)return r?J(r,f):f;if(w=r.state,!r.output||!r.input&&r.avail_in!==0||w.status===666&&D!==y)return J(r,r.avail_out===0?-5:f);if(w.strm=r,T=w.last_flush,w.last_flush=D,w.status===_)if(w.wrap===2)r.adler=0,q(w,31),q(w,139),q(w,8),w.gzhead?(q(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),q(w,255&w.gzhead.time),q(w,w.gzhead.time>>8&255),q(w,w.gzhead.time>>16&255),q(w,w.gzhead.time>>24&255),q(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),q(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(q(w,255&w.gzhead.extra.length),q(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(r.adler=h(r.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(q(w,0),q(w,0),q(w,0),q(w,0),q(w,0),q(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),q(w,3),w.status=z);else{var L=v+(w.w_bits-8<<4)<<8;L|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(L|=32),L+=31-L%31,w.status=z,K(w,L),w.strstart!==0&&(K(w,r.adler>>>16),K(w,65535&r.adler)),r.adler=1}if(w.status===69)if(w.gzhead.extra){for(g=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>g&&(r.adler=h(r.adler,w.pending_buf,w.pending-g,g)),A(r),g=w.pending,w.pending!==w.pending_buf_size));)q(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>g&&(r.adler=h(r.adler,w.pending_buf,w.pending-g,g)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){g=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>g&&(r.adler=h(r.adler,w.pending_buf,w.pending-g,g)),A(r),g=w.pending,w.pending===w.pending_buf_size)){x=1;break}x=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,q(w,x)}while(x!==0);w.gzhead.hcrc&&w.pending>g&&(r.adler=h(r.adler,w.pending_buf,w.pending-g,g)),x===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){g=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>g&&(r.adler=h(r.adler,w.pending_buf,w.pending-g,g)),A(r),g=w.pending,w.pending===w.pending_buf_size)){x=1;break}x=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,q(w,x)}while(x!==0);w.gzhead.hcrc&&w.pending>g&&(r.adler=h(r.adler,w.pending_buf,w.pending-g,g)),x===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&A(r),w.pending+2<=w.pending_buf_size&&(q(w,255&r.adler),q(w,r.adler>>8&255),r.adler=0,w.status=z)):w.status=z),w.pending!==0){if(A(r),r.avail_out===0)return w.last_flush=-1,c}else if(r.avail_in===0&&W(D)<=W(T)&&D!==y)return J(r,-5);if(w.status===666&&r.avail_in!==0)return J(r,-5);if(r.avail_in!==0||w.lookahead!==0||D!==m&&w.status!==666){var R=w.strategy===2?function(I,Z){for(var Y;;){if(I.lookahead===0&&(nt(I),I.lookahead===0)){if(Z===m)return a;break}if(I.match_length=0,Y=i._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,Y&&(C(I,!1),I.strm.avail_out===0))return a}return I.insert=0,Z===y?(C(I,!0),I.strm.avail_out===0?G:O):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?a:N}(w,D):w.strategy===3?function(I,Z){for(var Y,j,V,rt,et=I.window;;){if(I.lookahead<=M){if(nt(I),I.lookahead<=M&&Z===m)return a;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=F&&0<I.strstart&&(j=et[V=I.strstart-1])===et[++V]&&j===et[++V]&&j===et[++V]){rt=I.strstart+M;do;while(j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&V<rt);I.match_length=M-(rt-V),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=F?(Y=i._tr_tally(I,1,I.match_length-F),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(Y=i._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),Y&&(C(I,!1),I.strm.avail_out===0))return a}return I.insert=0,Z===y?(C(I,!0),I.strm.avail_out===0?G:O):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?a:N}(w,D):n[w.level].func(w,D);if(R!==G&&R!==O||(w.status=666),R===a||R===G)return r.avail_out===0&&(w.last_flush=-1),c;if(R===N&&(D===1?i._tr_align(w):D!==5&&(i._tr_stored_block(w,0,0,!1),D===3&&(X(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),A(r),r.avail_out===0))return w.last_flush=-1,c}return D!==y?c:w.wrap<=0?1:(w.wrap===2?(q(w,255&r.adler),q(w,r.adler>>8&255),q(w,r.adler>>16&255),q(w,r.adler>>24&255),q(w,255&r.total_in),q(w,r.total_in>>8&255),q(w,r.total_in>>16&255),q(w,r.total_in>>24&255)):(K(w,r.adler>>>16),K(w,65535&r.adler)),A(r),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?c:1)},e.deflateEnd=function(r){var D;return r&&r.state?(D=r.state.status)!==_&&D!==69&&D!==73&&D!==91&&D!==103&&D!==z&&D!==666?J(r,f):(r.state=null,D===z?J(r,-3):c):f},e.deflateSetDictionary=function(r,D){var T,w,g,x,L,R,I,Z,Y=D.length;if(!r||!r.state||(x=(T=r.state).wrap)===2||x===1&&T.status!==_||T.lookahead)return f;for(x===1&&(r.adler=s(r.adler,D,Y,0)),T.wrap=0,Y>=T.w_size&&(x===0&&(X(T.head),T.strstart=0,T.block_start=0,T.insert=0),Z=new t.Buf8(T.w_size),t.arraySet(Z,D,Y-T.w_size,T.w_size,0),D=Z,Y=T.w_size),L=r.avail_in,R=r.next_in,I=r.input,r.avail_in=Y,r.next_in=0,r.input=D,nt(T);T.lookahead>=F;){for(w=T.strstart,g=T.lookahead-(F-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[w+F-1])&T.hash_mask,T.prev[w&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=w,w++,--g;);T.strstart=w,T.lookahead=F-1,nt(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=F-1,T.match_available=0,r.next_in=R,r.input=I,r.avail_in=L,T.wrap=x,c},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(b,o,e){"use strict";o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(b,o,e){"use strict";o.exports=function(n,t){var i,s,h,d,m,y,c,f,l,p,u,v,S,k,E,B,P,$,F,M,H,_,z,a,N;i=n.state,s=n.next_in,a=n.input,h=s+(n.avail_in-5),d=n.next_out,N=n.output,m=d-(t-n.avail_out),y=d+(n.avail_out-257),c=i.dmax,f=i.wsize,l=i.whave,p=i.wnext,u=i.window,v=i.hold,S=i.bits,k=i.lencode,E=i.distcode,B=(1<<i.lenbits)-1,P=(1<<i.distbits)-1;t:do{S<15&&(v+=a[s++]<<S,S+=8,v+=a[s++]<<S,S+=8),$=k[v&B];e:for(;;){if(v>>>=F=$>>>24,S-=F,(F=$>>>16&255)===0)N[d++]=65535&$;else{if(!(16&F)){if(!(64&F)){$=k[(65535&$)+(v&(1<<F)-1)];continue e}if(32&F){i.mode=12;break t}n.msg="invalid literal/length code",i.mode=30;break t}M=65535&$,(F&=15)&&(S<F&&(v+=a[s++]<<S,S+=8),M+=v&(1<<F)-1,v>>>=F,S-=F),S<15&&(v+=a[s++]<<S,S+=8,v+=a[s++]<<S,S+=8),$=E[v&P];i:for(;;){if(v>>>=F=$>>>24,S-=F,!(16&(F=$>>>16&255))){if(!(64&F)){$=E[(65535&$)+(v&(1<<F)-1)];continue i}n.msg="invalid distance code",i.mode=30;break t}if(H=65535&$,S<(F&=15)&&(v+=a[s++]<<S,(S+=8)<F&&(v+=a[s++]<<S,S+=8)),c<(H+=v&(1<<F)-1)){n.msg="invalid distance too far back",i.mode=30;break t}if(v>>>=F,S-=F,(F=d-m)<H){if(l<(F=H-F)&&i.sane){n.msg="invalid distance too far back",i.mode=30;break t}if(z=u,(_=0)===p){if(_+=f-F,F<M){for(M-=F;N[d++]=u[_++],--F;);_=d-H,z=N}}else if(p<F){if(_+=f+p-F,(F-=p)<M){for(M-=F;N[d++]=u[_++],--F;);if(_=0,p<M){for(M-=F=p;N[d++]=u[_++],--F;);_=d-H,z=N}}}else if(_+=p-F,F<M){for(M-=F;N[d++]=u[_++],--F;);_=d-H,z=N}for(;2<M;)N[d++]=z[_++],N[d++]=z[_++],N[d++]=z[_++],M-=3;M&&(N[d++]=z[_++],1<M&&(N[d++]=z[_++]))}else{for(_=d-H;N[d++]=N[_++],N[d++]=N[_++],N[d++]=N[_++],2<(M-=3););M&&(N[d++]=N[_++],1<M&&(N[d++]=N[_++]))}break}}break}}while(s<h&&d<y);s-=M=S>>3,v&=(1<<(S-=M<<3))-1,n.next_in=s,n.next_out=d,n.avail_in=s<h?h-s+5:5-(s-h),n.avail_out=d<y?y-d+257:257-(d-y),i.hold=v,i.bits=S}},{}],49:[function(b,o,e){"use strict";var n=b("../utils/common"),t=b("./adler32"),i=b("./crc32"),s=b("./inffast"),h=b("./inftrees"),d=1,m=2,y=0,c=-2,f=1,l=852,p=592;function u(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(_){var z;return _&&_.state?(z=_.state,_.total_in=_.total_out=z.total=0,_.msg="",z.wrap&&(_.adler=1&z.wrap),z.mode=f,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new n.Buf32(l),z.distcode=z.distdyn=new n.Buf32(p),z.sane=1,z.back=-1,y):c}function k(_){var z;return _&&_.state?((z=_.state).wsize=0,z.whave=0,z.wnext=0,S(_)):c}function E(_,z){var a,N;return _&&_.state?(N=_.state,z<0?(a=0,z=-z):(a=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?c:(N.window!==null&&N.wbits!==z&&(N.window=null),N.wrap=a,N.wbits=z,k(_))):c}function B(_,z){var a,N;return _?(N=new v,(_.state=N).window=null,(a=E(_,z))!==y&&(_.state=null),a):c}var P,$,F=!0;function M(_){if(F){var z;for(P=new n.Buf32(512),$=new n.Buf32(32),z=0;z<144;)_.lens[z++]=8;for(;z<256;)_.lens[z++]=9;for(;z<280;)_.lens[z++]=7;for(;z<288;)_.lens[z++]=8;for(h(d,_.lens,0,288,P,0,_.work,{bits:9}),z=0;z<32;)_.lens[z++]=5;h(m,_.lens,0,32,$,0,_.work,{bits:5}),F=!1}_.lencode=P,_.lenbits=9,_.distcode=$,_.distbits=5}function H(_,z,a,N){var G,O=_.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new n.Buf8(O.wsize)),N>=O.wsize?(n.arraySet(O.window,z,a-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(N<(G=O.wsize-O.wnext)&&(G=N),n.arraySet(O.window,z,a-N,G,O.wnext),(N-=G)?(n.arraySet(O.window,z,a-N,N,0),O.wnext=N,O.whave=O.wsize):(O.wnext+=G,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=G))),0}e.inflateReset=k,e.inflateReset2=E,e.inflateResetKeep=S,e.inflateInit=function(_){return B(_,15)},e.inflateInit2=B,e.inflate=function(_,z){var a,N,G,O,J,W,X,A,C,q,K,U,nt,ct,tt,it,ot,st,mt,ft,r,D,T,w,g=0,x=new n.Buf8(4),L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return c;(a=_.state).mode===12&&(a.mode=13),J=_.next_out,G=_.output,X=_.avail_out,O=_.next_in,N=_.input,W=_.avail_in,A=a.hold,C=a.bits,q=W,K=X,D=y;t:for(;;)switch(a.mode){case f:if(a.wrap===0){a.mode=13;break}for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(2&a.wrap&&A===35615){x[a.check=0]=255&A,x[1]=A>>>8&255,a.check=i(a.check,x,2,0),C=A=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&A)<<8)+(A>>8))%31){_.msg="incorrect header check",a.mode=30;break}if((15&A)!=8){_.msg="unknown compression method",a.mode=30;break}if(C-=4,r=8+(15&(A>>>=4)),a.wbits===0)a.wbits=r;else if(r>a.wbits){_.msg="invalid window size",a.mode=30;break}a.dmax=1<<r,_.adler=a.check=1,a.mode=512&A?10:12,C=A=0;break;case 2:for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(a.flags=A,(255&a.flags)!=8){_.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){_.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=A>>8&1),512&a.flags&&(x[0]=255&A,x[1]=A>>>8&255,a.check=i(a.check,x,2,0)),C=A=0,a.mode=3;case 3:for(;C<32;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.head&&(a.head.time=A),512&a.flags&&(x[0]=255&A,x[1]=A>>>8&255,x[2]=A>>>16&255,x[3]=A>>>24&255,a.check=i(a.check,x,4,0)),C=A=0,a.mode=4;case 4:for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.head&&(a.head.xflags=255&A,a.head.os=A>>8),512&a.flags&&(x[0]=255&A,x[1]=A>>>8&255,a.check=i(a.check,x,2,0)),C=A=0,a.mode=5;case 5:if(1024&a.flags){for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.length=A,a.head&&(a.head.extra_len=A),512&a.flags&&(x[0]=255&A,x[1]=A>>>8&255,a.check=i(a.check,x,2,0)),C=A=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(W<(U=a.length)&&(U=W),U&&(a.head&&(r=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),n.arraySet(a.head.extra,N,O,U,r)),512&a.flags&&(a.check=i(a.check,N,U,O)),W-=U,O+=U,a.length-=U),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(W===0)break t;for(U=0;r=N[O+U++],a.head&&r&&a.length<65536&&(a.head.name+=String.fromCharCode(r)),r&&U<W;);if(512&a.flags&&(a.check=i(a.check,N,U,O)),W-=U,O+=U,r)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(W===0)break t;for(U=0;r=N[O+U++],a.head&&r&&a.length<65536&&(a.head.comment+=String.fromCharCode(r)),r&&U<W;);if(512&a.flags&&(a.check=i(a.check,N,U,O)),W-=U,O+=U,r)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(A!==(65535&a.check)){_.msg="header crc mismatch",a.mode=30;break}C=A=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),_.adler=a.check=0,a.mode=12;break;case 10:for(;C<32;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}_.adler=a.check=u(A),C=A=0,a.mode=11;case 11:if(a.havedict===0)return _.next_out=J,_.avail_out=X,_.next_in=O,_.avail_in=W,a.hold=A,a.bits=C,2;_.adler=a.check=1,a.mode=12;case 12:if(z===5||z===6)break t;case 13:if(a.last){A>>>=7&C,C-=7&C,a.mode=27;break}for(;C<3;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}switch(a.last=1&A,C-=1,3&(A>>>=1)){case 0:a.mode=14;break;case 1:if(M(a),a.mode=20,z!==6)break;A>>>=2,C-=2;break t;case 2:a.mode=17;break;case 3:_.msg="invalid block type",a.mode=30}A>>>=2,C-=2;break;case 14:for(A>>>=7&C,C-=7&C;C<32;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if((65535&A)!=(A>>>16^65535)){_.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&A,C=A=0,a.mode=15,z===6)break t;case 15:a.mode=16;case 16:if(U=a.length){if(W<U&&(U=W),X<U&&(U=X),U===0)break t;n.arraySet(G,N,O,U,J),W-=U,O+=U,X-=U,J+=U,a.length-=U;break}a.mode=12;break;case 17:for(;C<14;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(a.nlen=257+(31&A),A>>>=5,C-=5,a.ndist=1+(31&A),A>>>=5,C-=5,a.ncode=4+(15&A),A>>>=4,C-=4,286<a.nlen||30<a.ndist){_.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;C<3;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.lens[L[a.have++]]=7&A,A>>>=3,C-=3}for(;a.have<19;)a.lens[L[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,T={bits:a.lenbits},D=h(0,a.lens,0,19,a.lencode,0,a.work,T),a.lenbits=T.bits,D){_.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;it=(g=a.lencode[A&(1<<a.lenbits)-1])>>>16&255,ot=65535&g,!((tt=g>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(ot<16)A>>>=tt,C-=tt,a.lens[a.have++]=ot;else{if(ot===16){for(w=tt+2;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(A>>>=tt,C-=tt,a.have===0){_.msg="invalid bit length repeat",a.mode=30;break}r=a.lens[a.have-1],U=3+(3&A),A>>>=2,C-=2}else if(ot===17){for(w=tt+3;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}C-=tt,r=0,U=3+(7&(A>>>=tt)),A>>>=3,C-=3}else{for(w=tt+7;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}C-=tt,r=0,U=11+(127&(A>>>=tt)),A>>>=7,C-=7}if(a.have+U>a.nlen+a.ndist){_.msg="invalid bit length repeat",a.mode=30;break}for(;U--;)a.lens[a.have++]=r}}if(a.mode===30)break;if(a.lens[256]===0){_.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,T={bits:a.lenbits},D=h(d,a.lens,0,a.nlen,a.lencode,0,a.work,T),a.lenbits=T.bits,D){_.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,T={bits:a.distbits},D=h(m,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,T),a.distbits=T.bits,D){_.msg="invalid distances set",a.mode=30;break}if(a.mode=20,z===6)break t;case 20:a.mode=21;case 21:if(6<=W&&258<=X){_.next_out=J,_.avail_out=X,_.next_in=O,_.avail_in=W,a.hold=A,a.bits=C,s(_,K),J=_.next_out,G=_.output,X=_.avail_out,O=_.next_in,N=_.input,W=_.avail_in,A=a.hold,C=a.bits,a.mode===12&&(a.back=-1);break}for(a.back=0;it=(g=a.lencode[A&(1<<a.lenbits)-1])>>>16&255,ot=65535&g,!((tt=g>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(it&&!(240&it)){for(st=tt,mt=it,ft=ot;it=(g=a.lencode[ft+((A&(1<<st+mt)-1)>>st)])>>>16&255,ot=65535&g,!(st+(tt=g>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}A>>>=st,C-=st,a.back+=st}if(A>>>=tt,C-=tt,a.back+=tt,a.length=ot,it===0){a.mode=26;break}if(32&it){a.back=-1,a.mode=12;break}if(64&it){_.msg="invalid literal/length code",a.mode=30;break}a.extra=15&it,a.mode=22;case 22:if(a.extra){for(w=a.extra;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.length+=A&(1<<a.extra)-1,A>>>=a.extra,C-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;it=(g=a.distcode[A&(1<<a.distbits)-1])>>>16&255,ot=65535&g,!((tt=g>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(!(240&it)){for(st=tt,mt=it,ft=ot;it=(g=a.distcode[ft+((A&(1<<st+mt)-1)>>st)])>>>16&255,ot=65535&g,!(st+(tt=g>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}A>>>=st,C-=st,a.back+=st}if(A>>>=tt,C-=tt,a.back+=tt,64&it){_.msg="invalid distance code",a.mode=30;break}a.offset=ot,a.extra=15&it,a.mode=24;case 24:if(a.extra){for(w=a.extra;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.offset+=A&(1<<a.extra)-1,A>>>=a.extra,C-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){_.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(X===0)break t;if(U=K-X,a.offset>U){if((U=a.offset-U)>a.whave&&a.sane){_.msg="invalid distance too far back",a.mode=30;break}nt=U>a.wnext?(U-=a.wnext,a.wsize-U):a.wnext-U,U>a.length&&(U=a.length),ct=a.window}else ct=G,nt=J-a.offset,U=a.length;for(X<U&&(U=X),X-=U,a.length-=U;G[J++]=ct[nt++],--U;);a.length===0&&(a.mode=21);break;case 26:if(X===0)break t;G[J++]=a.length,X--,a.mode=21;break;case 27:if(a.wrap){for(;C<32;){if(W===0)break t;W--,A|=N[O++]<<C,C+=8}if(K-=X,_.total_out+=K,a.total+=K,K&&(_.adler=a.check=a.flags?i(a.check,G,K,J-K):t(a.check,G,K,J-K)),K=X,(a.flags?A:u(A))!==a.check){_.msg="incorrect data check",a.mode=30;break}C=A=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;C<32;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(A!==(4294967295&a.total)){_.msg="incorrect length check",a.mode=30;break}C=A=0}a.mode=29;case 29:D=1;break t;case 30:D=-3;break t;case 31:return-4;case 32:default:return c}return _.next_out=J,_.avail_out=X,_.next_in=O,_.avail_in=W,a.hold=A,a.bits=C,(a.wsize||K!==_.avail_out&&a.mode<30&&(a.mode<27||z!==4))&&H(_,_.output,_.next_out,K-_.avail_out)?(a.mode=31,-4):(q-=_.avail_in,K-=_.avail_out,_.total_in+=q,_.total_out+=K,a.total+=K,a.wrap&&K&&(_.adler=a.check=a.flags?i(a.check,G,K,_.next_out-K):t(a.check,G,K,_.next_out-K)),_.data_type=a.bits+(a.last?64:0)+(a.mode===12?128:0)+(a.mode===20||a.mode===15?256:0),(q==0&&K===0||z===4)&&D===y&&(D=-5),D)},e.inflateEnd=function(_){if(!_||!_.state)return c;var z=_.state;return z.window&&(z.window=null),_.state=null,y},e.inflateGetHeader=function(_,z){var a;return _&&_.state&&2&(a=_.state).wrap?((a.head=z).done=!1,y):c},e.inflateSetDictionary=function(_,z){var a,N=z.length;return _&&_.state?(a=_.state).wrap!==0&&a.mode!==11?c:a.mode===11&&t(1,z,N,0)!==a.check?-3:H(_,z,N,N)?(a.mode=31,-4):(a.havedict=1,y):c},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(b,o,e){"use strict";var n=b("../utils/common"),t=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(d,m,y,c,f,l,p,u){var v,S,k,E,B,P,$,F,M,H=u.bits,_=0,z=0,a=0,N=0,G=0,O=0,J=0,W=0,X=0,A=0,C=null,q=0,K=new n.Buf16(16),U=new n.Buf16(16),nt=null,ct=0;for(_=0;_<=15;_++)K[_]=0;for(z=0;z<c;z++)K[m[y+z]]++;for(G=H,N=15;1<=N&&K[N]===0;N--);if(N<G&&(G=N),N===0)return f[l++]=20971520,f[l++]=20971520,u.bits=1,0;for(a=1;a<N&&K[a]===0;a++);for(G<a&&(G=a),_=W=1;_<=15;_++)if(W<<=1,(W-=K[_])<0)return-1;if(0<W&&(d===0||N!==1))return-1;for(U[1]=0,_=1;_<15;_++)U[_+1]=U[_]+K[_];for(z=0;z<c;z++)m[y+z]!==0&&(p[U[m[y+z]]++]=z);if(P=d===0?(C=nt=p,19):d===1?(C=t,q-=257,nt=i,ct-=257,256):(C=s,nt=h,-1),_=a,B=l,J=z=A=0,k=-1,E=(X=1<<(O=G))-1,d===1&&852<X||d===2&&592<X)return 1;for(;;){for($=_-J,M=p[z]<P?(F=0,p[z]):p[z]>P?(F=nt[ct+p[z]],C[q+p[z]]):(F=96,0),v=1<<_-J,a=S=1<<O;f[B+(A>>J)+(S-=v)]=$<<24|F<<16|M|0,S!==0;);for(v=1<<_-1;A&v;)v>>=1;if(v!==0?(A&=v-1,A+=v):A=0,z++,--K[_]==0){if(_===N)break;_=m[y+p[z]]}if(G<_&&(A&E)!==k){for(J===0&&(J=G),B+=a,W=1<<(O=_-J);O+J<N&&!((W-=K[O+J])<=0);)O++,W<<=1;if(X+=1<<O,d===1&&852<X||d===2&&592<X)return 1;f[k=A&E]=G<<24|O<<16|B-l|0}}return A!==0&&(f[B+A]=_-J<<24|64<<16|0),u.bits=G,0}},{"../utils/common":41}],51:[function(b,o,e){"use strict";o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(b,o,e){"use strict";var n=b("../utils/common"),t=0,i=1;function s(g){for(var x=g.length;0<=--x;)g[x]=0}var h=0,d=29,m=256,y=m+1+d,c=30,f=19,l=2*y+1,p=15,u=16,v=7,S=256,k=16,E=17,B=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(y+2));s(H);var _=new Array(2*c);s(_);var z=new Array(512);s(z);var a=new Array(256);s(a);var N=new Array(d);s(N);var G,O,J,W=new Array(c);function X(g,x,L,R,I){this.static_tree=g,this.extra_bits=x,this.extra_base=L,this.elems=R,this.max_length=I,this.has_stree=g&&g.length}function A(g,x){this.dyn_tree=g,this.max_code=0,this.stat_desc=x}function C(g){return g<256?z[g]:z[256+(g>>>7)]}function q(g,x){g.pending_buf[g.pending++]=255&x,g.pending_buf[g.pending++]=x>>>8&255}function K(g,x,L){g.bi_valid>u-L?(g.bi_buf|=x<<g.bi_valid&65535,q(g,g.bi_buf),g.bi_buf=x>>u-g.bi_valid,g.bi_valid+=L-u):(g.bi_buf|=x<<g.bi_valid&65535,g.bi_valid+=L)}function U(g,x,L){K(g,L[2*x],L[2*x+1])}function nt(g,x){for(var L=0;L|=1&g,g>>>=1,L<<=1,0<--x;);return L>>>1}function ct(g,x,L){var R,I,Z=new Array(p+1),Y=0;for(R=1;R<=p;R++)Z[R]=Y=Y+L[R-1]<<1;for(I=0;I<=x;I++){var j=g[2*I+1];j!==0&&(g[2*I]=nt(Z[j]++,j))}}function tt(g){var x;for(x=0;x<y;x++)g.dyn_ltree[2*x]=0;for(x=0;x<c;x++)g.dyn_dtree[2*x]=0;for(x=0;x<f;x++)g.bl_tree[2*x]=0;g.dyn_ltree[2*S]=1,g.opt_len=g.static_len=0,g.last_lit=g.matches=0}function it(g){8<g.bi_valid?q(g,g.bi_buf):0<g.bi_valid&&(g.pending_buf[g.pending++]=g.bi_buf),g.bi_buf=0,g.bi_valid=0}function ot(g,x,L,R){var I=2*x,Z=2*L;return g[I]<g[Z]||g[I]===g[Z]&&R[x]<=R[L]}function st(g,x,L){for(var R=g.heap[L],I=L<<1;I<=g.heap_len&&(I<g.heap_len&&ot(x,g.heap[I+1],g.heap[I],g.depth)&&I++,!ot(x,R,g.heap[I],g.depth));)g.heap[L]=g.heap[I],L=I,I<<=1;g.heap[L]=R}function mt(g,x,L){var R,I,Z,Y,j=0;if(g.last_lit!==0)for(;R=g.pending_buf[g.d_buf+2*j]<<8|g.pending_buf[g.d_buf+2*j+1],I=g.pending_buf[g.l_buf+j],j++,R===0?U(g,I,x):(U(g,(Z=a[I])+m+1,x),(Y=P[Z])!==0&&K(g,I-=N[Z],Y),U(g,Z=C(--R),L),(Y=$[Z])!==0&&K(g,R-=W[Z],Y)),j<g.last_lit;);U(g,S,x)}function ft(g,x){var L,R,I,Z=x.dyn_tree,Y=x.stat_desc.static_tree,j=x.stat_desc.has_stree,V=x.stat_desc.elems,rt=-1;for(g.heap_len=0,g.heap_max=l,L=0;L<V;L++)Z[2*L]!==0?(g.heap[++g.heap_len]=rt=L,g.depth[L]=0):Z[2*L+1]=0;for(;g.heap_len<2;)Z[2*(I=g.heap[++g.heap_len]=rt<2?++rt:0)]=1,g.depth[I]=0,g.opt_len--,j&&(g.static_len-=Y[2*I+1]);for(x.max_code=rt,L=g.heap_len>>1;1<=L;L--)st(g,Z,L);for(I=V;L=g.heap[1],g.heap[1]=g.heap[g.heap_len--],st(g,Z,1),R=g.heap[1],g.heap[--g.heap_max]=L,g.heap[--g.heap_max]=R,Z[2*I]=Z[2*L]+Z[2*R],g.depth[I]=(g.depth[L]>=g.depth[R]?g.depth[L]:g.depth[R])+1,Z[2*L+1]=Z[2*R+1]=I,g.heap[1]=I++,st(g,Z,1),2<=g.heap_len;);g.heap[--g.heap_max]=g.heap[1],function(et,dt){var At,vt,Pt,at,Bt,Ht,wt=dt.dyn_tree,Xt=dt.max_code,ne=dt.stat_desc.static_tree,se=dt.stat_desc.has_stree,ae=dt.stat_desc.extra_bits,Jt=dt.stat_desc.extra_base,Tt=dt.stat_desc.max_length,Dt=0;for(at=0;at<=p;at++)et.bl_count[at]=0;for(wt[2*et.heap[et.heap_max]+1]=0,At=et.heap_max+1;At<l;At++)Tt<(at=wt[2*wt[2*(vt=et.heap[At])+1]+1]+1)&&(at=Tt,Dt++),wt[2*vt+1]=at,Xt<vt||(et.bl_count[at]++,Bt=0,Jt<=vt&&(Bt=ae[vt-Jt]),Ht=wt[2*vt],et.opt_len+=Ht*(at+Bt),se&&(et.static_len+=Ht*(ne[2*vt+1]+Bt)));if(Dt!==0){do{for(at=Tt-1;et.bl_count[at]===0;)at--;et.bl_count[at]--,et.bl_count[at+1]+=2,et.bl_count[Tt]--,Dt-=2}while(0<Dt);for(at=Tt;at!==0;at--)for(vt=et.bl_count[at];vt!==0;)Xt<(Pt=et.heap[--At])||(wt[2*Pt+1]!==at&&(et.opt_len+=(at-wt[2*Pt+1])*wt[2*Pt],wt[2*Pt+1]=at),vt--)}}(g,x),ct(Z,rt,g.bl_count)}function r(g,x,L){var R,I,Z=-1,Y=x[1],j=0,V=7,rt=4;for(Y===0&&(V=138,rt=3),x[2*(L+1)+1]=65535,R=0;R<=L;R++)I=Y,Y=x[2*(R+1)+1],++j<V&&I===Y||(j<rt?g.bl_tree[2*I]+=j:I!==0?(I!==Z&&g.bl_tree[2*I]++,g.bl_tree[2*k]++):j<=10?g.bl_tree[2*E]++:g.bl_tree[2*B]++,Z=I,rt=(j=0)===Y?(V=138,3):I===Y?(V=6,3):(V=7,4))}function D(g,x,L){var R,I,Z=-1,Y=x[1],j=0,V=7,rt=4;for(Y===0&&(V=138,rt=3),R=0;R<=L;R++)if(I=Y,Y=x[2*(R+1)+1],!(++j<V&&I===Y)){if(j<rt)for(;U(g,I,g.bl_tree),--j!=0;);else I!==0?(I!==Z&&(U(g,I,g.bl_tree),j--),U(g,k,g.bl_tree),K(g,j-3,2)):j<=10?(U(g,E,g.bl_tree),K(g,j-3,3)):(U(g,B,g.bl_tree),K(g,j-11,7));Z=I,rt=(j=0)===Y?(V=138,3):I===Y?(V=6,3):(V=7,4)}}s(W);var T=!1;function w(g,x,L,R){K(g,(h<<1)+(R?1:0),3),function(I,Z,Y,j){it(I),j&&(q(I,Y),q(I,~Y)),n.arraySet(I.pending_buf,I.window,Z,Y,I.pending),I.pending+=Y}(g,x,L,!0)}e._tr_init=function(g){T||(function(){var x,L,R,I,Z,Y=new Array(p+1);for(I=R=0;I<d-1;I++)for(N[I]=R,x=0;x<1<<P[I];x++)a[R++]=I;for(a[R-1]=I,I=Z=0;I<16;I++)for(W[I]=Z,x=0;x<1<<$[I];x++)z[Z++]=I;for(Z>>=7;I<c;I++)for(W[I]=Z<<7,x=0;x<1<<$[I]-7;x++)z[256+Z++]=I;for(L=0;L<=p;L++)Y[L]=0;for(x=0;x<=143;)H[2*x+1]=8,x++,Y[8]++;for(;x<=255;)H[2*x+1]=9,x++,Y[9]++;for(;x<=279;)H[2*x+1]=7,x++,Y[7]++;for(;x<=287;)H[2*x+1]=8,x++,Y[8]++;for(ct(H,y+1,Y),x=0;x<c;x++)_[2*x+1]=5,_[2*x]=nt(x,5);G=new X(H,P,m+1,y,p),O=new X(_,$,0,c,p),J=new X(new Array(0),F,0,f,v)}(),T=!0),g.l_desc=new A(g.dyn_ltree,G),g.d_desc=new A(g.dyn_dtree,O),g.bl_desc=new A(g.bl_tree,J),g.bi_buf=0,g.bi_valid=0,tt(g)},e._tr_stored_block=w,e._tr_flush_block=function(g,x,L,R){var I,Z,Y=0;0<g.level?(g.strm.data_type===2&&(g.strm.data_type=function(j){var V,rt=4093624447;for(V=0;V<=31;V++,rt>>>=1)if(1&rt&&j.dyn_ltree[2*V]!==0)return t;if(j.dyn_ltree[18]!==0||j.dyn_ltree[20]!==0||j.dyn_ltree[26]!==0)return i;for(V=32;V<m;V++)if(j.dyn_ltree[2*V]!==0)return i;return t}(g)),ft(g,g.l_desc),ft(g,g.d_desc),Y=function(j){var V;for(r(j,j.dyn_ltree,j.l_desc.max_code),r(j,j.dyn_dtree,j.d_desc.max_code),ft(j,j.bl_desc),V=f-1;3<=V&&j.bl_tree[2*M[V]+1]===0;V--);return j.opt_len+=3*(V+1)+5+5+4,V}(g),I=g.opt_len+3+7>>>3,(Z=g.static_len+3+7>>>3)<=I&&(I=Z)):I=Z=L+5,L+4<=I&&x!==-1?w(g,x,L,R):g.strategy===4||Z===I?(K(g,2+(R?1:0),3),mt(g,H,_)):(K(g,4+(R?1:0),3),function(j,V,rt,et){var dt;for(K(j,V-257,5),K(j,rt-1,5),K(j,et-4,4),dt=0;dt<et;dt++)K(j,j.bl_tree[2*M[dt]+1],3);D(j,j.dyn_ltree,V-1),D(j,j.dyn_dtree,rt-1)}(g,g.l_desc.max_code+1,g.d_desc.max_code+1,Y+1),mt(g,g.dyn_ltree,g.dyn_dtree)),tt(g),R&&it(g)},e._tr_tally=function(g,x,L){return g.pending_buf[g.d_buf+2*g.last_lit]=x>>>8&255,g.pending_buf[g.d_buf+2*g.last_lit+1]=255&x,g.pending_buf[g.l_buf+g.last_lit]=255&L,g.last_lit++,x===0?g.dyn_ltree[2*L]++:(g.matches++,x--,g.dyn_ltree[2*(a[L]+m+1)]++,g.dyn_dtree[2*C(x)]++),g.last_lit===g.lit_bufsize-1},e._tr_align=function(g){K(g,2,3),U(g,S,H),function(x){x.bi_valid===16?(q(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(g)}},{"../utils/common":41}],53:[function(b,o,e){"use strict";o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(b,o,e){(function(n){(function(t,i){"use strict";if(!t.setImmediate){var s,h,d,m,y=1,c={},f=!1,l=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,s={}.toString.call(t.process)==="[object process]"?function(k){process.nextTick(function(){v(k)})}:function(){if(t.postMessage&&!t.importScripts){var k=!0,E=t.onmessage;return t.onmessage=function(){k=!1},t.postMessage("","*"),t.onmessage=E,k}}()?(m="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",S,!1):t.attachEvent("onmessage",S),function(k){t.postMessage(m+k,"*")}):t.MessageChannel?((d=new MessageChannel).port1.onmessage=function(k){v(k.data)},function(k){d.port2.postMessage(k)}):l&&"onreadystatechange"in l.createElement("script")?(h=l.documentElement,function(k){var E=l.createElement("script");E.onreadystatechange=function(){v(k),E.onreadystatechange=null,h.removeChild(E),E=null},h.appendChild(E)}):function(k){setTimeout(v,0,k)},p.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var E=new Array(arguments.length-1),B=0;B<E.length;B++)E[B]=arguments[B+1];var P={callback:k,args:E};return c[y]=P,s(y),y++},p.clearImmediate=u}function u(k){delete c[k]}function v(k){if(f)setTimeout(v,0,k);else{var E=c[k];if(E){f=!0;try{(function(B){var P=B.callback,$=B.args;switch($.length){case 0:P();break;case 1:P($[0]);break;case 2:P($[0],$[1]);break;case 3:P($[0],$[1],$[2]);break;default:P.apply(i,$)}})(E)}finally{u(k),f=!1}}}}function S(k){k.source===t&&typeof k.data=="string"&&k.data.indexOf(m)===0&&v(+k.data.slice(m.length))}})(typeof self=="undefined"?n===void 0?this:n:self)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})});var ve={};pe(ve,{default:()=>Yt});module.exports=fe(ve);var ht=require("obsidian");var lt={watchedFolderPath:"",notesFolderPath:"KrispNotes/Notes",attachmentsFolderPath:"KrispNotes/Attachments",noteNameTemplate:"{{YYYY}}-{{MM}}-{{DD}}_{{HHMM}}_{{meetingTitle}}",attachmentNameTemplate:"{{YYYY}}-{{MM}}-{{DD}}_{{meetingTitle}}_audio",noteContentTemplate:`---
title: {{meetingTitle}}
date: {{date}}
time: {{time}}
type: meeting
source: krisp
tags:
{{yamlTags}}
  - meeting
  - krisp
audio: "{{audioPathForYaml}}"
participants: [{{participants}}]
duration: {{duration}}
meeting_stats:
  participants_count: {{participantsCount}}
  transcript_length: {{transcriptWords}}
  most_active_speaker: "{{mostActiveSpeaker}}"
---

# \u{1F399}\uFE0F {{meetingTitle}}

> [!info]+ \u{1F4CB} \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0432\u0441\u0442\u0440\u0435\u0447\u0435
>
> **\u{1F4C5} \u0414\u0430\u0442\u0430:** {{date}}
> **\u23F0 \u0412\u0440\u0435\u043C\u044F:** {{time}}
> **\u23F1\uFE0F \u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C:** {{duration}}
> **\u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438:** {{participantsCount}} \u0447\u0435\u043B\u043E\u0432\u0435\u043A
> **\u{1F4CA} \u0421\u043B\u043E\u0432 \u0432 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442\u0435:** {{transcriptWords}}
> **\u{1F5E3}\uFE0F \u0421\u0430\u043C\u044B\u0439 \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439:** {{mostActiveSpeaker}}

---

## \u{1F3A7} \u0410\u0443\u0434\u0438\u043E\u0437\u0430\u043F\u0438\u0441\u044C

![[{{audioPathForYaml}}]]

*\u0414\u043B\u044F \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u044B\u0439 \u043F\u043B\u0435\u0435\u0440 Obsidian \u0438\u043B\u0438 \u043E\u0442\u043A\u0440\u043E\u0439\u0442\u0435 \u0444\u0430\u0439\u043B: [[{{audioPathForYaml}}]]*

---

## \u{1F4DD} \u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435

> [!note]+ \u{1F4A1} \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B \u0432\u0441\u0442\u0440\u0435\u0447\u0438
>
> {{summary}}

---

## \u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438 \u0432\u0441\u0442\u0440\u0435\u0447\u0438

{{participantsList}}

### \u{1F4C8} \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438

{{participantsStats}}

---

## \u2705 \u0417\u0430\u0434\u0430\u0447\u0438 \u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F

> [!todo]+ \u{1F4CB} Action Items
>
> {{actionItemsList}}

---

## \u{1F511} \u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B

> [!important]+ \u2B50 Key Points
>
> {{keyPointsList}}

---

## \u{1F3F7}\uFE0F \u0418\u0437\u0432\u043B\u0435\u0447\u0435\u043D\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F

{{extractedEntities}}

---

## \u{1F4CB} \u041F\u043E\u043B\u043D\u0430\u044F \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0446\u0438\u044F

> [!quote]- \u{1F399}\uFE0F \u0422\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u0432\u0441\u0442\u0440\u0435\u0447\u0438 ({{transcriptWords}} \u0441\u043B\u043E\u0432)
>
> {{formattedTranscript}}

---

## \u{1F517} \u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B

- \u{1F4C4} **\u0417\u0430\u043C\u0435\u0442\u043A\u0430:** [[{{noteFileName}}]]
- \u{1F3B5} **\u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B:** [[{{audioPathForYaml}}]]

{{relatedLinks}}

---

## \u{1F4CA} \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0432\u0441\u0442\u0440\u0435\u0447\u0438

| \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440 | \u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 |
|----------|----------|
| \u{1F4C5} \u0414\u0430\u0442\u0430 | {{date}} |
| \u23F0 \u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430 | {{time}} |
| \u23F1\uFE0F \u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C | {{duration}} |
| \u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432 | {{participantsCount}} |
| \u{1F4DD} \u0421\u043B\u043E\u0432 \u0432 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442\u0435 | {{transcriptWords}} |
| \u{1F5E3}\uFE0F \u0421\u0430\u043C\u044B\u0439 \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 | {{mostActiveSpeaker}} |

---

> [!tip]+ \u{1F916} \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0438\u043C\u043F\u043E\u0440\u0442\u0435
>
> **\u0421\u043E\u0437\u0434\u0430\u043D\u043E:** Krisp Notes Importer
> **\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043E:** {{importDate}}
> **\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A:** Krisp Meeting Archive
`,duplicateStrategy:"rename",deleteZipAfterImport:!1,openNoteAfterImport:!0,autoScanEnabled:!1,language:"en"};var Ot=class{constructor(o){this.plugin=o}async loadSettings(){this.settings=Object.assign({},lt,await this.plugin.loadData())}async saveSettings(){await this.plugin.saveData(this.settings)}getSetting(o){return this.settings?this.settings[o]:lt[o]}getAllSettings(){return this.settings||lt}async updateSetting(o,e){this.settings||await this.loadSettings(),this.settings[o]=e,await this.saveSettings()}validateSettings(){let o=[];return(!this.settings.watchedFolderPath||this.settings.watchedFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.notesFolderPath||this.settings.notesFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435 \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.attachmentsFolderPath||this.settings.attachmentsFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435 \u0432\u043B\u043E\u0436\u0435\u043D\u0438\u0439 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.noteNameTemplate||this.settings.noteNameTemplate.trim()==="")&&o.push("\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.attachmentNameTemplate||this.settings.attachmentNameTemplate.trim()==="")&&o.push("\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u0430 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),["skip","overwrite","rename"].includes(this.settings.duplicateStrategy)||o.push(`\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u0430\u044F \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432: ${this.settings.duplicateStrategy}`),["en","ru"].includes(this.settings.language)||o.push(`\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 \u044F\u0437\u044B\u043A: ${this.settings.language}`),{isValid:o.length===0,errors:o}}getValidatedSettings(){let o=this.validateSettings();return o.isValid?this.settings:(console.warn("[Krisp Importer] \u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442 \u043E\u0448\u0438\u0431\u043A\u0438:",o.errors),this.getSettingsWithDefaults())}getSettingsWithDefaults(){var o,e,n,t,i;return{...lt,...this.settings,watchedFolderPath:((o=this.settings.watchedFolderPath)==null?void 0:o.trim())||lt.watchedFolderPath,notesFolderPath:((e=this.settings.notesFolderPath)==null?void 0:e.trim())||lt.notesFolderPath,attachmentsFolderPath:((n=this.settings.attachmentsFolderPath)==null?void 0:n.trim())||lt.attachmentsFolderPath,noteNameTemplate:((t=this.settings.noteNameTemplate)==null?void 0:t.trim())||lt.noteNameTemplate,attachmentNameTemplate:((i=this.settings.attachmentNameTemplate)==null?void 0:i.trim())||lt.attachmentNameTemplate,duplicateStrategy:["skip","overwrite","rename"].includes(this.settings.duplicateStrategy)?this.settings.duplicateStrategy:lt.duplicateStrategy,language:["en","ru"].includes(this.settings.language)?this.settings.language:lt.language}}};var Q=require("obsidian");var ge={settings:{title:"Krisp Notes Importer Settings",sections:{basic:"\u{1F527} Basic Settings",storage:"\u{1F4BE} Obsidian Storage",templates:"\u{1F4DD} Templates & Naming",duplicates:"\u{1F504} Duplicate Handling",postImport:"\u26A1 Post-Import Actions",advanced:"\u{1F6E0}\uFE0F Advanced & Maintenance"},fields:{watchedFolder:{name:"Watched Folder Path",desc:"Full path to the folder where Krisp saves ZIP archives"},autoScan:{name:"Enable Auto-Watching",desc:"Automatically monitor the folder for new ZIP files"},notesFolder:{name:"Notes Folder",desc:"Folder in your Obsidian vault for saving meeting notes"},attachmentsFolder:{name:"Attachments Folder",desc:"Folder in your Obsidian vault for saving audio files"},noteNameTemplate:{name:"Note Name Template",desc:"Template for naming note files. Available variables: {{YYYY}}, {{MM}}, {{DD}}, {{HHMM}}, {{meetingTitle}}"},attachmentNameTemplate:{name:"Audio Name Template",desc:"Template for naming audio files. Same variables available"},noteContentTemplate:{name:"Note Content Template",desc:"Template for note content. Available variables: {{title}}, {{date}}, {{time}}, {{participants}}, {{summary}}, {{actionItems}}, {{keyPoints}}, {{transcript}}, {{audioLink}}"},duplicateStrategy:{name:"Duplicate Strategy",desc:"What to do when a meeting with the same name already exists",options:{skip:"Skip import",overwrite:"Overwrite existing",rename:"Create with suffix"}},deleteZipAfterImport:{name:"Delete ZIP after import",desc:"Automatically delete the ZIP file after successful import"},openNoteAfterImport:{name:"Open note after import",desc:"Automatically open the created note in Obsidian"},language:{name:"Interface Language",desc:"Choose the language for the plugin interface"}},buttons:{testImport:"Test Import",massImport:"Import All Files",resetSettings:"Reset Settings",showLogs:"Show Logs",restoreTemplate:"Restore Default Template"},info:{title:"Plugin Status",version:"Version",status:"Current Status",features:["\u2705 Manual ZIP import","\u2705 Automatic folder watching","\u2705 Beautiful note formatting","\u2705 Advanced analytics","\u2705 Full UI settings","\u2705 Logging system"],commands:["Import ZIP file manually","Start/Stop auto-watching","Scan existing files","Check watching status","Debug settings"]}},commands:{importZip:"Import ZIP file manually",startWatching:"Start auto-watching folder",stopWatching:"Stop auto-watching",scanExisting:"Scan existing files in folder",checkStatus:"Check watching status",debugSettings:"Debug current settings"},notifications:{success:{imported:"Meeting '{{title}}' imported successfully!",watchingStarted:"Auto-watching started for: {{path}}",watchingStopped:"Auto-watching stopped",settingsReset:"Settings reset to defaults"},error:{invalidZip:"Invalid ZIP file: {{file}}",missingFiles:"Required files not found in: {{file}}",createNote:"Failed to create note for: {{title}}",copyAudio:"Failed to copy audio file for: {{title}}",watchingFailed:"Failed to start watching: {{error}}"},warning:{duplicateSkipped:"Meeting '{{title}}' already exists - skipped",duplicateRenamed:"Meeting '{{title}}' already exists - created as '{{newTitle}}'",duplicateOverwritten:"Meeting '{{title}}' already exists - overwritten"},info:{processing:"Processing: {{file}}",scanningFolder:"Scanning folder for ZIP files..."}},statusBar:{idle:"Idle",watching:"Watching: {{path}}",processing:"Processing...",error:"Error: {{message}}"},modals:{testImport:{title:"Test Import ZIP File",placeholder:"Enter full path to ZIP file...",button:"Test Import"},confirmReset:{title:"Reset Settings",message:"Are you sure you want to reset all settings to defaults? This action cannot be undone.",confirm:"Reset",cancel:"Cancel"},logs:{title:"Plugin Logs",export:"Export",clear:"Clear",close:"Close"}}},me={settings:{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Krisp Notes Importer",sections:{basic:"\u{1F527} \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",storage:"\u{1F4BE} \u0425\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0432 Obsidian",templates:"\u{1F4DD} \u0428\u0430\u0431\u043B\u043E\u043D\u044B \u0438 \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",duplicates:"\u{1F504} \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432",postImport:"\u26A1 \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",advanced:"\u{1F6E0}\uFE0F \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0438 \u043E\u0431\u0441\u043B\u0443\u0436\u0438\u0432\u0430\u043D\u0438\u0435"},fields:{watchedFolder:{name:"\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u0430\u044F \u043F\u0430\u043F\u043A\u0430",desc:"\u041F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435, \u0433\u0434\u0435 Krisp \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u0442 ZIP-\u0430\u0440\u0445\u0438\u0432\u044B"},autoScan:{name:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0443 \u043D\u0430 \u043F\u0440\u0435\u0434\u043C\u0435\u0442 \u043D\u043E\u0432\u044B\u0445 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432"},notesFolder:{name:"\u041F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A",desc:"\u041F\u0430\u043F\u043A\u0430 \u0432 \u0432\u0430\u0448\u0435\u043C \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 Obsidian \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u0432\u0441\u0442\u0440\u0435\u0447"},attachmentsFolder:{name:"\u041F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u0432\u043B\u043E\u0436\u0435\u043D\u0438\u0439",desc:"\u041F\u0430\u043F\u043A\u0430 \u0432 \u0432\u0430\u0448\u0435\u043C \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 Obsidian \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432"},noteNameTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432 \u0437\u0430\u043C\u0435\u0442\u043E\u043A. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{YYYY}}, {{MM}}, {{DD}}, {{HHMM}}, {{meetingTitle}}"},attachmentNameTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0430\u0443\u0434\u0438\u043E",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0442\u0435 \u0436\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435"},noteContentTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{title}}, {{date}}, {{time}}, {{participants}}, {{summary}}, {{actionItems}}, {{keyPoints}}, {{transcript}}, {{audioLink}}"},duplicateStrategy:{name:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432",desc:"\u0427\u0442\u043E \u0434\u0435\u043B\u0430\u0442\u044C, \u043A\u043E\u0433\u0434\u0430 \u0432\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0442\u0430\u043A\u0438\u043C \u0436\u0435 \u0438\u043C\u0435\u043D\u0435\u043C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",options:{skip:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0438\u043C\u043F\u043E\u0440\u0442",overwrite:"\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0443\u044E",rename:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441 \u0441\u0443\u0444\u0444\u0438\u043A\u0441\u043E\u043C"}},deleteZipAfterImport:{name:"\u0423\u0434\u0430\u043B\u044F\u0442\u044C ZIP \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0443\u0434\u0430\u043B\u044F\u0442\u044C ZIP-\u0444\u0430\u0439\u043B \u043F\u043E\u0441\u043B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430"},openNoteAfterImport:{name:"\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0432 Obsidian"},language:{name:"\u042F\u0437\u044B\u043A \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430",desc:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u044F\u0437\u044B\u043A \u0434\u043B\u044F \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043F\u043B\u0430\u0433\u0438\u043D\u0430"}},buttons:{testImport:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442",massImport:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435 \u0444\u0430\u0439\u043B\u044B",resetSettings:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",showLogs:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043B\u043E\u0433\u0438",restoreTemplate:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D"},info:{title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043F\u043B\u0430\u0433\u0438\u043D\u0430",version:"\u0412\u0435\u0440\u0441\u0438\u044F",status:"\u0422\u0435\u043A\u0443\u0449\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441",features:["\u2705 \u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP","\u2705 \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438","\u2705 \u041A\u0440\u0430\u0441\u0438\u0432\u043E\u0435 \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043E\u043A","\u2705 \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u0430\u044F \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0430","\u2705 \u041F\u043E\u043B\u043D\u044B\u0439 UI \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A","\u2705 \u0421\u0438\u0441\u0442\u0435\u043C\u0430 \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F"],commands:["\u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430","\u0417\u0430\u043F\u0443\u0441\u043A/\u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0430\u0432\u0442\u043E\u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F","\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u0444\u0430\u0439\u043B\u043E\u0432","\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F","\u041E\u0442\u043B\u0430\u0434\u043A\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A"]}},commands:{importZip:"\u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430",startWatching:"\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438",stopWatching:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435",scanExisting:"\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u0444\u0430\u0439\u043B\u044B \u0432 \u043F\u0430\u043F\u043A\u0435",checkStatus:"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F",debugSettings:"\u041E\u0442\u043B\u0430\u0434\u043A\u0430 \u0442\u0435\u043A\u0443\u0449\u0438\u0445 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A"},notifications:{success:{imported:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0430!",watchingStarted:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D\u043E \u0434\u043B\u044F: {{path}}",watchingStopped:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E",settingsReset:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0431\u0440\u043E\u0448\u0435\u043D\u044B \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E"},error:{invalidZip:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ZIP-\u0444\u0430\u0439\u043B: {{file}}",missingFiles:"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u044B\u0435 \u0444\u0430\u0439\u043B\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B \u0432: {{file}}",createNote:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0434\u043B\u044F: {{title}}",copyAudio:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u0434\u043B\u044F: {{title}}",watchingFailed:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435: {{error}}"},warning:{duplicateSkipped:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u043F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u0430",duplicateRenamed:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u0441\u043E\u0437\u0434\u0430\u043D\u0430 \u043A\u0430\u043A '{{newTitle}}'",duplicateOverwritten:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u043D\u0430"},info:{processing:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430: {{file}}",scanningFolder:"\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043D\u0430 \u043F\u0440\u0435\u0434\u043C\u0435\u0442 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432..."}},statusBar:{idle:"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435",watching:"\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435: {{path}}",processing:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430...",error:"\u041E\u0448\u0438\u0431\u043A\u0430: {{message}}"},modals:{testImport:{title:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043A ZIP-\u0444\u0430\u0439\u043B\u0443...",button:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442"},confirmReset:{title:"\u0421\u0431\u0440\u043E\u0441 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",message:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E? \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.",confirm:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C",cancel:"\u041E\u0442\u043C\u0435\u043D\u0430"},logs:{title:"\u041B\u043E\u0433\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430",export:"\u042D\u043A\u0441\u043F\u043E\u0440\u0442",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",close:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"}}},Et=class{constructor(o){this.currentLanguage="en";this.strings={en:ge,ru:me};o&&(this.currentLanguage=o)}setLanguage(o){this.currentLanguage=o}getCurrentLanguage(){return this.currentLanguage}t(o,e){let n=o.split("."),t=this.strings[this.currentLanguage];for(let i of n)if(t&&typeof t=="object"&&i in t)t=t[i];else{t=this.strings.en;for(let s of n)if(t&&typeof t=="object"&&s in t)t=t[s];else return`[Missing: ${o}]`;break}if(typeof t!="string")return`[Invalid: ${o}]`;if(e)for(let[i,s]of Object.entries(e))t=t.replace(new RegExp(`{{${i}}}`,"g"),s);return t}getSettingsStrings(){return this.strings[this.currentLanguage].settings}getCommandStrings(){return this.strings[this.currentLanguage].commands}getNotificationStrings(){return this.strings[this.currentLanguage].notifications}getStatusBarStrings(){return this.strings[this.currentLanguage].statusBar}getModalStrings(){return this.strings[this.currentLanguage].modals}};var Rt=class extends Q.PluginSettingTab{constructor(e,n){super(e,n);this.plugin=n;let t=this.plugin.settingsManager.getSetting("language")||"en";this.localization=n.localizationService||new Et(t)}updateLanguage(e){this.localization.setLanguage(e),this.display()}display(){let{containerEl:e}=this;e.empty(),e.createEl("h1",{text:this.localization.t("settings.title")}),e.createEl("p",{text:this.localization.t("settings.title")+" - "+this.localization.t("settings.sections.basic")}),new Q.Setting(e).setName(this.localization.t("settings.fields.language.name")).setDesc(this.localization.t("settings.fields.language.desc")).addDropdown(h=>h.addOption("en","English").addOption("ru","\u0420\u0443\u0441\u0441\u043A\u0438\u0439").setValue(this.plugin.settingsManager.getSetting("language")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("language",d),this.updateLanguage(d)})),e.createEl("h2",{text:"\u{1F527} "+this.localization.t("settings.sections.basic")}),new Q.Setting(e).setName(this.localization.t("settings.fields.watchedFolder.name")).setDesc(this.localization.t("settings.fields.watchedFolder.desc")).addText(h=>h.setPlaceholder("/Users/username/Downloads/Krisp").setValue(this.plugin.settingsManager.getSetting("watchedFolderPath")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("watchedFolderPath",d)})),new Q.Setting(e).setName("\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435").setDesc("\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0443 \u0438 \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043D\u043E\u0432\u044B\u0435 \u0432\u0441\u0442\u0440\u0435\u0447\u0438 (\u0442\u0440\u0435\u0431\u0443\u0435\u0442 FileWatcherService)").addToggle(h=>h.setValue(this.plugin.settingsManager.getSetting("autoScanEnabled")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("autoScanEnabled",d)})),e.createEl("h2",{text:"\u{1F4BE} \u0421\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0432 Obsidian"}),new Q.Setting(e).setName("\u041F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A").setDesc("\u041F\u0443\u0442\u044C \u0432 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 Obsidian \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F Markdown-\u0437\u0430\u043C\u0435\u0442\u043E\u043A").addText(h=>h.setPlaceholder("KrispNotes/Notes").setValue(this.plugin.settingsManager.getSetting("notesFolderPath")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("notesFolderPath",d)})),new Q.Setting(e).setName("\u041F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432").setDesc("\u041F\u0443\u0442\u044C \u0432 \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 Obsidian \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E\u0437\u0430\u043F\u0438\u0441\u0435\u0439").addText(h=>h.setPlaceholder("KrispNotes/Attachments").setValue(this.plugin.settingsManager.getSetting("attachmentsFolderPath")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("attachmentsFolderPath",d)})),e.createEl("h2",{text:"\u{1F3F7}\uFE0F \u0428\u0430\u0431\u043B\u043E\u043D\u044B \u0438 \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435"}),new Q.Setting(e).setName("\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0437\u0430\u043C\u0435\u0442\u043E\u043A").setDesc("\u0424\u043E\u0440\u043C\u0430\u0442 \u0438\u043C\u0435\u043D \u0444\u0430\u0439\u043B\u043E\u0432 \u0437\u0430\u043C\u0435\u0442\u043E\u043A. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{YYYY}}, {{MM}}, {{DD}}, {{HHMM}}, {{meetingTitle}}").addText(h=>h.setPlaceholder("{{YYYY}}-{{MM}}-{{DD}}_{{HHMM}}_{{meetingTitle}}").setValue(this.plugin.settingsManager.getSetting("noteNameTemplate")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("noteNameTemplate",d)})),new Q.Setting(e).setName("\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432").setDesc("\u0424\u043E\u0440\u043C\u0430\u0442 \u0438\u043C\u0435\u043D \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432. \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0442\u0435 \u0436\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435 \u0447\u0442\u043E \u0438 \u0434\u043B\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A").addText(h=>h.setPlaceholder("{{YYYY}}-{{MM}}-{{DD}}_{{meetingTitle}}_audio").setValue(this.plugin.settingsManager.getSetting("attachmentNameTemplate")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("attachmentNameTemplate",d)})),e.createEl("h2",{text:"\u{1F504} \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432"}),new Q.Setting(e).setName("\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F \u043F\u0440\u0438 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u0430\u0445").setDesc("\u0427\u0442\u043E \u0434\u0435\u043B\u0430\u0442\u044C \u043F\u0440\u0438 \u043E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D\u0438\u0438 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0435\u0439 \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u0441 \u0442\u0430\u043A\u0438\u043C \u0436\u0435 \u0438\u043C\u0435\u043D\u0435\u043C").addDropdown(h=>h.addOption("skip","\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0438\u043C\u043F\u043E\u0440\u0442").addOption("overwrite","\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0443\u044E").addOption("rename","\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441 \u0441\u0443\u0444\u0444\u0438\u043A\u0441\u043E\u043C (\u0440\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u0442\u0441\u044F)").setValue(this.plugin.settingsManager.getSetting("duplicateStrategy")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("duplicateStrategy",d)})),e.createEl("h2",{text:"\u26A1 \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430"}),new Q.Setting(e).setName("\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443").setDesc("\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430").addToggle(h=>h.setValue(this.plugin.settingsManager.getSetting("openNoteAfterImport")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("openNoteAfterImport",d)})),new Q.Setting(e).setName("\u0423\u0434\u0430\u043B\u044F\u0442\u044C ZIP-\u0444\u0430\u0439\u043B").setDesc("\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0443\u0434\u0430\u043B\u044F\u0442\u044C \u0438\u0441\u0445\u043E\u0434\u043D\u044B\u0439 ZIP-\u0430\u0440\u0445\u0438\u0432 \u043F\u043E\u0441\u043B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430").addToggle(h=>h.setValue(this.plugin.settingsManager.getSetting("deleteZipAfterImport")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("deleteZipAfterImport",d)})),e.createEl("h2",{text:"\u{1F527} \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"}),new Q.Setting(e).setName("\u042F\u0437\u044B\u043A \u0434\u043B\u044F \u0434\u0430\u0442").setDesc("\u042F\u0437\u044B\u043A \u0434\u043B\u044F \u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u0432\u0430\u043D\u0438\u044F \u043C\u0435\u0441\u044F\u0446\u0435\u0432 \u0432 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u044F\u0445 \u0432\u0441\u0442\u0440\u0435\u0447").addDropdown(h=>h.addOption("en","English").addOption("ru","\u0420\u0443\u0441\u0441\u043A\u0438\u0439").setValue(this.plugin.settingsManager.getSetting("language")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("language",d)})),new Q.Setting(e).setName("\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A").setDesc("\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u043E\u0441\u0442\u044C \u0432\u0441\u0435\u0445 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A \u043F\u043B\u0430\u0433\u0438\u043D\u0430").addButton(h=>h.setButtonText("\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438").setClass("mod-cta").onClick(async()=>{let d=this.plugin;if(d.settingsManager.validateSettings){let m=d.settingsManager.validateSettings();m.isValid?new Q.Notice("\u2705 \u0412\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B!",5e3):(new Q.Notice(`\u274C \u041D\u0430\u0439\u0434\u0435\u043D\u044B \u043E\u0448\u0438\u0431\u043A\u0438 \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445:
${m.errors.join(`
`)}`,1e4),console.error("[Krisp Importer] \u041E\u0448\u0438\u0431\u043A\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A:",m.errors))}else new Q.Notice("\u26A0\uFE0F \u041C\u0435\u0442\u043E\u0434 \u0432\u0430\u043B\u0438\u0434\u0430\u0446\u0438\u0438 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D",3e3)})),new Q.Setting(e).setName("\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043B\u043E\u0433\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430").setDesc("\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u044C\u043D\u044B\u0435 \u043B\u043E\u0433\u0438 \u0440\u0430\u0431\u043E\u0442\u044B \u043F\u043B\u0430\u0433\u0438\u043D\u0430 \u0434\u043B\u044F \u0434\u0438\u0430\u0433\u043D\u043E\u0441\u0442\u0438\u043A\u0438 \u043F\u0440\u043E\u0431\u043B\u0435\u043C").addButton(h=>h.setButtonText("\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043B\u043E\u0433\u0438").onClick(async()=>{let d=this.plugin;d.loggingService?new class extends Q.Modal{constructor(y){super(y)}onOpen(){let{contentEl:y}=this;y.createEl("h2",{text:"\u{1F4CB} \u041B\u043E\u0433\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430 Krisp Notes Importer"});let c=d.loggingService.getLogStats(),f=y.createEl("div");f.style.marginBottom="15px",f.style.padding="10px",f.style.backgroundColor="var(--background-secondary)",f.style.borderRadius="5px",f.createEl("p",{text:`\u{1F4CA} \u0412\u0441\u0435\u0433\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439: ${c.total}`});let l=Object.entries(c.byLevel).map(([B,P])=>`${B}: ${P}`).join(", ");f.createEl("p",{text:`\u{1F4C8} \u041F\u043E \u0443\u0440\u043E\u0432\u043D\u044F\u043C: ${l}`});let p=y.createEl("div");p.style.display="flex",p.style.gap="10px",p.style.marginBottom="15px";let u=p.createEl("button",{text:"\u{1F4CB} \u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043B\u043E\u0433\u0438"});u.className="mod-cta",u.onclick=async()=>{await d.loggingService.copyLogsToClipboard()};let v=p.createEl("button",{text:"\u{1F5D1}\uFE0F \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043B\u043E\u0433\u0438"});v.className="mod-warning",v.onclick=()=>{d.loggingService.clearLogs(),this.close(),new Q.Notice("\u{1F5D1}\uFE0F \u041B\u043E\u0433\u0438 \u043E\u0447\u0438\u0449\u0435\u043D\u044B",3e3)};let S=p.createEl("button",{text:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"});S.onclick=()=>this.close();let k=y.createEl("div");k.style.maxHeight="400px",k.style.overflow="auto",k.style.border="1px solid var(--background-modifier-border)",k.style.borderRadius="5px",k.style.padding="10px",k.style.backgroundColor="var(--background-primary-alt)",k.style.fontFamily="monospace",k.style.fontSize="0.8em",k.style.whiteSpace="pre-wrap";let E=d.loggingService.getRecentLogs(100);if(E.length===0)k.textContent="\u041B\u043E\u0433\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442";else{let B=E.map(P=>{let $=P.timestamp.toLocaleString(),F=P.level===0?"DEBUG":P.level===1?"INFO":P.level===2?"WARN":"ERROR";return`[${$}] [${F}] [${P.category}] ${P.message}`}).join(`
`);k.textContent=B}}onClose(){let{contentEl:y}=this;y.empty()}}(this.app).open():new Q.Notice("\u274C LoggingService \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D",5e3)})),new Q.Setting(e).setName("\u0418\u043C\u043F\u043E\u0440\u0442 \u0432\u0441\u0435\u0445 \u0444\u0430\u0439\u043B\u043E\u0432").setDesc("\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0432\u0441\u0435 ZIP-\u0444\u0430\u0439\u043B\u044B \u0432 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043F\u0440\u044F\u043C\u043E \u0441\u0435\u0439\u0447\u0430\u0441").addButton(h=>h.setButtonText("\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435").setClass("mod-warning").onClick(async()=>{let d=this.plugin;if(!d.settingsManager.getSetting("watchedFolderPath")){new Q.Notice("\u274C \u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u0430\u044F \u043F\u0430\u043F\u043A\u0430",5e3);return}new Q.Notice("\u{1F504} \u041D\u0430\u0447\u0438\u043D\u0430\u044E \u043C\u0430\u0441\u0441\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442...",3e3);try{d.fileWatcher&&d.fileWatcher.scanExistingFiles?(await d.fileWatcher.scanExistingFiles(),new Q.Notice("\u2705 \u041C\u0430\u0441\u0441\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D!",5e3)):new Q.Notice("\u274C FileWatcherService \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D",5e3)}catch(y){console.error("[Krisp Importer] \u041E\u0448\u0438\u0431\u043A\u0430 \u043C\u0430\u0441\u0441\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430:",y),new Q.Notice(`\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u043C\u0430\u0441\u0441\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430: ${y.message}`,8e3)}})),new Q.Setting(e).setName("\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442").setDesc("\u0412\u044B\u0431\u0440\u0430\u0442\u044C ZIP-\u0444\u0430\u0439\u043B \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0441 \u0442\u0435\u043A\u0443\u0449\u0438\u043C\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u043C\u0438").addButton(h=>h.setButtonText("\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442").onClick(async()=>{let d=this.plugin;new class extends Q.Modal{constructor(c){super(c);this.result=""}onOpen(){let{contentEl:c}=this;c.createEl("h2",{text:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430"}),c.createEl("p",{text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043A ZIP-\u0444\u0430\u0439\u043B\u0443 Krisp \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430:"});let f=c.createEl("input",{type:"text",placeholder:"/path/to/meeting.zip"});f.style.width="100%",f.style.marginBottom="10px";let l=c.createEl("div");l.style.display="flex",l.style.gap="10px",l.style.justifyContent="flex-end";let p=l.createEl("button",{text:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"});p.className="mod-cta",p.onclick=async()=>{let v=f.value.trim();if(v){this.result=v,this.close();let S=d;if(S&&S.processingService)try{new Q.Notice("\u{1F9EA} \u0412\u044B\u043F\u043E\u043B\u043D\u044F\u044E \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442...",3e3),await S.processingService.processZipFile(v),new Q.Notice("\u2705 \u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E!",5e3)}catch(k){console.error("[Krisp Importer] \u041E\u0448\u0438\u0431\u043A\u0430 \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430:",k),new Q.Notice(`\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430: ${k.message}`,8e3)}else new Q.Notice("\u274C ProcessingService \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D",5e3)}};let u=l.createEl("button",{text:"\u041E\u0442\u043C\u0435\u043D\u0430"});u.onclick=()=>this.close(),f.focus(),f.addEventListener("keypress",v=>{v.key==="Enter"&&p.click()})}onClose(){let{contentEl:c}=this;c.empty()}}(this.app).open()})),e.createEl("h2",{text:"\u{1F4DD} \u0428\u0430\u0431\u043B\u043E\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438"});let n=e.createEl("p",{text:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0435\u043C\u044B\u0445 \u0437\u0430\u043C\u0435\u0442\u043E\u043A. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{meetingTitle}}, {{date}}, {{time}}, {{participants}}, {{summary}}, {{actionItems}}, {{keyPoints}}, {{formattedTranscript}}, {{audioPathForYaml}} \u0438 \u0434\u0440\u0443\u0433\u0438\u0435."});n.style.fontSize="0.9em",n.style.color="var(--text-muted)",new Q.Setting(e).setName("\u0428\u0430\u0431\u043B\u043E\u043D \u0437\u0430\u043C\u0435\u0442\u043A\u0438").setDesc("").addTextArea(h=>(h.inputEl.rows=10,h.inputEl.style.width="100%",h.inputEl.style.fontFamily="monospace",h.inputEl.style.fontSize="0.85em",h.setPlaceholder("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D \u0437\u0430\u043C\u0435\u0442\u043A\u0438...").setValue(this.plugin.settingsManager.getSetting("noteContentTemplate")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",d)}))),new Q.Setting(e).setName("\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E").setDesc("\u0412\u0435\u0440\u043D\u0443\u0442\u044C \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D \u0437\u0430\u043C\u0435\u0442\u043A\u0438").addButton(h=>h.setButtonText("\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C").setCta().onClick(async()=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",lt.noteContentTemplate),this.display()})),e.createEl("h2",{text:"\u{1F527} \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u043C\u0438"}),new Q.Setting(e).setName("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438").setDesc("\u0412\u0435\u0440\u043D\u0443\u0442\u044C \u0432\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430 \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E").addButton(h=>h.setButtonText("\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438").setClass("mod-warning").onClick(async()=>{let d=this.plugin;new class extends Q.Modal{constructor(y){super(y)}onOpen(){let{contentEl:y}=this;y.createEl("h2",{text:"\u26A0\uFE0F \u041F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435 \u0441\u0431\u0440\u043E\u0441\u0430"}),y.createEl("p",{text:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E? \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C."});let c=y.createEl("div");c.style.display="flex",c.style.gap="10px",c.style.justifyContent="flex-end",c.style.marginTop="20px";let f=c.createEl("button",{text:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C"});f.className="mod-warning",f.onclick=async()=>{this.close();let p=d;if(p&&p.settingsManager)try{for(let[v,S]of Object.entries(lt))await p.settingsManager.updateSetting(v,S);new Q.Notice("\u2705 \u0412\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0431\u0440\u043E\u0448\u0435\u043D\u044B \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",5e3);let u=p.settingsTab;u&&u.display&&u.display()}catch(u){console.error("[Krisp Importer] \u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0431\u0440\u043E\u0441\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A:",u),new Q.Notice(`\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0431\u0440\u043E\u0441\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A: ${u.message}`,8e3)}else new Q.Notice("\u274C \u041F\u043B\u0430\u0433\u0438\u043D \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D \u0434\u043B\u044F \u0441\u0431\u0440\u043E\u0441\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",5e3)};let l=c.createEl("button",{text:"\u041E\u0442\u043C\u0435\u043D\u0430"});l.onclick=()=>this.close()}onClose(){let{contentEl:y}=this;y.empty()}}(this.app).open()})),e.createEl("h2",{text:"\u2139\uFE0F \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u043F\u043B\u0430\u0433\u0438\u043D\u0435"});let t=e.createEl("div");t.createEl("p",{text:"\u{1F3AF} \u0422\u0435\u043A\u0443\u0449\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441: v3.0.1 - \u041F\u043E\u043B\u043D\u0430\u044F \u0444\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u043E\u0441\u0442\u044C"}),t.createEl("p",{text:"\u2705 \u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442: \u041F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"}),t.createEl("p",{text:"\u2705 \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435: \u0420\u0435\u0430\u043B\u0438\u0437\u043E\u0432\u0430\u043D\u043E"}),t.createEl("p",{text:"\u2705 \u0412\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438: \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0447\u0435\u0440\u0435\u0437 UI"}),t.createEl("p",{text:"\u2705 \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u0430\u044F \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0430: \u0412\u043A\u043B\u044E\u0447\u0435\u043D\u0430"});let i=e.createEl("div");i.style.padding="15px",i.style.backgroundColor="var(--background-secondary)",i.style.borderRadius="8px",i.style.marginTop="15px",i.style.border="1px solid var(--background-modifier-border)",i.createEl("h4",{text:"\u{1F680} \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B:"}),i.createEl("p",{text:'\u2022 "Import ZIP file manually" - \u0440\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 \u0444\u0430\u0439\u043B\u0430'}),i.createEl("p",{text:'\u2022 "Start auto-watching folder" - \u0437\u0430\u043F\u0443\u0441\u043A \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F'}),i.createEl("p",{text:'\u2022 "Stop auto-watching" - \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F'}),i.createEl("p",{text:'\u2022 "Scan existing files in folder" - \u043C\u0430\u0441\u0441\u043E\u0432\u043E\u0435 \u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435'});let s=e.createEl("div");s.style.padding="10px",s.style.backgroundColor="var(--background-primary-alt)",s.style.borderRadius="5px",s.style.marginTop="10px",s.style.borderLeft="4px solid var(--interactive-accent)",s.createEl("p",{text:"\u{1F4A1} \u0421\u043E\u0432\u0435\u0442: \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043F\u0430\u043B\u0438\u0442\u0440\u0443 \u043A\u043E\u043C\u0430\u043D\u0434 (Ctrl/Cmd + P) \u0434\u043B\u044F \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A\u043E \u0432\u0441\u0435\u043C \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C \u043F\u043B\u0430\u0433\u0438\u043D\u0430"})}};var yt=require("obsidian");var ie=xt(ee()),ut=require("fs"),Ft=require("obsidian"),It=xt(require("path")),$t=class{constructor(o){this.app=o}async extract(o,e){try{let n=await ut.promises.readFile(o),t=await ie.loadAsync(n),s=require("os").tmpdir(),h=It.join(s,"krisp-importer-temp",e+"_"+Date.now());if(!(0,ut.existsSync)(h)){let d=It.join(s,"krisp-importer-temp");(0,ut.existsSync)(d)||(0,ut.mkdirSync)(d,{recursive:!0}),(0,ut.mkdirSync)(h,{recursive:!0})}for(let d in t.files)if(!t.files[d].dir){let m=await t.files[d].async("nodebuffer"),y=(0,Ft.normalizePath)(It.join(h,d)),c=It.dirname(y);(0,ut.existsSync)(c)||(0,ut.mkdirSync)(c,{recursive:!0}),await ut.promises.writeFile(y,m)}return console.log(`Successfully extracted to ${h}`),h}catch(n){return new Ft.Notice("Error extracting ZIP file: "+n.message),console.error("Error extracting ZIP file:",n),null}}async cleanup(o){if(o)try{(0,ut.existsSync)(o)&&((0,ut.rmSync)(o,{recursive:!0,force:!0}),console.log(`Successfully cleaned up temp directory: ${o}`))}catch(e){new Ft.Notice("Error cleaning up temporary directory: "+e.message),console.error("Error cleaning up temporary directory:",e)}}};var Mt=class{constructor(){}parseMeetingNotes(o,e,n){var y;let t={},i=n;i=i.replace(/\s*\([0-9a-fA-F]{8}-(?:[0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}\)$/,""),i=i.replace(/-[0-9a-fA-F]{32}$/,""),i=i.replace(/\s*-\s*[A-Za-z]+(?:\s+|,\s*)[0-9]{1,2}(?:,\s*[0-9]{4})?(?:\s+[0-9]{1,2}[0-9]{2}(?:\s*(?:AM|PM))?)?$/,"").trim(),t.meetingTitle=i;let s=(y=o.split(`
`)[0])==null?void 0:y.trim(),h=null,d=null;if(s&&(h=this.extractDateFromString(s),d=this.extractTimeFromString(s)),h||(h=this.extractDateFromString(n)),!d&&(d=this.extractTimeFromString(n),d==="00:00"&&e)){let c=e.match(/(\d{2}:\d{2}(?::\d{2})?)/)}t.date=h||void 0,t.time=d||void 0,t.summary=this.extractSection(o,"Summary"),t.actionItems=this.extractSection(o,"Action Items",!0),t.keyPoints=this.extractSection(o,"Key Points",!0);let m=this.parseTranscript(e);return t.participants=m.participants,t.rawTranscript=e,t.formattedTranscript=m.formattedTranscript,t.duration=m.duration,t.participantsCount=m.participants.length,t.transcriptWords=this.countWords(e),t.mostActiveSpeaker=this.findMostActiveSpeaker(e),t.participantsStats=this.generateParticipantsStats(e,m.participants),t.extractedEntities=this.extractEntities(o,e),t.relatedLinks=this.generateRelatedLinks(o,i),t.importDate=new Date().toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),t.smartTags=this.generateSmartTags(o,e,i),t.tags=[...t.smartTags||[]],t}parseTranscript(o){let e=o.split(`
`),n=new Set,t=[],i="00:00:00",s=/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/;for(let d=0;d<e.length;d++){let y=e[d].trim();if(y==="")continue;let c=y.match(s);if(c){let f=c[1].trim(),l=c[2];f&&!f.toLowerCase().includes("transcription service")&&!f.toLowerCase().includes("meeting summary")&&n.add(f);let p=l.length===5?`${l}:00`:l;i=p;let u=[],v=d+1;for(;v<e.length;){let S=e[v].trim();if(S===""){v++;continue}if(s.test(S))break;S.toLowerCase()==="\u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u0435 \u0441\u043B\u0435\u0434\u0443\u0435\u0442..."?u.push(`_${S}_`):u.push(S),v++}if(u.length>0){let S=u.join(`
`);t.push(`[[${p}]] **${f}**: ${S}`)}else t.push(`[[${p}]] **${f}**:`);d=v-1}else y.toLowerCase()==="\u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u0435 \u0441\u043B\u0435\u0434\u0443\u0435\u0442..."?t.push(`_${y}_`):t.length>0?t[t.length-1]+=`
${y}`:t.push(y)}let h="N/A";return i!=="00:00:00"&&(h=i),{participants:Array.from(n),formattedTranscript:t.join(`

`),duration:h}}extractDateFromString(o){if(!o)return null;let e,n,t,i=o.match(/(\d{4})-(\d{2})-(\d{2})/);if(i&&(e=parseInt(i[1],10),n=parseInt(i[2],10),t=parseInt(i[3],10),n>=1&&n<=12&&t>=1&&t<=31))return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`;if(i=o.match(/([A-Za-z]+)\s+(\d{1,2}),\s+(\d{4})/),i){let s=i[1];if(t=parseInt(i[2],10),e=parseInt(i[3],10),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}if(i=o.match(/([A-Za-z]+),\s*(\d{1,2})(?!\s*,\s*\d{4})/),i){let s=i[1];if(t=parseInt(i[2],10),e=new Date().getFullYear(),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}if(i=o.match(/(\d{1,2})\s+([A-Za-z]+)\s+(\d{4})/),i){t=parseInt(i[1],10);let s=i[2];if(e=parseInt(i[3],10),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}return null}extractTimeFromString(o){if(!o)return null;let e=o.match(/(\d{2}):(\d{2})(?!\s*(?:AM|PM))/);if(e){let n=parseInt(e[1],10),t=parseInt(e[2],10);if(n>=0&&n<=23&&t>=0&&t<=59)return`${String(n).padStart(2,"0")}:${String(t).padStart(2,"0")}`}if(e=o.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i),e){let n=parseInt(e[1],10),t=parseInt(e[2],10),i=e[3].toUpperCase();if(n>=1&&n<=12&&t>=0&&t<=59)return i==="PM"&&n!==12?n+=12:i==="AM"&&n===12&&(n=0),`${String(n).padStart(2,"0")}:${String(t).padStart(2,"0")}`}return"00:00"}extractSection(o,e,n=!1){var y,c;let t=o.split(`
`),i=[],s=!1,h=new RegExp(`^${e}s*$`,"i"),d=["Summary","Action Items","Key Points","Transcript","Transcription"],m=new RegExp(`^(${d.filter(f=>f.toLowerCase()!==e.toLowerCase()).join("|")})s*$`,"i");for(let f=0;f<t.length;f++){let l=t[f];if(h.test(l)){s=!0;continue}if(s){if(m.test(l))break;let p=l.trim();if(p===""){if(n){let u=(y=t[f+1])==null?void 0:y.trim();if(!(u&&!u.match(/^(\s*[-*]|[0-9]+\.)/)&&!u.match(/^\s+/))){if(!u)break}}else if(((c=t[f+1])==null?void 0:c.trim())==="")break}if(p!==""||n&&i.length>0)if(n){let u=p;(u.startsWith("- ")||u.startsWith("* "))&&(u=u.substring(2).trim()),(e==="Action Items"&&u||u)&&i.push(u)}else i.push(p);else i.length>0}}return i}escapeRegExp(o){return o.replace(/[.*+?^${}()|[\\\]]/g,"\\$&")}isLikelyDateOrTime(o){if(!o)return!1;let e=/^(\d{4}-\d{2}-\d{2}|[A-Za-z]+\s+\d{1,2}(?:,\s*\d{4})?)$/i,n=/^(\d{1,2}:\d{2}(\s*[APap][Mm])?)$/;return e.test(o)||n.test(o)}isSectionHeader(o){if(!o)return!1;let e=o.toLowerCase();return e.startsWith("summary")||e.startsWith("action items")||e.startsWith("key points")||e.startsWith("transcript")}monthNameToNumber(o){if(!o)return null;let e=o.toLowerCase().substring(0,3);return{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,\u044F\u043D\u0432:1,\u0444\u0435\u0432:2,\u043C\u0430\u0440:3,\u0430\u043F\u0440:4,\u043C\u0430\u044F:5,\u0438\u044E\u043D:6,\u0438\u044E\u043B:7,\u0430\u0432\u0433:8,\u0441\u0435\u043D:9,\u043E\u043A\u0442:10,\u043D\u043E\u044F:11,\u0434\u0435\u043A:12}[e]||null}countWords(o){return o?o.trim().split(/\s+/).filter(e=>e.length>0).length:0}findMostActiveSpeaker(o){let e=o.split(`
`),n={},t="";for(let h of e){let d=h.trim();if(d==="")continue;let m=d.match(/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/);if(m)t=m[1].trim(),n[t]||(n[t]=0);else if(t){let y=this.countWords(d);n[t]+=y}}let i="",s=0;for(let[h,d]of Object.entries(n))d>s&&(s=d,i=h);return i||"N/A"}generateParticipantsStats(o,e){let n=o.split(`
`),t={},i={},s="";for(let m of e)t[m]=0,i[m]=0;for(let m of n){let y=m.trim();if(y==="")continue;let c=y.match(/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/);if(c)s=c[1].trim(),i[s]!==void 0&&i[s]++;else if(s&&t[s]!==void 0){let f=this.countWords(y);t[s]+=f}}let h=[],d=Object.values(t).reduce((m,y)=>m+y,0);for(let m of e){let y=t[m]||0,c=i[m]||0,f=d>0?(y/d*100).toFixed(1):"0";h.push(`- **${m}**: ${y} \u0441\u043B\u043E\u0432 (${f}%), ${c} \u0432\u044B\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0439`)}return h.length>0?["### \u{1F4CA} \u0410\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432","",...h]:[]}extractEntities(o,e){let n=[],i=`${o} ${e}`.substring(0,5e3),s={projects:/(?:проект|project|система|платформа|сервис|приложение|продукт)\s+([А-Яа-я\w\s]{3,30})/gi,companies:/(?:компания|компании|организация|корпорация|фирма|бизнес)\s+([А-Яа-я\w\s]{3,30})|([А-Яа-я][А-Яа-я\w]*(?:нефть|банк|групп|холдинг|корп))/gi,dates:/\d{1,2}[\.\-\/]\d{1,2}[\.\-\/]\d{2,4}|\d{4}[\.\-\/]\d{1,2}[\.\-\/]\d{1,2}/g},h=i.match(s.projects);h&&h.length>0&&(n.push("### \u{1F680} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u044B",""),[...new Set(h.slice(0,5))].forEach(c=>n.push(`- ${c.trim()}`)),n.push(""));let d=i.match(s.companies);d&&d.length>0&&(n.push("### \u{1F3E2} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0438",""),[...new Set(d.slice(0,5))].forEach(c=>n.push(`- ${c.trim()}`)),n.push(""));let m=i.match(s.dates);return m&&m.length>0&&(n.push("### \u{1F4C5} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u0434\u0430\u0442\u044B",""),[...new Set(m.slice(0,5))].forEach(c=>n.push(`- ${c}`)),n.push("")),n}generateRelatedLinks(o,e){let n=[],t=o.match(/встреча|совещание|планерка|созвон/gi);t&&t.length>1&&n.push("- \u{1F4CB} **\u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0432\u0441\u0442\u0440\u0435\u0447\u0438:** [[\u041F\u043E\u0438\u0441\u043A \u0432\u0441\u0442\u0440\u0435\u0447]]");let i=o.match(/документ|файл|презентация|отчет|план/gi);return i&&i.length>0&&n.push("- \u{1F4C4} **\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B:** [[\u041F\u043E\u0438\u0441\u043A \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432]]"),e.toLowerCase().includes("\u043F\u0440\u043E\u0435\u043A\u0442")&&n.push("- \u{1F680} **\u041F\u0440\u043E\u0435\u043A\u0442:** [[\u041F\u0440\u043E\u0435\u043A\u0442\u044B]]"),n}generateSmartTags(o,e,n){let t=new Set,i=`${o} ${e} ${n}`.toLowerCase();t.add("meeting"),t.add("krisp");let s={\u043F\u0440\u043E\u0435\u043A\u0442:"project",project:"project",\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435:"planning",planning:"planning",\u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u043A\u0430:"development",development:"development",\u043E\u0431\u0441\u0443\u0436\u0434\u0435\u043D\u0438\u0435:"discussion",\u0432\u0441\u0442\u0440\u0435\u0447\u0430:"meeting",\u0430\u043D\u0430\u043B\u0438\u0437:"analysis",strategy:"strategy",\u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F:"strategy",\u0432\u043D\u0435\u0434\u0440\u0435\u043D\u0438\u0435:"implementation",\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435:"testing",\u0440\u0435\u0432\u044C\u044E:"review",review:"review",\u0431\u044E\u0434\u0436\u0435\u0442:"budget",budget:"budget",deadline:"deadline",\u0434\u0435\u0434\u043B\u0430\u0439\u043D:"deadline",hr:"hr",\u0440\u0435\u043A\u0440\u0443\u0442\u0438\u043D\u0433:"hr",recruiting:"hr",\u0438\u043D\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044F:"integration",integration:"integration",api:"technical",\u0441\u0438\u0441\u0442\u0435\u043C\u0430:"system",system:"system",\u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C:"security",security:"security",\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430:"support",support:"support"};for(let[h,d]of Object.entries(s))i.includes(h)&&t.add(d);return(i.includes("ceo")||i.includes("director")||i.includes("\u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440"))&&t.add("management"),(i.includes("developer")||i.includes("\u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A")||i.includes("\u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442"))&&t.add("technical"),(i.includes("designer")||i.includes("\u0434\u0438\u0437\u0430\u0439\u043D\u0435\u0440"))&&t.add("design"),(i.includes("\u0440\u0435\u0442\u0440\u043E\u0441\u043F\u0435\u043A\u0442\u0438\u0432\u0430")||i.includes("retrospective"))&&t.add("retrospective"),(i.includes("\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435")||i.includes("planning"))&&t.add("planning"),(i.includes("\u0434\u0435\u043C\u043E")||i.includes("demo")||i.includes("\u043F\u0440\u0435\u0437\u0435\u043D\u0442\u0430\u0446\u0438\u044F"))&&t.add("demo"),Array.from(t)}};var gt=require("obsidian"),_t=xt(require("path")),Wt=class{constructor(o,e){this.app=o,this.vault=o.vault,this.settings=e}applyTemplate(o,e,n,t,i){var k,E,B,P,$,F,M,H;let s=o;s=s.replace(/{{meetingTitle}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{title}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{date}}/g,e.date||"YYYY-MM-DD"),s=s.replace(/{{time}}/g,e.time||"HH:MM"),s=s.replace(/{{duration}}/g,e.duration||"N/A");let h=((k=e.participants)==null?void 0:k.map(_=>`- **${_}**`).join(`
`))||"- *\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430\u0445 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430*";s=s.replace(/{{participantsList}}/g,h),s=s.replace(/{{participants}}/g,((E=e.participants)==null?void 0:E.join(", "))||"N/A"),s=s.replace(/{{participantsCount}}/g,String(e.participantsCount||0)),s=s.replace(/{{transcriptWords}}/g,String(e.transcriptWords||0)),s=s.replace(/{{mostActiveSpeaker}}/g,e.mostActiveSpeaker||"N/A"),s=s.replace(/{{importDate}}/g,e.importDate||new Date().toLocaleDateString("ru-RU"));let d=((B=e.participantsStats)==null?void 0:B.join(`
`))||"*\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430*";s=s.replace(/{{participantsStats}}/g,d);let m=(P=e.extractedEntities)!=null&&P.length?e.extractedEntities.join(`

`):"*\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430*";s=s.replace(/{{extractedEntities}}/g,m);let y=($=e.relatedLinks)!=null&&$.length?`
`+e.relatedLinks.join(`
`):"";s=s.replace(/{{relatedLinks}}/g,y);let c=(F=e.summary)!=null&&F.length?e.summary.map(_=>_.trim().startsWith("- ")||_.trim().startsWith("* ")?_.trim():_.trim()===""?"":_.trim()).join(`
>
> `):"*\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E*";s=s.replace(/{{summary}}/g,c);let f=((M=e.actionItems)==null?void 0:M.map(_=>`- [ ] ${_}`).join(`
> 
> `))||"*\u041D\u0435\u0442 \u0437\u0430\u0434\u0430\u0447 \u0434\u043B\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F*";s=s.replace(/{{actionItemsList}}/g,f),s=s.replace(/{{actionItems}}/g,f);let l=((H=e.keyPoints)==null?void 0:H.map(_=>`- ${_}`).join(`
> 
> `))||"*\u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B \u043D\u0435 \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u044B*";s=s.replace(/{{keyPointsList}}/g,l),s=s.replace(/{{keyPoints}}/g,l);let p=e.formattedTranscript?e.formattedTranscript.split(`
`).map(_=>`> ${_}`).join(`
`):"> *\u0422\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D*";s=s.replace(/{{formattedTranscript}}/g,p),s=s.replace(/{{transcript}}/g,p),s=s.replace(/{{rawTranscript}}/g,e.rawTranscript||"\u0421\u044B\u0440\u043E\u0439 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D");let u=[...e.tags||[],...e.smartTags||[]],v=[...new Set(u)],S=v.length>0?v.map(_=>`  - ${_}`).join(`
`)+`
`:"";if(s=s.replace(/{{yamlTags}}/g,S),i){let _=(0,gt.normalizePath)(i);s=s.replace(/{{audioPathForYaml}}/g,_),s=s.replace(/{{audioLink}}/g,_),s=s.replace(/{{audioEmbed}}/g,`![[${_}]]`)}else s=s.replace(/{{audioPathForYaml}}/g,""),s=s.replace(/{{audioLink}}/g,"N/A"),s=s.replace(/{{audioEmbed}}/g,`> [!warning] \u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D
> \u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u043D\u0435 \u0431\u044B\u043B \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D \u0438\u043B\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D \u0432 \u0430\u0440\u0445\u0438\u0432\u0435.`);return t?s=s.replace(/{{noteFileName}}/g,t.replace(/\.md$/,"")):s=s.replace(/{{noteFileName}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{YYYY}}/g,e.date?e.date.substring(0,4):"YYYY"),s=s.replace(/{{MM}}/g,e.date?e.date.substring(5,7):"MM"),s=s.replace(/{{DD}}/g,e.date?e.date.substring(8,10):"DD"),s=s.replace(/{{HH}}/g,e.time?e.time.substring(0,2):"HH"),s=s.replace(/{{mm}}/g,e.time?e.time.substring(3,5):"mm"),s=s.replace(/{{HHMM}}/g,e.time?e.time.replace(":",""):"HHMM"),s}generateFileName(o,e,n){var i,s,h,d,m,y;let t=o;return t=t.replace(/{{YYYY}}/g,((i=e.date)==null?void 0:i.substring(0,4))||"YYYY"),t=t.replace(/{{MM}}/g,((s=e.date)==null?void 0:s.substring(5,7))||"MM"),t=t.replace(/{{DD}}/g,((h=e.date)==null?void 0:h.substring(8,10))||"DD"),t=t.replace(/{{HHMM}}/g,((d=e.time)==null?void 0:d.replace(":",""))||"HHMM"),t=t.replace(/{{HH}}/g,((m=e.time)==null?void 0:m.substring(0,2))||"HH"),t=t.replace(/{{mm}}/g,((y=e.time)==null?void 0:y.substring(3,5))||"mm"),t=t.replace(/{{meetingTitle}}/g,e.meetingTitle||"Untitled Meeting"),t=t.replace(/[\/:\[\]\*\?"<>\|#^]/g,"_").replace(/\s+/g,"_"),`${t}.${n}`}async createNote(o,e){var f,l,p;let n=this.generateFileName(this.settings.noteNameTemplate,o,"md"),t=((f=o.date)==null?void 0:f.substring(0,4))||"YYYY",i=((l=o.date)==null?void 0:l.substring(5,7))||"MM",s=(0,gt.normalizePath)(_t.join(this.settings.notesFolderPath,t,i));await this.ensureFolderExists(s);let h=(0,gt.normalizePath)(_t.join(s,n)),d=this.vault.getAbstractFileByPath(h);if(d&&d instanceof gt.TFile)switch(this.settings.duplicateStrategy){case"skip":return console.log(`Note ${h} already exists. Skipping.`),new Notification("Krisp Importer",{body:`\u0417\u0430\u043C\u0435\u0442\u043A\u0430 ${n} \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442. \u0418\u043C\u043F\u043E\u0440\u0442 \u043F\u0440\u043E\u043F\u0443\u0449\u0435\u043D.`}),{notePath:h,noteFile:d};case"overwrite":console.log(`Note ${h} already exists. Overwriting.`),await this.vault.delete(d);break;case"rename":let u=1,v=n.substring(0,n.lastIndexOf(".")),S=n.substring(n.lastIndexOf(".")+1);for(;d;)h=(0,gt.normalizePath)(_t.join(s,`${v}_${u}.${S}`)),d=this.vault.getAbstractFileByPath(h),u++;console.log(`Note ${h} will be created with a new name.`);break}let m;if(e&&o.meetingTitle){let u=_t.extname(e)||".mp3",v=this.generateFileName(this.settings.attachmentNameTemplate,o,u.substring(1)),S=this.settings.attachmentsFolderPath;!S.includes("{{YYYY}}")&&!S.includes("{{MM}}")&&(S=_t.join(S,t,i)),S=S.replace(/{{YYYY}}/g,t).replace(/{{MM}}/g,i).replace(/{{DD}}/g,((p=o.date)==null?void 0:p.substring(8,10))||"DD"),await this.ensureFolderExists((0,gt.normalizePath)(S)),m=(0,gt.normalizePath)(_t.join(S,v));let k=this.vault.getAbstractFileByPath(m);if(k){let E=1,B=v.substring(0,v.lastIndexOf(".")),P=v.substring(v.lastIndexOf(".")+1);for(;k;)m=(0,gt.normalizePath)(_t.join(S,`${B}_${E}.${P}`)),k=this.vault.getAbstractFileByPath(m),E++}}let y=this.applyTemplate(this.settings.noteContentTemplate,o,this.settings,h.split("/").pop(),m),c=await this.vault.create(h,y);return console.log(`Note created: ${h}`),{notePath:h,audioDestPath:m,noteFile:c}}async ensureFolderExists(o){let e=(0,gt.normalizePath)(o);if(e==="/"||e==="")return;if(!this.vault.getAbstractFileByPath(e)){let t=e.split("/"),i="";for(let s of t){if(!s)continue;if(i=i?`${i}/${s}`:s,!this.vault.getAbstractFileByPath(i))try{await this.vault.createFolder(i)}catch(d){if(!this.vault.getAbstractFileByPath(i))throw console.error(`Failed to create folder ${i}:`,d),d}}}}};var zt=require("obsidian"),Ct=class{constructor(){}showSuccess(o,e=5e3){new zt.Notice(o,e),console.log(`[Krisp Importer] SUCCESS: ${o}`)}showError(o,e=8e3){new zt.Notice(`ERROR: ${o}`,e),console.error(`[Krisp Importer] ERROR: ${o}`)}showWarning(o,e=6e3){new zt.Notice(`WARNING: ${o}`,e),console.warn(`[Krisp Importer] WARNING: ${o}`)}showInfo(o,e=4e3){new zt.Notice(o,e),console.log(`[Krisp Importer] INFO: ${o}`)}showDuplicateFound(o,e,n){let t=`\u0414\u0443\u0431\u043B\u0438\u043A\u0430\u0442 "${o}": ${n} (\u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F: ${e})`;this.showWarning(t)}showBatchImportResult(o,e,n,t){o>0&&e===0?this.showSuccess(`\u0418\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D: ${o} \u0432\u0441\u0442\u0440\u0435\u0447(\u0438) \u0438\u0437 "${t}"`,8e3):o>0&&e>0?this.showWarning(`\u0418\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D \u0447\u0430\u0441\u0442\u0438\u0447\u043D\u043E: ${o} \u0443\u0441\u043F\u0435\u0448\u043D\u043E, ${e} \u043E\u0448\u0438\u0431\u043E\u043A \u0438\u0437 "${t}"`,1e4):e>0?this.showError(`\u0418\u043C\u043F\u043E\u0440\u0442 \u043D\u0435 \u0443\u0434\u0430\u043B\u0441\u044F: ${e} \u043E\u0448\u0438\u0431\u043E\u043A \u0432 "${t}"`,1e4):this.showInfo(`\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0432 "${t}"`,6e3),n>0&&this.showInfo(`\u041F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u043E \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432: ${n}`,4e3)}};var St=xt(require("path")),bt=require("fs"),Zt=class{constructor(o,e){this.app=o,this.zipExtractor=new $t(this.app),this.noteParser=new Mt,this.noteCreator=null,this.notificationService=new Ct,this.statusBarService=e||null}async processZipFile(o,e){var s,h,d;let n=null,t=St.basename(o),i=new yt.Notice(`Processing ${t}...`,0);this.statusBarService&&this.statusBarService.setProcessing(t),this.noteCreator=new Wt(this.app,e);try{let m=`${t.replace(".zip","")}_${Date.now()}`;if(n=await this.zipExtractor.extract(o,m),!n){this.notificationService.showError(`Failed to extract ZIP file: ${t}`),i&&i.hide();return}let c=(await bt.promises.readdir(n,{withFileTypes:!0})).filter(p=>p.isDirectory());if(c.length===0){this.notificationService.showError(`No meeting folders found in ZIP: ${t}`),i&&i.hide(),await this.zipExtractor.cleanup(n);return}let f=0,l=0;for(let p of c){let u=p.name,v=(0,yt.normalizePath)(St.join(n,u));new yt.Notice(`Processing meeting: ${u}...`);let S="meeting_notes.txt",k="transcript.txt",E="recording.mp3",B=(0,yt.normalizePath)(St.join(v,S)),P=(0,yt.normalizePath)(St.join(v,k)),$=await bt.promises.readdir(v),M=$.find(G=>G.toLowerCase().startsWith("recording.")&&(G.toLowerCase().endsWith(".mp3")||G.toLowerCase().endsWith(".m4a")))||E,H=(0,yt.normalizePath)(St.join(v,M)),_="",z="";try{_=await bt.promises.readFile(B,"utf-8")}catch(G){this.notificationService.showError(`Failed to read ${S} from ${u} in ${t}`);let O=$.find(J=>J.toLowerCase().includes("notes")&&J.toLowerCase().endsWith(".txt")&&J!==S);if(O){this.notificationService.showInfo(`Attempting to use alternative notes file: ${O}`);try{_=await bt.promises.readFile(St.join(v,O),"utf-8")}catch(J){this.notificationService.showError(`Failed to read alternative notes file ${O} for ${u}.`),l++;continue}}else{l++;continue}}try{z=await bt.promises.readFile(P,"utf-8")}catch(G){this.notificationService.showWarning(`Failed to read ${k} for ${u} in ${t}. Transcript might be missing.`)}let a=this.noteParser.parseMeetingNotes(_,z,u);console.log(`[DEBUG] Parsed data for ${u}:`,{title:a.meetingTitle,date:a.date,time:a.time,participants:a.participants,hasTranscript:!!a.formattedTranscript,transcriptLength:((s=a.formattedTranscript)==null?void 0:s.length)||0,summaryLength:((h=a.summary)==null?void 0:h.length)||0,actionItemsLength:((d=a.actionItems)==null?void 0:d.length)||0});let N=await this.noteCreator.createNote(a,H);if(!N.notePath){this.notificationService.showError(`Failed to create note for ${u}`),l++;continue}console.log(`[DEBUG] Note created at: ${N.notePath}, audio dest: ${N.audioDestPath}`);try{await bt.promises.access(H),console.log(`[DEBUG] Audio file found: ${H}`);let G=await bt.promises.readFile(H);if(console.log(`[DEBUG] Audio file read, size: ${G.length} bytes`),N.audioDestPath){let O=this.app.vault.getAbstractFileByPath(N.audioDestPath);O&&O instanceof yt.TFile?(this.notificationService.showInfo(`Overwriting existing audio file: ${N.audioDestPath}`),await this.app.vault.modifyBinary(O,G)):await this.app.vault.createBinary(N.audioDestPath,G),console.log(`[DEBUG] Audio file saved to: ${N.audioDestPath}`),this.notificationService.showInfo(`Audio file for ${u} saved: ${N.audioDestPath}`)}}catch(G){console.log("[DEBUG] Audio file error:",G),this.notificationService.showWarning(`Audio file ${M} not found in ${v}. Skipped audio.`)}this.notificationService.showSuccess(`Successfully imported meeting ${u} to ${N.notePath}`),f++}if(i&&i.hide(),this.statusBarService&&(l===0&&f>0?this.statusBarService.showTemporaryMessage(`\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043E: ${f}`,3e3):l>0&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043E\u043A: ${l}`)),this.notificationService.showBatchImportResult(f,l,0,t),console.log(`[DEBUG] deleteZipAfterImport setting: ${e.deleteZipAfterImport}`),console.log(`[DEBUG] errorCount: ${l}, importedCount: ${f}`),e.deleteZipAfterImport&&l===0&&f>0)try{console.log(`[DEBUG] Attempting to delete ZIP file: ${o}`),await bt.promises.rm(o),this.notificationService.showInfo(`Deleted original ZIP file: ${t}`),console.log(`[DEBUG] Successfully deleted ZIP file: ${o}`)}catch(p){console.error("[DEBUG] Failed to delete ZIP file:",p),this.notificationService.showError(`Failed to delete original ZIP file ${t}: ${p.message}`)}else e.deleteZipAfterImport?console.log(`[DEBUG] ZIP file not deleted due to errors or no imports. errorCount: ${l}, importedCount: ${f}`):console.log("[DEBUG] ZIP file deletion disabled in settings")}catch(m){i&&i.hide(),this.statusBarService&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043A\u0430: ${m.message}`),console.error("Error processing ZIP file:",m),this.notificationService.showError(`An unexpected error occurred while processing ${t}: ${m.message}`)}finally{n&&await this.zipExtractor.cleanup(n)}}};var pt=xt(require("fs")),Nt=xt(require("path")),jt=class{constructor(o,e,n,t,i){this.watcher=null;this.isWatching=!1;this.watchedPath="";this.app=o,this.processingService=e,this.notificationService=n,this.settingsProvider=t,this.statusBarService=i||null}async startWatching(o){if(this.isWatching&&await this.stopWatching(),!o||o.trim()===""){this.notificationService.showError("\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F");return}try{if(!pt.existsSync(o)){this.notificationService.showError(`\u041F\u0430\u043F\u043A\u0430 \u043D\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442: ${o}`);return}if(!pt.statSync(o).isDirectory()){this.notificationService.showError(`\u0423\u043A\u0430\u0437\u0430\u043D\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043F\u0430\u043F\u043A\u043E\u0439: ${o}`);return}this.watchedPath=o,this.watcher=pt.watch(o,{persistent:!0},(n,t)=>{console.log(`[FileWatcher] Event detected: ${n}, filename: ${t}`),n==="rename"&&t&&this.handleFileEvent(t)}),this.isWatching=!0,this.statusBarService&&this.statusBarService.setWatching(o),this.notificationService.showSuccess(`\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u0437\u0430\u043F\u0443\u0449\u0435\u043D\u043E: ${o}`),console.log(`[Krisp Importer] FileWatcher started for: ${o}`)}catch(e){this.statusBarService&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F: ${e.message}`),console.error("[Krisp Importer] Error starting file watcher:",e),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0443\u0441\u043A\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F: ${e.message}`)}}async stopWatching(){this.watcher&&(this.watcher.close(),this.watcher=null),this.isWatching&&(this.isWatching=!1,this.statusBarService&&this.statusBarService.setIdle("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),this.notificationService.showInfo("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),console.log("[Krisp Importer] FileWatcher stopped"))}isCurrentlyWatching(){return this.isWatching}getWatchedPath(){return this.watchedPath}async handleFileEvent(o){console.log(`[FileWatcher] Processing file event for: ${o}`);try{if(!o.toLowerCase().endsWith(".zip")){console.log(`[FileWatcher] Ignoring non-ZIP file: ${o}`);return}let e=Nt.join(this.watchedPath,o);if(!pt.existsSync(e)||!pt.statSync(e).isFile())return;console.log(`[Krisp Importer] New ZIP file detected: ${o}`),await this.waitForFileStability(e);let t=this.settingsProvider();await this.processNewZipFile(e,t)}catch(e){console.error("[Krisp Importer] Error handling file event:",e),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0444\u0430\u0439\u043B\u0430 ${o}: ${e.message}`)}}async waitForFileStability(o,e=5e3){let t=0,i=0,s=3;return new Promise(h=>{let d=()=>{try{if(!pt.existsSync(o)){h();return}let c=pt.statSync(o).size;if(c===t&&c>0){if(i++,i>=s){h();return}}else i=0;t=c,Date.now()-m<e?setTimeout(d,500):h()}catch(y){h()}},m=Date.now();d()})}async processNewZipFile(o,e){try{console.log(`[FileWatcher] Processing new ZIP file: ${o}`),console.log(`[FileWatcher] Settings - deleteZipAfterImport: ${e.deleteZipAfterImport}`),this.notificationService.showInfo(`\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D \u043D\u043E\u0432\u044B\u0439 \u0444\u0430\u0439\u043B: ${Nt.basename(o)}`),await this.processingService.processZipFile(o,e)}catch(n){console.error("[Krisp Importer] Error processing new ZIP file:",n),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0439 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0444\u0430\u0439\u043B\u0430: ${n.message}`)}}async scanExistingFiles(){if(!(!this.isWatching||!this.watchedPath))try{let e=pt.readdirSync(this.watchedPath).filter(i=>i.toLowerCase().endsWith(".zip"));if(e.length===0){this.notificationService.showInfo("\u0412 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043D\u0435\u0442 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432");return}this.notificationService.showInfo(`\u041D\u0430\u0439\u0434\u0435\u043D\u043E ${e.length} ZIP-\u0444\u0430\u0439\u043B\u043E\u0432 \u0434\u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438`);let n=0,t=0;for(let i of e)try{let s=Nt.join(this.watchedPath,i),h=this.settingsProvider();await this.processNewZipFile(s,h),n++}catch(s){console.error(`[Krisp Importer] Error processing ${i}:`,s),t++}this.notificationService.showBatchImportResult(n,t,0,"\u043C\u0430\u0441\u0441\u043E\u0432\u043E\u0435 \u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435")}catch(o){console.error("[Krisp Importer] Error scanning existing files:",o),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043F\u0430\u043F\u043A\u0438: ${o.message}`)}}};var Vt=require("obsidian"),kt=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(kt||{}),Ut=class{constructor(o=1){this.logs=[];this.maxLogEntries=1e3;this.currentLogLevel=1;this.currentLogLevel=o,this.log(1,"System","LoggingService initialized")}log(o,e,n,t){if(o<this.currentLogLevel)return;let i={timestamp:new Date,level:o,category:e,message:n,details:t};this.logs.push(i),this.logs.length>this.maxLogEntries&&(this.logs=this.logs.slice(-this.maxLogEntries));let s=kt[o],d=`[${i.timestamp.toISOString()}] [${s}] [${e}] ${n}`;switch(o){case 0:console.debug(d,t);break;case 1:console.info(d,t);break;case 2:console.warn(d,t);break;case 3:console.error(d,t);break}}debug(o,e,n){this.log(0,o,e,n)}info(o,e,n){this.log(1,o,e,n)}warn(o,e,n){this.log(2,o,e,n)}error(o,e,n){this.log(3,o,e,n)}logZipProcessingStart(o){this.info("Processing",`\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 ZIP-\u0444\u0430\u0439\u043B\u0430: ${o}`)}logZipProcessingSuccess(o,e){this.info("Processing",`\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D ZIP-\u0444\u0430\u0439\u043B: ${o}`,{noteName:e})}logZipProcessingError(o,e){this.error("Processing",`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 ZIP-\u0444\u0430\u0439\u043B\u0430: ${o}`,{error:e.message,stack:e.stack})}logFileWatcherStart(o){this.info("FileWatcher",`\u0417\u0430\u043F\u0443\u0449\u0435\u043D\u043E \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438: ${o}`)}logFileWatcherStop(){this.info("FileWatcher","\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E")}logFileWatcherError(o){this.error("FileWatcher","\u041E\u0448\u0438\u0431\u043A\u0430 \u0432 FileWatcher",{error:o.message,stack:o.stack})}logDuplicateHandling(o,e,n){this.info("Duplicates",`\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u0430: ${e}`,{strategy:o,action:n})}logSettingsChange(o,e,n){this.info("Settings",`\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430: ${o}`,{oldValue:e,newValue:n})}logNoteCreation(o,e){this.info("NoteCreator",`\u0421\u043E\u0437\u0434\u0430\u043D\u0430 \u0437\u0430\u043C\u0435\u0442\u043A\u0430: ${o}`,{templateUsed:e})}logAudioFileCopy(o,e){this.info("AudioCopy",`\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B: ${o} -> ${e}`)}getAllLogs(){return[...this.logs]}getLogsByLevel(o){return this.logs.filter(e=>e.level>=o)}getLogsByCategory(o){return this.logs.filter(e=>e.category===o)}getRecentLogs(o=50){return this.logs.slice(-o)}exportLogsAsText(){return this.logs.map(e=>{let n=e.timestamp.toISOString(),t=kt[e.level].padEnd(5),i=e.category.padEnd(12),s=`[${n}] [${t}] [${i}] ${e.message}`;return e.details&&(s+=`
    Details: ${JSON.stringify(e.details,null,2)}`),s}).join(`
`)}exportLogsAsJSON(){return JSON.stringify(this.logs,null,2)}clearLogs(){let o=this.logs.length;this.logs=[],this.info("System",`\u041E\u0447\u0438\u0449\u0435\u043D\u044B \u043B\u043E\u0433\u0438 (\u0431\u044B\u043B\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439: ${o})`)}setLogLevel(o){let e=this.currentLogLevel;this.currentLogLevel=o,this.info("System",`\u0418\u0437\u043C\u0435\u043D\u0435\u043D \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F: ${kt[e]} -> ${kt[o]}`)}getLogStats(){let o={},e={};return this.logs.forEach(n=>{let t=kt[n.level];o[t]=(o[t]||0)+1,e[n.category]=(e[n.category]||0)+1}),{total:this.logs.length,byLevel:o,byCategory:e}}async copyLogsToClipboard(){try{let o=this.exportLogsAsText();await navigator.clipboard.writeText(o),new Vt.Notice("\u{1F4CB} \u041B\u043E\u0433\u0438 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430",3e3),this.info("System","\u041B\u043E\u0433\u0438 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430")}catch(o){this.error("System","\u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043B\u043E\u0433\u043E\u0432 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430",o),new Vt.Notice("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043B\u043E\u0433\u043E\u0432",5e3)}}};var re=require("obsidian");var Kt=class{constructor(o){this.statusBarItem=null;this.currentStatus="idle";this.currentMessage="";this.plugin=o,this.initialize()}initialize(){this.statusBarItem=this.plugin.addStatusBarItem(),this.statusBarItem.addClass("krisp-importer-status"),this.statusBarItem.style.cursor="pointer",this.statusBarItem.addEventListener("click",()=>{this.plugin.app.setting.open(),this.plugin.app.setting.openTabById("krisp-notes-importer")}),this.updateDisplay()}updateDisplay(){if(!this.statusBarItem)return;let{icon:o,text:e,color:n}=this.getStatusDisplay();this.statusBarItem.empty(),this.statusBarItem.removeClass("idle","watching","processing","error");let t=this.currentStatus.toLowerCase();this.statusBarItem.addClass(t);let i=this.statusBarItem.createEl("span");i.style.marginRight="4px",(0,re.setIcon)(i,o);let s=this.statusBarItem.createEl("span");s.textContent=e,this.statusBarItem.style.color=n,this.statusBarItem.setAttribute("aria-label",this.getTooltipText())}getStatusDisplay(){switch(this.currentStatus){case"idle":return{icon:"pause-circle",text:"Krisp",color:"var(--text-muted)"};case"watching":return{icon:"eye",text:"Krisp",color:"var(--color-green)"};case"processing":return{icon:"loader-2",text:"Krisp",color:"var(--color-blue)"};case"error":return{icon:"alert-circle",text:"Krisp",color:"var(--color-red)"};default:return{icon:"help-circle",text:"Krisp",color:"var(--text-muted)"}}}getTooltipText(){let o="Krisp Notes Importer";switch(this.currentStatus){case"idle":return`${o}: \u041D\u0435\u0430\u043A\u0442\u0438\u0432\u0435\u043D`;case"watching":return`${o}: \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u043D\u043E${this.currentMessage?` - ${this.currentMessage}`:""}`;case"processing":return`${o}: \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0444\u0430\u0439\u043B\u0430${this.currentMessage?` - ${this.currentMessage}`:""}`;case"error":return`${o}: \u041E\u0448\u0438\u0431\u043A\u0430${this.currentMessage?` - ${this.currentMessage}`:""}`;default:return o}}setIdle(o){this.currentStatus="idle",this.currentMessage=o||"",this.updateDisplay()}setWatching(o){this.currentStatus="watching",this.currentMessage=o?`\u041F\u0430\u043F\u043A\u0430: ${o}`:"",this.updateDisplay()}setProcessing(o){this.currentStatus="processing",this.currentMessage=o?`\u0424\u0430\u0439\u043B: ${o}`:"",this.updateDisplay()}setError(o){this.currentStatus="error",this.currentMessage=o||"",this.updateDisplay(),setTimeout(()=>{this.currentStatus==="error"&&this.setIdle()},1e4)}showTemporaryMessage(o,e=3e3){let n=this.currentStatus,t=this.currentMessage;this.currentMessage=o,this.updateDisplay(),setTimeout(()=>{this.currentStatus=n,this.currentMessage=t,this.updateDisplay()},e)}getCurrentStatus(){return this.currentStatus}isActive(){return this.currentStatus==="watching"||this.currentStatus==="processing"}destroy(){this.statusBarItem&&(this.statusBarItem.remove(),this.statusBarItem=null)}startProcessingAnimation(){if(!this.statusBarItem||this.currentStatus!=="processing")return;let o=this.statusBarItem.querySelector("span:first-child");o&&(o.style.animation="spin 1s linear infinite")}stopAnimation(){if(!this.statusBarItem)return;let o=this.statusBarItem.querySelector("span:first-child");o&&(o.style.animation="")}updateDisplayWithAnimation(){this.updateDisplay(),this.currentStatus==="processing"?this.startProcessingAnimation():this.stopAnimation()}};var Yt=class extends ht.Plugin{async onload(){console.log("Loading Krisp Notes Importer plugin..."),this.loggingService=new Ut(1),this.loggingService.info("Plugin","\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0443 \u043F\u043B\u0430\u0433\u0438\u043D\u0430 Krisp Notes Importer"),this.settingsManager=new Ot(this),await this.settingsManager.loadSettings(),this.loggingService.info("Plugin","\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B");let e=this.settingsManager.getSetting("language")||"en";this.localizationService=new Et(e),this.loggingService.info("Plugin",`\u041B\u043E\u043A\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u0430: ${e}`),this.notificationService=new Ct,this.statusBarService=new Kt(this),this.processingService=new Zt(this.app,this.statusBarService),this.loggingService.info("Plugin","\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044B \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u044B"),this.fileWatcherService=new jt(this.app,this.processingService,this.notificationService,()=>this.settingsManager.getAllSettings(),this.statusBarService),this.addSettingTab(new Rt(this.app,this)),this.addCommand({id:"import-krisp-zip-manually",name:this.localizationService.t("commands.importZip"),callback:()=>{this.loggingService.info("Commands","\u0417\u0430\u043F\u0443\u0449\u0435\u043D\u0430 \u043A\u043E\u043C\u0430\u043D\u0434\u0430 \u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430 ZIP-\u0444\u0430\u0439\u043B\u0430"),new qt(this.app,async i=>{i&&i.trim()!==""?(this.loggingService.info("Commands",`\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u0440\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 \u0444\u0430\u0439\u043B\u0430: ${i}`),new ht.Notice(`Starting import for: ${i}`),await this.processingService.processZipFile(i,this.settingsManager.settings)):(this.loggingService.warn("Commands","\u041F\u043E\u043F\u044B\u0442\u043A\u0430 \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0441 \u043F\u0443\u0441\u0442\u044B\u043C \u043F\u0443\u0442\u0435\u043C \u043A \u0444\u0430\u0439\u043B\u0443"),new ht.Notice("File path cannot be empty."))},this.localizationService).open()}}),this.addCommand({id:"start-auto-watching",name:this.localizationService.t("commands.startWatching"),callback:async()=>{let i=this.settingsManager.getSetting("watchedFolderPath");i&&i.trim()!==""?(this.statusBarService.setWatching(i),await this.fileWatcherService.startWatching(i)):(this.statusBarService.setError("\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F"),new ht.Notice("Please set the watched folder path in settings first."))}}),this.addCommand({id:"stop-auto-watching",name:this.localizationService.t("commands.stopWatching"),callback:async()=>{this.statusBarService.setIdle("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),await this.fileWatcherService.stopWatching()}}),this.addCommand({id:"scan-existing-files",name:this.localizationService.t("commands.scanExisting"),callback:async()=>{this.statusBarService.setProcessing("\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432"),await this.fileWatcherService.scanExistingFiles(),this.statusBarService.setIdle("\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E")}}),this.addCommand({id:"debug-settings",name:this.localizationService.t("commands.debugSettings"),callback:()=>{let i=this.settingsManager.getAllSettings();console.log("[Krisp Importer] Current settings:",i),new ht.Notice(`Settings logged to console. deleteZipAfterImport: ${i.deleteZipAfterImport}`,5e3)}}),this.addCommand({id:"check-watching-status",name:this.localizationService.t("commands.checkStatus"),callback:()=>{let i=this.fileWatcherService.isCurrentlyWatching(),s=this.fileWatcherService.getWatchedPath(),h=this.settingsManager.getSetting("autoScanEnabled");console.log("[Krisp Importer] Watching status:",{isWatching:i,watchedPath:s,autoScanEnabled:h});let d=i?`\u2705 \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u043D\u043E: ${s}`:`\u274C \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u043E. AutoScan \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445: ${h?"\u0432\u043A\u043B\u044E\u0447\u0435\u043D":"\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D"}`;new ht.Notice(d,7e3)}});let n=this.settingsManager.getSetting("autoScanEnabled"),t=this.settingsManager.getSetting("watchedFolderPath");n&&t&&t.trim()!==""?(this.loggingService.info("Plugin",`\u0410\u0432\u0442\u043E\u0437\u0430\u043F\u0443\u0441\u043A \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u043F\u0430\u043F\u043A\u0438: ${t}`),this.statusBarService.setWatching(t),await this.fileWatcherService.startWatching(t)):this.statusBarService.setIdle("\u0413\u043E\u0442\u043E\u0432 \u043A \u0440\u0430\u0431\u043E\u0442\u0435"),this.loggingService.info("Plugin","\u041F\u043B\u0430\u0433\u0438\u043D Krisp Notes Importer \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E"),console.log("Krisp Notes Importer plugin loaded successfully.")}onunload(){this.fileWatcherService&&this.fileWatcherService.stopWatching(),this.statusBarService&&this.statusBarService.destroy(),this.loggingService&&this.loggingService.info("Plugin","\u0412\u044B\u0433\u0440\u0443\u0436\u0430\u044E \u043F\u043B\u0430\u0433\u0438\u043D Krisp Notes Importer"),console.log("Unloading Krisp Notes Importer plugin.")}},qt=class extends ht.Modal{constructor(e,n,t){super(e);this.onSubmitCallback=n,this.localization=t}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.localization.t("modal.importZip.title")}),new ht.Setting(e).setName(this.localization.t("modal.importZip.pathLabel")).setDesc(this.localization.t("modal.importZip.pathDesc")).addText(n=>{n.setPlaceholder("/path/to/your/krisp_meeting.zip"),n.onChange(t=>{this.filePath=t}),n.inputEl.style.width="100%",n.inputEl.addEventListener("keypress",t=>{t.key==="Enter"&&(t.preventDefault(),this.submitForm())})}),new ht.Setting(e).addButton(n=>n.setButtonText(this.localization.t("modal.importZip.importButton")).setCta().onClick(()=>{this.submitForm()}))}submitForm(){this.filePath&&this.filePath.trim()!==""?(this.onSubmitCallback(this.filePath.trim()),this.close()):new ht.Notice(this.localization.t("modal.importZip.emptyPathError"))}onClose(){let{contentEl:e}=this;e.empty()}};
/*! Bundled license information:

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)
*/
