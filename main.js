/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var oe=Object.create;var Dt=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var ue=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty;var de=(S,o)=>()=>(o||S((o={exports:{}}).exports,o),o.exports),pe=(S,o)=>{for(var e in o)Dt(S,e,{get:o[e],enumerable:!0})},Qt=(S,o,e,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of ce(o))!he.call(S,t)&&t!==e&&Dt(S,t,{get:()=>o[t],enumerable:!(n=le(o,t))||n.enumerable});return S};var xt=(S,o,e)=>(e=S!=null?oe(ue(S)):{},Qt(o||!S||!S.__esModule?Dt(e,"default",{value:S,enumerable:!0}):e,S)),fe=S=>Qt(Dt({},"__esModule",{value:!0}),S);var ee=de((te,Gt)=>{(function(S){typeof te=="object"&&typeof Gt!="undefined"?Gt.exports=S():typeof define=="function"&&define.amd?define([],S):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).JSZip=S()})(function(){return function S(o,e,n){function t(v,y){if(!e[v]){if(!o[v]){var h=typeof require=="function"&&require;if(!y&&h)return h(v,!0);if(i)return i(v,!0);var p=new Error("Cannot find module '"+v+"'");throw p.code="MODULE_NOT_FOUND",p}var c=e[v]={exports:{}};o[v][0].call(c.exports,function(f){var l=o[v][1][f];return t(l||f)},c,c.exports,S,o,e,n)}return e[v].exports}for(var i=typeof require=="function"&&require,s=0;s<n.length;s++)t(n[s]);return t}({1:[function(S,o,e){"use strict";var n=S("./utils"),t=S("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var v,y,h,p,c,f,l,d=[],u=0,g=s.length,b=g,k=n.getTypeOf(s)!=="string";u<s.length;)b=g-u,h=k?(v=s[u++],y=u<g?s[u++]:0,u<g?s[u++]:0):(v=s.charCodeAt(u++),y=u<g?s.charCodeAt(u++):0,u<g?s.charCodeAt(u++):0),p=v>>2,c=(3&v)<<4|y>>4,f=1<b?(15&y)<<2|h>>6:64,l=2<b?63&h:64,d.push(i.charAt(p)+i.charAt(c)+i.charAt(f)+i.charAt(l));return d.join("")},e.decode=function(s){var v,y,h,p,c,f,l=0,d=0,u="data:";if(s.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var g,b=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&b--,s.charAt(s.length-2)===i.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(g=t.uint8array?new Uint8Array(0|b):new Array(0|b);l<s.length;)v=i.indexOf(s.charAt(l++))<<2|(p=i.indexOf(s.charAt(l++)))>>4,y=(15&p)<<4|(c=i.indexOf(s.charAt(l++)))>>2,h=(3&c)<<6|(f=i.indexOf(s.charAt(l++))),g[d++]=v,c!==64&&(g[d++]=y),f!==64&&(g[d++]=h);return g}},{"./support":30,"./utils":32}],2:[function(S,o,e){"use strict";var n=S("./external"),t=S("./stream/DataWorker"),i=S("./stream/Crc32Probe"),s=S("./stream/DataLengthProbe");function v(y,h,p,c,f){this.compressedSize=y,this.uncompressedSize=h,this.crc32=p,this.compression=c,this.compressedContent=f}v.prototype={getContentWorker:function(){var y=new t(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),h=this;return y.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),y},getCompressedWorker:function(){return new t(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},v.createWorkerFrom=function(y,h,p){return y.pipe(new i).pipe(new s("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new s("compressedSize")).withStreamInfo("compression",h)},o.exports=v},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(S,o,e){"use strict";var n=S("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},e.DEFLATE=S("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(S,o,e){"use strict";var n=S("./utils"),t=function(){for(var i,s=[],v=0;v<256;v++){i=v;for(var y=0;y<8;y++)i=1&i?3988292384^i>>>1:i>>>1;s[v]=i}return s}();o.exports=function(i,s){return i!==void 0&&i.length?n.getTypeOf(i)!=="string"?function(v,y,h,p){var c=t,f=p+h;v^=-1;for(var l=p;l<f;l++)v=v>>>8^c[255&(v^y[l])];return-1^v}(0|s,i,i.length,0):function(v,y,h,p){var c=t,f=p+h;v^=-1;for(var l=p;l<f;l++)v=v>>>8^c[255&(v^y.charCodeAt(l))];return-1^v}(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(S,o,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(S,o,e){"use strict";var n=null;n=typeof Promise!="undefined"?Promise:S("lie"),o.exports={Promise:n}},{lie:37}],7:[function(S,o,e){"use strict";var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",t=S("pako"),i=S("./utils"),s=S("./stream/GenericWorker"),v=n?"uint8array":"array";function y(h,p){s.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}e.magic="\b\0",i.inherits(y,s),y.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(v,h.data),!1)},y.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},y.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},y.prototype._createPako=function(){this._pako=new t[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},e.compressWorker=function(h){return new y("Deflate",h)},e.uncompressWorker=function(){return new y("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(S,o,e){"use strict";function n(c,f){var l,d="";for(l=0;l<f;l++)d+=String.fromCharCode(255&c),c>>>=8;return d}function t(c,f,l,d,u,g){var b,k,x=c.file,P=c.compression,F=g!==v.utf8encode,R=i.transformTo("string",g(x.name)),A=i.transformTo("string",v.utf8encode(x.name)),M=x.comment,H=i.transformTo("string",g(M)),_=i.transformTo("string",v.utf8encode(M)),N=A.length!==x.name.length,a=_.length!==M.length,B="",G="",O="",Q=x.dir,W=x.date,J={crc32:0,compressedSize:0,uncompressedSize:0};f&&!l||(J.crc32=c.crc32,J.compressedSize=c.compressedSize,J.uncompressedSize=c.uncompressedSize);var z=0;f&&(z|=8),F||!N&&!a||(z|=2048);var C=0,q=0;Q&&(C|=16),u==="UNIX"?(q=798,C|=function(U,nt){var lt=U;return U||(lt=nt?16893:33204),(65535&lt)<<16}(x.unixPermissions,Q)):(q=20,C|=function(U){return 63&(U||0)}(x.dosPermissions)),b=W.getUTCHours(),b<<=6,b|=W.getUTCMinutes(),b<<=5,b|=W.getUTCSeconds()/2,k=W.getUTCFullYear()-1980,k<<=4,k|=W.getUTCMonth()+1,k<<=5,k|=W.getUTCDate(),N&&(G=n(1,1)+n(y(R),4)+A,B+="up"+n(G.length,2)+G),a&&(O=n(1,1)+n(y(H),4)+_,B+="uc"+n(O.length,2)+O);var K="";return K+=`
\0`,K+=n(z,2),K+=P.magic,K+=n(b,2),K+=n(k,2),K+=n(J.crc32,4),K+=n(J.compressedSize,4),K+=n(J.uncompressedSize,4),K+=n(R.length,2),K+=n(B.length,2),{fileRecord:h.LOCAL_FILE_HEADER+K+R+B,dirRecord:h.CENTRAL_FILE_HEADER+n(q,2)+K+n(H.length,2)+"\0\0\0\0"+n(C,4)+n(d,4)+R+B+H}}var i=S("../utils"),s=S("../stream/GenericWorker"),v=S("../utf8"),y=S("../crc32"),h=S("../signature");function p(c,f,l,d){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=l,this.encodeFileName=d,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(p,s),p.prototype.push=function(c){var f=c.meta.percent||0,l=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,s.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:l?(f+100*(l-d-1))/l:100}}))},p.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var f=this.streamFiles&&!c.file.dir;if(f){var l=t(c,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:l.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(c){this.accumulate=!1;var f=this.streamFiles&&!c.file.dir,l=t(c,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(l.dirRecord),f)this.push({data:function(d){return h.DATA_DESCRIPTOR+n(d.crc32,4)+n(d.compressedSize,4)+n(d.uncompressedSize,4)}(c),meta:{percent:100}});else for(this.push({data:l.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var c=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var l=this.bytesWritten-c,d=function(u,g,b,k,x){var P=i.transformTo("string",x(k));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(u,2)+n(u,2)+n(g,4)+n(b,4)+n(P.length,2)+P}(this.dirRecords.length,l,c,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(c){this._sources.push(c);var f=this;return c.on("data",function(l){f.processChunk(l)}),c.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),c.on("error",function(l){f.error(l)}),this},p.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(c){var f=this._sources;if(!s.prototype.error.call(this,c))return!1;for(var l=0;l<f.length;l++)try{f[l].error(c)}catch(d){}return!0},p.prototype.lock=function(){s.prototype.lock.call(this);for(var c=this._sources,f=0;f<c.length;f++)c[f].lock()},o.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(S,o,e){"use strict";var n=S("../compressions"),t=S("./ZipFileWorker");e.generateWorker=function(i,s,v){var y=new t(s.streamFiles,v,s.platform,s.encodeFileName),h=0;try{i.forEach(function(p,c){h++;var f=function(g,b){var k=g||b,x=n[k];if(!x)throw new Error(k+" is not a valid compression method !");return x}(c.options.compression,s.compression),l=c.options.compressionOptions||s.compressionOptions||{},d=c.dir,u=c.date;c._compressWorker(f,l).withStreamInfo("file",{name:p,dir:d,date:u,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(y)}),y.entriesCount=h}catch(p){y.error(p)}return y}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(S,o,e){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var i in this)typeof this[i]!="function"&&(t[i]=this[i]);return t}}(n.prototype=S("./object")).loadAsync=S("./load"),n.support=S("./support"),n.defaults=S("./defaults"),n.version="3.10.1",n.loadAsync=function(t,i){return new n().loadAsync(t,i)},n.external=S("./external"),o.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(S,o,e){"use strict";var n=S("./utils"),t=S("./external"),i=S("./utf8"),s=S("./zipEntries"),v=S("./stream/Crc32Probe"),y=S("./nodejsUtils");function h(p){return new t.Promise(function(c,f){var l=p.decompressed.getContentWorker().pipe(new v);l.on("error",function(d){f(d)}).on("end",function(){l.streamInfo.crc32!==p.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}o.exports=function(p,c){var f=this;return c=n.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),y.isNode&&y.isStream(p)?t.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",p,!0,c.optimizedBinaryString,c.base64).then(function(l){var d=new s(c);return d.load(l),d}).then(function(l){var d=[t.Promise.resolve(l)],u=l.files;if(c.checkCRC32)for(var g=0;g<u.length;g++)d.push(h(u[g]));return t.Promise.all(d)}).then(function(l){for(var d=l.shift(),u=d.files,g=0;g<u.length;g++){var b=u[g],k=b.fileNameStr,x=n.resolve(b.fileNameStr);f.file(x,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:c.createFolders}),b.dir||(f.file(x).unsafeOriginalName=k)}return d.zipComment.length&&(f.comment=d.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(S,o,e){"use strict";var n=S("../utils"),t=S("../stream/GenericWorker");function i(s,v){t.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(v)}n.inherits(i,t),i.prototype._bindStream=function(s){var v=this;(this._stream=s).pause(),s.on("data",function(y){v.push({data:y,meta:{percent:0}})}).on("error",function(y){v.isPaused?this.generatedError=y:v.error(y)}).on("end",function(){v.isPaused?v._upstreamEnded=!0:v.end()})},i.prototype.pause=function(){return!!t.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(S,o,e){"use strict";var n=S("readable-stream").Readable;function t(i,s,v){n.call(this,s),this._helper=i;var y=this;i.on("data",function(h,p){y.push(h)||y._helper.pause(),v&&v(p)}).on("error",function(h){y.emit("error",h)}).on("end",function(){y.push(null)})}S("../utils").inherits(t,n),t.prototype._read=function(){this._helper.resume()},o.exports=t},{"../utils":32,"readable-stream":16}],14:[function(S,o,e){"use strict";o.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(n,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,t);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,t)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var t=new Buffer(n);return t.fill(0),t},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(S,o,e){"use strict";function n(x,P,F){var R,A=i.getTypeOf(P),M=i.extend(F||{},y);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(x=u(x)),M.createFolders&&(R=d(x))&&g.call(this,R,!0);var H=A==="string"&&M.binary===!1&&M.base64===!1;F&&F.binary!==void 0||(M.binary=!H),(P instanceof h&&P.uncompressedSize===0||M.dir||!P||P.length===0)&&(M.base64=!1,M.binary=!0,P="",M.compression="STORE",A="string");var _=null;_=P instanceof h||P instanceof s?P:f.isNode&&f.isStream(P)?new l(x,P):i.prepareContent(x,P,M.binary,M.optimizedBinaryString,M.base64);var N=new p(x,_,M);this.files[x]=N}var t=S("./utf8"),i=S("./utils"),s=S("./stream/GenericWorker"),v=S("./stream/StreamHelper"),y=S("./defaults"),h=S("./compressedObject"),p=S("./zipObject"),c=S("./generate"),f=S("./nodejsUtils"),l=S("./nodejs/NodejsStreamInputAdapter"),d=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var P=x.lastIndexOf("/");return 0<P?x.substring(0,P):""},u=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},g=function(x,P){return P=P!==void 0?P:y.createFolders,x=u(x),this.files[x]||n.call(this,x,null,{dir:!0,createFolders:P}),this.files[x]};function b(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var P,F,R;for(P in this.files)R=this.files[P],(F=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&x(F,R)},filter:function(x){var P=[];return this.forEach(function(F,R){x(F,R)&&P.push(R)}),P},file:function(x,P,F){if(arguments.length!==1)return x=this.root+x,n.call(this,x,P,F),this;if(b(x)){var R=x;return this.filter(function(M,H){return!H.dir&&R.test(M)})}var A=this.files[this.root+x];return A&&!A.dir?A:null},folder:function(x){if(!x)return this;if(b(x))return this.filter(function(A,M){return M.dir&&x.test(A)});var P=this.root+x,F=g.call(this,P),R=this.clone();return R.root=F.name,R},remove:function(x){x=this.root+x;var P=this.files[x];if(P||(x.slice(-1)!=="/"&&(x+="/"),P=this.files[x]),P&&!P.dir)delete this.files[x];else for(var F=this.filter(function(A,M){return M.name.slice(0,x.length)===x}),R=0;R<F.length;R++)delete this.files[F[R].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var P,F={};try{if((F=i.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:t.utf8encode})).type=F.type.toLowerCase(),F.compression=F.compression.toUpperCase(),F.type==="binarystring"&&(F.type="string"),!F.type)throw new Error("No output type specified.");i.checkSupport(F.type),F.platform!=="darwin"&&F.platform!=="freebsd"&&F.platform!=="linux"&&F.platform!=="sunos"||(F.platform="UNIX"),F.platform==="win32"&&(F.platform="DOS");var R=F.comment||this.comment||"";P=c.generateWorker(this,F,R)}catch(A){(P=new s("error")).error(A)}return new v(P,F.type||"string",F.mimeType)},generateAsync:function(x,P){return this.generateInternalStream(x).accumulate(P)},generateNodeStream:function(x,P){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(P)}};o.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(S,o,e){"use strict";o.exports=S("stream")},{stream:void 0}],17:[function(S,o,e){"use strict";var n=S("./DataReader");function t(i){n.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}S("../utils").inherits(t,n),t.prototype.byteAt=function(i){return this.data[this.zero+i]},t.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),v=i.charCodeAt(1),y=i.charCodeAt(2),h=i.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===s&&this.data[p+1]===v&&this.data[p+2]===y&&this.data[p+3]===h)return p-this.zero;return-1},t.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),v=i.charCodeAt(1),y=i.charCodeAt(2),h=i.charCodeAt(3),p=this.readData(4);return s===p[0]&&v===p[1]&&y===p[2]&&h===p[3]},t.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./DataReader":18}],18:[function(S,o,e){"use strict";var n=S("../utils");function t(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}t.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,v=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)v=(v<<8)+this.byteAt(s);return this.index+=i,v},readString:function(i){return n.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},o.exports=t},{"../utils":32}],19:[function(S,o,e){"use strict";var n=S("./Uint8ArrayReader");function t(i){n.call(this,i)}S("../utils").inherits(t,n),t.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(S,o,e){"use strict";var n=S("./DataReader");function t(i){n.call(this,i)}S("../utils").inherits(t,n),t.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},t.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},t.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},t.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./DataReader":18}],21:[function(S,o,e){"use strict";var n=S("./ArrayReader");function t(i){n.call(this,i)}S("../utils").inherits(t,n),t.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./ArrayReader":17}],22:[function(S,o,e){"use strict";var n=S("../utils"),t=S("../support"),i=S("./ArrayReader"),s=S("./StringReader"),v=S("./NodeBufferReader"),y=S("./Uint8ArrayReader");o.exports=function(h){var p=n.getTypeOf(h);return n.checkSupport(p),p!=="string"||t.uint8array?p==="nodebuffer"?new v(h):t.uint8array?new y(n.transformTo("uint8array",h)):new i(n.transformTo("array",h)):new s(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(S,o,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(S,o,e){"use strict";var n=S("./GenericWorker"),t=S("../utils");function i(s){n.call(this,"ConvertWorker to "+s),this.destType=s}t.inherits(i,n),i.prototype.processChunk=function(s){this.push({data:t.transformTo(this.destType,s.data),meta:s.meta})},o.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(S,o,e){"use strict";var n=S("./GenericWorker"),t=S("../crc32");function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}S("../utils").inherits(i,n),i.prototype.processChunk=function(s){this.streamInfo.crc32=t(s.data,this.streamInfo.crc32||0),this.push(s)},o.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(S,o,e){"use strict";var n=S("../utils"),t=S("./GenericWorker");function i(s){t.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}n.inherits(i,t),i.prototype.processChunk=function(s){if(s){var v=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=v+s.data.length}t.prototype.processChunk.call(this,s)},o.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(S,o,e){"use strict";var n=S("../utils"),t=S("./GenericWorker");function i(s){t.call(this,"DataWorker");var v=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(y){v.dataIsReady=!0,v.data=y,v.max=y&&y.length||0,v.type=n.getTypeOf(y),v.isPaused||v._tickAndRepeat()},function(y){v.error(y)})}n.inherits(i,t),i.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,v=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,v);break;case"uint8array":s=this.data.subarray(this.index,v);break;case"array":case"nodebuffer":s=this.data.slice(this.index,v)}return this.index=v,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(S,o,e){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,i){return this._listeners[t].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,i){if(this._listeners[t])for(var s=0;s<this._listeners[t].length;s++)this._listeners[t][s].call(this,i)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var i=this;return t.on("data",function(s){i.processChunk(s)}),t.on("end",function(){i.end()}),t.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,i){return this.extraStreamInfo[t]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},o.exports=n},{}],29:[function(S,o,e){"use strict";var n=S("../utils"),t=S("./ConvertWorker"),i=S("./GenericWorker"),s=S("../base64"),v=S("../support"),y=S("../external"),h=null;if(v.nodestream)try{h=S("../nodejs/NodejsStreamOutputAdapter")}catch(f){}function p(f,l){return new y.Promise(function(d,u){var g=[],b=f._internalType,k=f._outputType,x=f._mimeType;f.on("data",function(P,F){g.push(P),l&&l(F)}).on("error",function(P){g=[],u(P)}).on("end",function(){try{var P=function(F,R,A){switch(F){case"blob":return n.newBlob(n.transformTo("arraybuffer",R),A);case"base64":return s.encode(R);default:return n.transformTo(F,R)}}(k,function(F,R){var A,M=0,H=null,_=0;for(A=0;A<R.length;A++)_+=R[A].length;switch(F){case"string":return R.join("");case"array":return Array.prototype.concat.apply([],R);case"uint8array":for(H=new Uint8Array(_),A=0;A<R.length;A++)H.set(R[A],M),M+=R[A].length;return H;case"nodebuffer":return Buffer.concat(R);default:throw new Error("concat : unsupported type '"+F+"'")}}(b,g),x);d(P)}catch(F){u(F)}g=[]}).resume()})}function c(f,l,d){var u=l;switch(l){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=l,this._mimeType=d,n.checkSupport(u),this._worker=f.pipe(new t(u)),f.lock()}catch(g){this._worker=new i("error"),this._worker.error(g)}}c.prototype={accumulate:function(f){return p(this,f)},on:function(f,l){var d=this;return f==="data"?this._worker.on(f,function(u){l.call(d,u.data,u.meta)}):this._worker.on(f,function(){n.delay(l,arguments,d)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},f)}},o.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(S,o,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",e.nodebuffer=typeof Buffer!="undefined",e.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=new Blob([n],{type:"application/zip"}).size===0}catch(i){try{var t=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);t.append(n),e.blob=t.getBlob("application/zip").size===0}catch(s){e.blob=!1}}}try{e.nodestream=!!S("readable-stream").Readable}catch(i){e.nodestream=!1}},{"readable-stream":16}],31:[function(S,o,e){"use strict";for(var n=S("./utils"),t=S("./support"),i=S("./nodejsUtils"),s=S("./stream/GenericWorker"),v=new Array(256),y=0;y<256;y++)v[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;v[254]=v[254]=1;function h(){s.call(this,"utf-8 decode"),this.leftOver=null}function p(){s.call(this,"utf-8 encode")}e.utf8encode=function(c){return t.nodebuffer?i.newBufferFrom(c,"utf-8"):function(f){var l,d,u,g,b,k=f.length,x=0;for(g=0;g<k;g++)(64512&(d=f.charCodeAt(g)))==55296&&g+1<k&&(64512&(u=f.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(u-56320),g++),x+=d<128?1:d<2048?2:d<65536?3:4;for(l=t.uint8array?new Uint8Array(x):new Array(x),g=b=0;b<x;g++)(64512&(d=f.charCodeAt(g)))==55296&&g+1<k&&(64512&(u=f.charCodeAt(g+1)))==56320&&(d=65536+(d-55296<<10)+(u-56320),g++),d<128?l[b++]=d:(d<2048?l[b++]=192|d>>>6:(d<65536?l[b++]=224|d>>>12:(l[b++]=240|d>>>18,l[b++]=128|d>>>12&63),l[b++]=128|d>>>6&63),l[b++]=128|63&d);return l}(c)},e.utf8decode=function(c){return t.nodebuffer?n.transformTo("nodebuffer",c).toString("utf-8"):function(f){var l,d,u,g,b=f.length,k=new Array(2*b);for(l=d=0;l<b;)if((u=f[l++])<128)k[d++]=u;else if(4<(g=v[u]))k[d++]=65533,l+=g-1;else{for(u&=g===2?31:g===3?15:7;1<g&&l<b;)u=u<<6|63&f[l++],g--;1<g?k[d++]=65533:u<65536?k[d++]=u:(u-=65536,k[d++]=55296|u>>10&1023,k[d++]=56320|1023&u)}return k.length!==d&&(k.subarray?k=k.subarray(0,d):k.length=d),n.applyFromCharCode(k)}(c=n.transformTo(t.uint8array?"uint8array":"array",c))},n.inherits(h,s),h.prototype.processChunk=function(c){var f=n.transformTo(t.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(t.uint8array){var l=f;(f=new Uint8Array(l.length+this.leftOver.length)).set(this.leftOver,0),f.set(l,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var d=function(g,b){var k;for((b=b||g.length)>g.length&&(b=g.length),k=b-1;0<=k&&(192&g[k])==128;)k--;return k<0||k===0?b:k+v[g[k]]>b?k:b}(f),u=f;d!==f.length&&(t.uint8array?(u=f.subarray(0,d),this.leftOver=f.subarray(d,f.length)):(u=f.slice(0,d),this.leftOver=f.slice(d,f.length))),this.push({data:e.utf8decode(u),meta:c.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=h,n.inherits(p,s),p.prototype.processChunk=function(c){this.push({data:e.utf8encode(c.data),meta:c.meta})},e.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(S,o,e){"use strict";var n=S("./support"),t=S("./base64"),i=S("./nodejsUtils"),s=S("./external");function v(l){return l}function y(l,d){for(var u=0;u<l.length;++u)d[u]=255&l.charCodeAt(u);return d}S("setimmediate"),e.newBlob=function(l,d){e.checkSupport("blob");try{return new Blob([l],{type:d})}catch(g){try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(l),u.getBlob(d)}catch(b){throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(l,d,u){var g=[],b=0,k=l.length;if(k<=u)return String.fromCharCode.apply(null,l);for(;b<k;)d==="array"||d==="nodebuffer"?g.push(String.fromCharCode.apply(null,l.slice(b,Math.min(b+u,k)))):g.push(String.fromCharCode.apply(null,l.subarray(b,Math.min(b+u,k)))),b+=u;return g.join("")},stringifyByChar:function(l){for(var d="",u=0;u<l.length;u++)d+=String.fromCharCode(l[u]);return d},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(l){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch(l){return!1}}()}};function p(l){var d=65536,u=e.getTypeOf(l),g=!0;if(u==="uint8array"?g=h.applyCanBeUsed.uint8array:u==="nodebuffer"&&(g=h.applyCanBeUsed.nodebuffer),g)for(;1<d;)try{return h.stringifyByChunk(l,u,d)}catch(b){d=Math.floor(d/2)}return h.stringifyByChar(l)}function c(l,d){for(var u=0;u<l.length;u++)d[u]=l[u];return d}e.applyFromCharCode=p;var f={};f.string={string:v,array:function(l){return y(l,new Array(l.length))},arraybuffer:function(l){return f.string.uint8array(l).buffer},uint8array:function(l){return y(l,new Uint8Array(l.length))},nodebuffer:function(l){return y(l,i.allocBuffer(l.length))}},f.array={string:p,array:v,arraybuffer:function(l){return new Uint8Array(l).buffer},uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return i.newBufferFrom(l)}},f.arraybuffer={string:function(l){return p(new Uint8Array(l))},array:function(l){return c(new Uint8Array(l),new Array(l.byteLength))},arraybuffer:v,uint8array:function(l){return new Uint8Array(l)},nodebuffer:function(l){return i.newBufferFrom(new Uint8Array(l))}},f.uint8array={string:p,array:function(l){return c(l,new Array(l.length))},arraybuffer:function(l){return l.buffer},uint8array:v,nodebuffer:function(l){return i.newBufferFrom(l)}},f.nodebuffer={string:p,array:function(l){return c(l,new Array(l.length))},arraybuffer:function(l){return f.nodebuffer.uint8array(l).buffer},uint8array:function(l){return c(l,new Uint8Array(l.length))},nodebuffer:v},e.transformTo=function(l,d){if(d=d||"",!l)return d;e.checkSupport(l);var u=e.getTypeOf(d);return f[u][l](d)},e.resolve=function(l){for(var d=l.split("/"),u=[],g=0;g<d.length;g++){var b=d[g];b==="."||b===""&&g!==0&&g!==d.length-1||(b===".."?u.pop():u.push(b))}return u.join("/")},e.getTypeOf=function(l){return typeof l=="string"?"string":Object.prototype.toString.call(l)==="[object Array]"?"array":n.nodebuffer&&i.isBuffer(l)?"nodebuffer":n.uint8array&&l instanceof Uint8Array?"uint8array":n.arraybuffer&&l instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(l){if(!n[l.toLowerCase()])throw new Error(l+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(l){var d,u,g="";for(u=0;u<(l||"").length;u++)g+="\\x"+((d=l.charCodeAt(u))<16?"0":"")+d.toString(16).toUpperCase();return g},e.delay=function(l,d,u){setImmediate(function(){l.apply(u||null,d||[])})},e.inherits=function(l,d){function u(){}u.prototype=d.prototype,l.prototype=new u},e.extend=function(){var l,d,u={};for(l=0;l<arguments.length;l++)for(d in arguments[l])Object.prototype.hasOwnProperty.call(arguments[l],d)&&u[d]===void 0&&(u[d]=arguments[l][d]);return u},e.prepareContent=function(l,d,u,g,b){return s.Promise.resolve(d).then(function(k){return n.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader!="undefined"?new s.Promise(function(x,P){var F=new FileReader;F.onload=function(R){x(R.target.result)},F.onerror=function(R){P(R.target.error)},F.readAsArrayBuffer(k)}):k}).then(function(k){var x=e.getTypeOf(k);return x?(x==="arraybuffer"?k=e.transformTo("uint8array",k):x==="string"&&(b?k=t.decode(k):u&&g!==!0&&(k=function(P){return y(P,n.uint8array?new Uint8Array(P.length):new Array(P.length))}(k))),k):s.Promise.reject(new Error("Can't read the data of '"+l+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(S,o,e){"use strict";var n=S("./reader/readerFor"),t=S("./utils"),i=S("./signature"),s=S("./zipEntry"),v=S("./support");function y(h){this.files=[],this.loadOptions=h}y.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+t.pretty(p)+", expected "+t.pretty(h)+")")}},isSignature:function(h,p){var c=this.reader.index;this.reader.setIndex(h);var f=this.reader.readString(4)===p;return this.reader.setIndex(c),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=v.uint8array?"uint8array":"array",c=t.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,c,f=this.zip64EndOfCentralSize-44;0<f;)h=this.reader.readInt(2),p=this.reader.readInt(4),c=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(h=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===t.MAX_VALUE_16BITS||this.diskWithCentralDirStart===t.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===t.MAX_VALUE_16BITS||this.centralDirRecords===t.MAX_VALUE_16BITS||this.centralDirSize===t.MAX_VALUE_32BITS||this.centralDirOffset===t.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var f=p-c;if(0<f)this.isSignature(p,i.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(h){this.reader=n(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=y},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(S,o,e){"use strict";var n=S("./reader/readerFor"),t=S("./utils"),i=S("./compressedObject"),s=S("./crc32"),v=S("./utf8"),y=S("./compressions"),h=S("./support");function p(c,f){this.options=c,this.loadOptions=f}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var f,l;if(c.skip(22),this.fileNameLength=c.readInt(2),l=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(l),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=function(d){for(var u in y)if(Object.prototype.hasOwnProperty.call(y,u)&&y[u].magic===d)return y[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+t.pretty(this.compressionMethod)+" unknown (inner file : "+t.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,f,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var f=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(f),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=n(this.extraFields[1].value);this.uncompressedSize===t.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===t.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===t.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===t.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var f,l,d,u=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<u;)f=c.readInt(2),l=c.readInt(2),d=c.readData(l),this.extraFields[f]={id:f,length:l,value:d};c.setIndex(u)},handleUTF8:function(){var c=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=v.utf8decode(this.fileName),this.fileCommentStr=v.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var l=t.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(l)}var d=this.findExtraFieldUnicodeComment();if(d!==null)this.fileCommentStr=d;else{var u=t.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var f=n(c.value);return f.readInt(1)!==1||s(this.fileName)!==f.readInt(4)?null:v.utf8decode(f.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var f=n(c.value);return f.readInt(1)!==1||s(this.fileComment)!==f.readInt(4)?null:v.utf8decode(f.readData(c.length-5))}return null}},o.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(S,o,e){"use strict";function n(f,l,d){this.name=f,this.dir=d.dir,this.date=d.date,this.comment=d.comment,this.unixPermissions=d.unixPermissions,this.dosPermissions=d.dosPermissions,this._data=l,this._dataBinary=d.binary,this.options={compression:d.compression,compressionOptions:d.compressionOptions}}var t=S("./stream/StreamHelper"),i=S("./stream/DataWorker"),s=S("./utf8"),v=S("./compressedObject"),y=S("./stream/GenericWorker");n.prototype={internalStream:function(f){var l=null,d="string";try{if(!f)throw new Error("No output type specified.");var u=(d=f.toLowerCase())==="string"||d==="text";d!=="binarystring"&&d!=="text"||(d="string"),l=this._decompressWorker();var g=!this._dataBinary;g&&!u&&(l=l.pipe(new s.Utf8EncodeWorker)),!g&&u&&(l=l.pipe(new s.Utf8DecodeWorker))}catch(b){(l=new y("error")).error(b)}return new t(l,d,"")},async:function(f,l){return this.internalStream(f).accumulate(l)},nodeStream:function(f,l){return this.internalStream(f||"nodebuffer").toNodejsStream(l)},_compressWorker:function(f,l){if(this._data instanceof v&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var d=this._decompressWorker();return this._dataBinary||(d=d.pipe(new s.Utf8EncodeWorker)),v.createWorkerFrom(d,f,l)},_decompressWorker:function(){return this._data instanceof v?this._data.getContentWorker():this._data instanceof y?this._data:new i(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<h.length;c++)n.prototype[h[c]]=p;o.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(S,o,e){(function(n){"use strict";var t,i,s=n.MutationObserver||n.WebKitMutationObserver;if(s){var v=0,y=new s(f),h=n.document.createTextNode("");y.observe(h,{characterData:!0}),t=function(){h.data=v=++v%2}}else if(n.setImmediate||n.MessageChannel===void 0)t="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var l=n.document.createElement("script");l.onreadystatechange=function(){f(),l.onreadystatechange=null,l.parentNode.removeChild(l),l=null},n.document.documentElement.appendChild(l)}:function(){setTimeout(f,0)};else{var p=new n.MessageChannel;p.port1.onmessage=f,t=function(){p.port2.postMessage(0)}}var c=[];function f(){var l,d;i=!0;for(var u=c.length;u;){for(d=c,c=[],l=-1;++l<u;)d[l]();u=c.length}i=!1}o.exports=function(l){c.push(l)!==1||i||t()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(S,o,e){"use strict";var n=S("immediate");function t(){}var i={},s=["REJECTED"],v=["FULFILLED"],y=["PENDING"];function h(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,u!==t&&l(this,u)}function p(u,g,b){this.promise=u,typeof g=="function"&&(this.onFulfilled=g,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function c(u,g,b){n(function(){var k;try{k=g(b)}catch(x){return i.reject(u,x)}k===u?i.reject(u,new TypeError("Cannot resolve promise with itself")):i.resolve(u,k)})}function f(u){var g=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof g=="function")return function(){g.apply(u,arguments)}}function l(u,g){var b=!1;function k(F){b||(b=!0,i.reject(u,F))}function x(F){b||(b=!0,i.resolve(u,F))}var P=d(function(){g(x,k)});P.status==="error"&&k(P.value)}function d(u,g){var b={};try{b.value=u(g),b.status="success"}catch(k){b.status="error",b.value=k}return b}(o.exports=h).prototype.finally=function(u){if(typeof u!="function")return this;var g=this.constructor;return this.then(function(b){return g.resolve(u()).then(function(){return b})},function(b){return g.resolve(u()).then(function(){throw b})})},h.prototype.catch=function(u){return this.then(null,u)},h.prototype.then=function(u,g){if(typeof u!="function"&&this.state===v||typeof g!="function"&&this.state===s)return this;var b=new this.constructor(t);return this.state!==y?c(b,this.state===v?u:g,this.outcome):this.queue.push(new p(b,u,g)),b},p.prototype.callFulfilled=function(u){i.resolve(this.promise,u)},p.prototype.otherCallFulfilled=function(u){c(this.promise,this.onFulfilled,u)},p.prototype.callRejected=function(u){i.reject(this.promise,u)},p.prototype.otherCallRejected=function(u){c(this.promise,this.onRejected,u)},i.resolve=function(u,g){var b=d(f,g);if(b.status==="error")return i.reject(u,b.value);var k=b.value;if(k)l(u,k);else{u.state=v,u.outcome=g;for(var x=-1,P=u.queue.length;++x<P;)u.queue[x].callFulfilled(g)}return u},i.reject=function(u,g){u.state=s,u.outcome=g;for(var b=-1,k=u.queue.length;++b<k;)u.queue[b].callRejected(g);return u},h.resolve=function(u){return u instanceof this?u:i.resolve(new this(t),u)},h.reject=function(u){var g=new this(t);return i.reject(g,u)},h.all=function(u){var g=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=u.length,k=!1;if(!b)return this.resolve([]);for(var x=new Array(b),P=0,F=-1,R=new this(t);++F<b;)A(u[F],F);return R;function A(M,H){g.resolve(M).then(function(_){x[H]=_,++P!==b||k||(k=!0,i.resolve(R,x))},function(_){k||(k=!0,i.reject(R,_))})}},h.race=function(u){var g=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=u.length,k=!1;if(!b)return this.resolve([]);for(var x=-1,P=new this(t);++x<b;)F=u[x],g.resolve(F).then(function(R){k||(k=!0,i.resolve(P,R))},function(R){k||(k=!0,i.reject(P,R))});var F;return P}},{immediate:36}],38:[function(S,o,e){"use strict";var n={};(0,S("./lib/utils/common").assign)(n,S("./lib/deflate"),S("./lib/inflate"),S("./lib/zlib/constants")),o.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(S,o,e){"use strict";var n=S("./zlib/deflate"),t=S("./utils/common"),i=S("./utils/strings"),s=S("./zlib/messages"),v=S("./zlib/zstream"),y=Object.prototype.toString,h=0,p=-1,c=0,f=8;function l(u){if(!(this instanceof l))return new l(u);this.options=t.assign({level:p,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},u||{});var g=this.options;g.raw&&0<g.windowBits?g.windowBits=-g.windowBits:g.gzip&&0<g.windowBits&&g.windowBits<16&&(g.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var b=n.deflateInit2(this.strm,g.level,g.method,g.windowBits,g.memLevel,g.strategy);if(b!==h)throw new Error(s[b]);if(g.header&&n.deflateSetHeader(this.strm,g.header),g.dictionary){var k;if(k=typeof g.dictionary=="string"?i.string2buf(g.dictionary):y.call(g.dictionary)==="[object ArrayBuffer]"?new Uint8Array(g.dictionary):g.dictionary,(b=n.deflateSetDictionary(this.strm,k))!==h)throw new Error(s[b]);this._dict_set=!0}}function d(u,g){var b=new l(g);if(b.push(u,!0),b.err)throw b.msg||s[b.err];return b.result}l.prototype.push=function(u,g){var b,k,x=this.strm,P=this.options.chunkSize;if(this.ended)return!1;k=g===~~g?g:g===!0?4:0,typeof u=="string"?x.input=i.string2buf(u):y.call(u)==="[object ArrayBuffer]"?x.input=new Uint8Array(u):x.input=u,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new t.Buf8(P),x.next_out=0,x.avail_out=P),(b=n.deflate(x,k))!==1&&b!==h)return this.onEnd(b),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(t.shrinkBuf(x.output,x.next_out))):this.onData(t.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&b!==1);return k===4?(b=n.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===h):k!==2||(this.onEnd(h),!(x.avail_out=0))},l.prototype.onData=function(u){this.chunks.push(u)},l.prototype.onEnd=function(u){u===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},e.Deflate=l,e.deflate=d,e.deflateRaw=function(u,g){return(g=g||{}).raw=!0,d(u,g)},e.gzip=function(u,g){return(g=g||{}).gzip=!0,d(u,g)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(S,o,e){"use strict";var n=S("./zlib/inflate"),t=S("./utils/common"),i=S("./utils/strings"),s=S("./zlib/constants"),v=S("./zlib/messages"),y=S("./zlib/zstream"),h=S("./zlib/gzheader"),p=Object.prototype.toString;function c(l){if(!(this instanceof c))return new c(l);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},l||{});var d=this.options;d.raw&&0<=d.windowBits&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),!(0<=d.windowBits&&d.windowBits<16)||l&&l.windowBits||(d.windowBits+=32),15<d.windowBits&&d.windowBits<48&&!(15&d.windowBits)&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var u=n.inflateInit2(this.strm,d.windowBits);if(u!==s.Z_OK)throw new Error(v[u]);this.header=new h,n.inflateGetHeader(this.strm,this.header)}function f(l,d){var u=new c(d);if(u.push(l,!0),u.err)throw u.msg||v[u.err];return u.result}c.prototype.push=function(l,d){var u,g,b,k,x,P,F=this.strm,R=this.options.chunkSize,A=this.options.dictionary,M=!1;if(this.ended)return!1;g=d===~~d?d:d===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof l=="string"?F.input=i.binstring2buf(l):p.call(l)==="[object ArrayBuffer]"?F.input=new Uint8Array(l):F.input=l,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new t.Buf8(R),F.next_out=0,F.avail_out=R),(u=n.inflate(F,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&A&&(P=typeof A=="string"?i.string2buf(A):p.call(A)==="[object ArrayBuffer]"?new Uint8Array(A):A,u=n.inflateSetDictionary(this.strm,P)),u===s.Z_BUF_ERROR&&M===!0&&(u=s.Z_OK,M=!1),u!==s.Z_STREAM_END&&u!==s.Z_OK)return this.onEnd(u),!(this.ended=!0);F.next_out&&(F.avail_out!==0&&u!==s.Z_STREAM_END&&(F.avail_in!==0||g!==s.Z_FINISH&&g!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=i.utf8border(F.output,F.next_out),k=F.next_out-b,x=i.buf2string(F.output,b),F.next_out=k,F.avail_out=R-k,k&&t.arraySet(F.output,F.output,b,k,0),this.onData(x)):this.onData(t.shrinkBuf(F.output,F.next_out)))),F.avail_in===0&&F.avail_out===0&&(M=!0)}while((0<F.avail_in||F.avail_out===0)&&u!==s.Z_STREAM_END);return u===s.Z_STREAM_END&&(g=s.Z_FINISH),g===s.Z_FINISH?(u=n.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===s.Z_OK):g!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(F.avail_out=0))},c.prototype.onData=function(l){this.chunks.push(l)},c.prototype.onEnd=function(l){l===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},e.Inflate=c,e.inflate=f,e.inflateRaw=function(l,d){return(d=d||{}).raw=!0,f(l,d)},e.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(S,o,e){"use strict";var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";e.assign=function(s){for(var v=Array.prototype.slice.call(arguments,1);v.length;){var y=v.shift();if(y){if(typeof y!="object")throw new TypeError(y+"must be non-object");for(var h in y)y.hasOwnProperty(h)&&(s[h]=y[h])}}return s},e.shrinkBuf=function(s,v){return s.length===v?s:s.subarray?s.subarray(0,v):(s.length=v,s)};var t={arraySet:function(s,v,y,h,p){if(v.subarray&&s.subarray)s.set(v.subarray(y,y+h),p);else for(var c=0;c<h;c++)s[p+c]=v[y+c]},flattenChunks:function(s){var v,y,h,p,c,f;for(v=h=0,y=s.length;v<y;v++)h+=s[v].length;for(f=new Uint8Array(h),v=p=0,y=s.length;v<y;v++)c=s[v],f.set(c,p),p+=c.length;return f}},i={arraySet:function(s,v,y,h,p){for(var c=0;c<h;c++)s[p+c]=v[y+c]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,t)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(n)},{}],42:[function(S,o,e){"use strict";var n=S("./common"),t=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(h){t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){i=!1}for(var s=new n.Buf8(256),v=0;v<256;v++)s[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;function y(h,p){if(p<65537&&(h.subarray&&i||!h.subarray&&t))return String.fromCharCode.apply(null,n.shrinkBuf(h,p));for(var c="",f=0;f<p;f++)c+=String.fromCharCode(h[f]);return c}s[254]=s[254]=1,e.string2buf=function(h){var p,c,f,l,d,u=h.length,g=0;for(l=0;l<u;l++)(64512&(c=h.charCodeAt(l)))==55296&&l+1<u&&(64512&(f=h.charCodeAt(l+1)))==56320&&(c=65536+(c-55296<<10)+(f-56320),l++),g+=c<128?1:c<2048?2:c<65536?3:4;for(p=new n.Buf8(g),l=d=0;d<g;l++)(64512&(c=h.charCodeAt(l)))==55296&&l+1<u&&(64512&(f=h.charCodeAt(l+1)))==56320&&(c=65536+(c-55296<<10)+(f-56320),l++),c<128?p[d++]=c:(c<2048?p[d++]=192|c>>>6:(c<65536?p[d++]=224|c>>>12:(p[d++]=240|c>>>18,p[d++]=128|c>>>12&63),p[d++]=128|c>>>6&63),p[d++]=128|63&c);return p},e.buf2binstring=function(h){return y(h,h.length)},e.binstring2buf=function(h){for(var p=new n.Buf8(h.length),c=0,f=p.length;c<f;c++)p[c]=h.charCodeAt(c);return p},e.buf2string=function(h,p){var c,f,l,d,u=p||h.length,g=new Array(2*u);for(c=f=0;c<u;)if((l=h[c++])<128)g[f++]=l;else if(4<(d=s[l]))g[f++]=65533,c+=d-1;else{for(l&=d===2?31:d===3?15:7;1<d&&c<u;)l=l<<6|63&h[c++],d--;1<d?g[f++]=65533:l<65536?g[f++]=l:(l-=65536,g[f++]=55296|l>>10&1023,g[f++]=56320|1023&l)}return y(g,f)},e.utf8border=function(h,p){var c;for((p=p||h.length)>h.length&&(p=h.length),c=p-1;0<=c&&(192&h[c])==128;)c--;return c<0||c===0?p:c+s[h[c]]>p?c:p}},{"./common":41}],43:[function(S,o,e){"use strict";o.exports=function(n,t,i,s){for(var v=65535&n|0,y=n>>>16&65535|0,h=0;i!==0;){for(i-=h=2e3<i?2e3:i;y=y+(v=v+t[s++]|0)|0,--h;);v%=65521,y%=65521}return v|y<<16|0}},{}],44:[function(S,o,e){"use strict";o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(S,o,e){"use strict";var n=function(){for(var t,i=[],s=0;s<256;s++){t=s;for(var v=0;v<8;v++)t=1&t?3988292384^t>>>1:t>>>1;i[s]=t}return i}();o.exports=function(t,i,s,v){var y=n,h=v+s;t^=-1;for(var p=v;p<h;p++)t=t>>>8^y[255&(t^i[p])];return-1^t}},{}],46:[function(S,o,e){"use strict";var n,t=S("../utils/common"),i=S("./trees"),s=S("./adler32"),v=S("./crc32"),y=S("./messages"),h=0,p=4,c=0,f=-2,l=-1,d=4,u=2,g=8,b=9,k=286,x=30,P=19,F=2*k+1,R=15,A=3,M=258,H=M+A+1,_=42,N=113,a=1,B=2,G=3,O=4;function Q(r,L){return r.msg=y[L],L}function W(r){return(r<<1)-(4<r?9:0)}function J(r){for(var L=r.length;0<=--L;)r[L]=0}function z(r){var L=r.state,T=L.pending;T>r.avail_out&&(T=r.avail_out),T!==0&&(t.arraySet(r.output,L.pending_buf,L.pending_out,T,r.next_out),r.next_out+=T,L.pending_out+=T,r.total_out+=T,r.avail_out-=T,L.pending-=T,L.pending===0&&(L.pending_out=0))}function C(r,L){i._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,L),r.block_start=r.strstart,z(r.strm)}function q(r,L){r.pending_buf[r.pending++]=L}function K(r,L){r.pending_buf[r.pending++]=L>>>8&255,r.pending_buf[r.pending++]=255&L}function U(r,L){var T,w,m=r.max_chain_length,E=r.strstart,D=r.prev_length,$=r.nice_match,I=r.strstart>r.w_size-H?r.strstart-(r.w_size-H):0,Z=r.window,Y=r.w_mask,j=r.prev,V=r.strstart+M,rt=Z[E+D-1],et=Z[E+D];r.prev_length>=r.good_match&&(m>>=2),$>r.lookahead&&($=r.lookahead);do if(Z[(T=L)+D]===et&&Z[T+D-1]===rt&&Z[T]===Z[E]&&Z[++T]===Z[E+1]){E+=2,T++;do;while(Z[++E]===Z[++T]&&Z[++E]===Z[++T]&&Z[++E]===Z[++T]&&Z[++E]===Z[++T]&&Z[++E]===Z[++T]&&Z[++E]===Z[++T]&&Z[++E]===Z[++T]&&Z[++E]===Z[++T]&&E<V);if(w=M-(V-E),E=V-M,D<w){if(r.match_start=L,$<=(D=w))break;rt=Z[E+D-1],et=Z[E+D]}}while((L=j[L&Y])>I&&--m!=0);return D<=r.lookahead?D:r.lookahead}function nt(r){var L,T,w,m,E,D,$,I,Z,Y,j=r.w_size;do{if(m=r.window_size-r.lookahead-r.strstart,r.strstart>=j+(j-H)){for(t.arraySet(r.window,r.window,j,j,0),r.match_start-=j,r.strstart-=j,r.block_start-=j,L=T=r.hash_size;w=r.head[--L],r.head[L]=j<=w?w-j:0,--T;);for(L=T=j;w=r.prev[--L],r.prev[L]=j<=w?w-j:0,--T;);m+=j}if(r.strm.avail_in===0)break;if(D=r.strm,$=r.window,I=r.strstart+r.lookahead,Z=m,Y=void 0,Y=D.avail_in,Z<Y&&(Y=Z),T=Y===0?0:(D.avail_in-=Y,t.arraySet($,D.input,D.next_in,Y,I),D.state.wrap===1?D.adler=s(D.adler,$,Y,I):D.state.wrap===2&&(D.adler=v(D.adler,$,Y,I)),D.next_in+=Y,D.total_in+=Y,Y),r.lookahead+=T,r.lookahead+r.insert>=A)for(E=r.strstart-r.insert,r.ins_h=r.window[E],r.ins_h=(r.ins_h<<r.hash_shift^r.window[E+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[E+A-1])&r.hash_mask,r.prev[E&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=E,E++,r.insert--,!(r.lookahead+r.insert<A)););}while(r.lookahead<H&&r.strm.avail_in!==0)}function lt(r,L){for(var T,w;;){if(r.lookahead<H){if(nt(r),r.lookahead<H&&L===h)return a;if(r.lookahead===0)break}if(T=0,r.lookahead>=A&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+A-1])&r.hash_mask,T=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),T!==0&&r.strstart-T<=r.w_size-H&&(r.match_length=U(r,T)),r.match_length>=A)if(w=i._tr_tally(r,r.strstart-r.match_start,r.match_length-A),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=A){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+A-1])&r.hash_mask,T=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else w=i._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(w&&(C(r,!1),r.strm.avail_out===0))return a}return r.insert=r.strstart<A-1?r.strstart:A-1,L===p?(C(r,!0),r.strm.avail_out===0?G:O):r.last_lit&&(C(r,!1),r.strm.avail_out===0)?a:B}function tt(r,L){for(var T,w,m;;){if(r.lookahead<H){if(nt(r),r.lookahead<H&&L===h)return a;if(r.lookahead===0)break}if(T=0,r.lookahead>=A&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+A-1])&r.hash_mask,T=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=A-1,T!==0&&r.prev_length<r.max_lazy_match&&r.strstart-T<=r.w_size-H&&(r.match_length=U(r,T),r.match_length<=5&&(r.strategy===1||r.match_length===A&&4096<r.strstart-r.match_start)&&(r.match_length=A-1)),r.prev_length>=A&&r.match_length<=r.prev_length){for(m=r.strstart+r.lookahead-A,w=i._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-A),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=m&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+A-1])&r.hash_mask,T=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=A-1,r.strstart++,w&&(C(r,!1),r.strm.avail_out===0))return a}else if(r.match_available){if((w=i._tr_tally(r,0,r.window[r.strstart-1]))&&C(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return a}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(w=i._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<A-1?r.strstart:A-1,L===p?(C(r,!0),r.strm.avail_out===0?G:O):r.last_lit&&(C(r,!1),r.strm.avail_out===0)?a:B}function it(r,L,T,w,m){this.good_length=r,this.max_lazy=L,this.nice_length=T,this.max_chain=w,this.func=m}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(2*F),this.dyn_dtree=new t.Buf16(2*(2*x+1)),this.bl_tree=new t.Buf16(2*(2*P+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(R+1),this.heap=new t.Buf16(2*k+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*k+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function st(r){var L;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=u,(L=r.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?_:N,r.adler=L.wrap===2?0:1,L.last_flush=h,i._tr_init(L),c):Q(r,f)}function mt(r){var L=st(r);return L===c&&function(T){T.window_size=2*T.w_size,J(T.head),T.max_lazy_match=n[T.level].max_lazy,T.good_match=n[T.level].good_length,T.nice_match=n[T.level].nice_length,T.max_chain_length=n[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=A-1,T.match_available=0,T.ins_h=0}(r.state),L}function ft(r,L,T,w,m,E){if(!r)return f;var D=1;if(L===l&&(L=6),w<0?(D=0,w=-w):15<w&&(D=2,w-=16),m<1||b<m||T!==g||w<8||15<w||L<0||9<L||E<0||d<E)return Q(r,f);w===8&&(w=9);var $=new ot;return(r.state=$).strm=r,$.wrap=D,$.gzhead=null,$.w_bits=w,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=m+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+A-1)/A),$.window=new t.Buf8(2*$.w_size),$.head=new t.Buf16($.hash_size),$.prev=new t.Buf16($.w_size),$.lit_bufsize=1<<m+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new t.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=L,$.strategy=E,$.method=T,mt(r)}n=[new it(0,0,0,0,function(r,L){var T=65535;for(T>r.pending_buf_size-5&&(T=r.pending_buf_size-5);;){if(r.lookahead<=1){if(nt(r),r.lookahead===0&&L===h)return a;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var w=r.block_start+T;if((r.strstart===0||r.strstart>=w)&&(r.lookahead=r.strstart-w,r.strstart=w,C(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-H&&(C(r,!1),r.strm.avail_out===0))return a}return r.insert=0,L===p?(C(r,!0),r.strm.avail_out===0?G:O):(r.strstart>r.block_start&&(C(r,!1),r.strm.avail_out),a)}),new it(4,4,8,4,lt),new it(4,5,16,8,lt),new it(4,6,32,32,lt),new it(4,4,16,16,tt),new it(8,16,32,32,tt),new it(8,16,128,128,tt),new it(8,32,128,256,tt),new it(32,128,258,1024,tt),new it(32,258,258,4096,tt)],e.deflateInit=function(r,L){return ft(r,L,g,15,8,0)},e.deflateInit2=ft,e.deflateReset=mt,e.deflateResetKeep=st,e.deflateSetHeader=function(r,L){return r&&r.state?r.state.wrap!==2?f:(r.state.gzhead=L,c):f},e.deflate=function(r,L){var T,w,m,E;if(!r||!r.state||5<L||L<0)return r?Q(r,f):f;if(w=r.state,!r.output||!r.input&&r.avail_in!==0||w.status===666&&L!==p)return Q(r,r.avail_out===0?-5:f);if(w.strm=r,T=w.last_flush,w.last_flush=L,w.status===_)if(w.wrap===2)r.adler=0,q(w,31),q(w,139),q(w,8),w.gzhead?(q(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),q(w,255&w.gzhead.time),q(w,w.gzhead.time>>8&255),q(w,w.gzhead.time>>16&255),q(w,w.gzhead.time>>24&255),q(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),q(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(q(w,255&w.gzhead.extra.length),q(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(r.adler=v(r.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(q(w,0),q(w,0),q(w,0),q(w,0),q(w,0),q(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),q(w,3),w.status=N);else{var D=g+(w.w_bits-8<<4)<<8;D|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(D|=32),D+=31-D%31,w.status=N,K(w,D),w.strstart!==0&&(K(w,r.adler>>>16),K(w,65535&r.adler)),r.adler=1}if(w.status===69)if(w.gzhead.extra){for(m=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>m&&(r.adler=v(r.adler,w.pending_buf,w.pending-m,m)),z(r),m=w.pending,w.pending!==w.pending_buf_size));)q(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>m&&(r.adler=v(r.adler,w.pending_buf,w.pending-m,m)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){m=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>m&&(r.adler=v(r.adler,w.pending_buf,w.pending-m,m)),z(r),m=w.pending,w.pending===w.pending_buf_size)){E=1;break}E=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,q(w,E)}while(E!==0);w.gzhead.hcrc&&w.pending>m&&(r.adler=v(r.adler,w.pending_buf,w.pending-m,m)),E===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){m=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>m&&(r.adler=v(r.adler,w.pending_buf,w.pending-m,m)),z(r),m=w.pending,w.pending===w.pending_buf_size)){E=1;break}E=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,q(w,E)}while(E!==0);w.gzhead.hcrc&&w.pending>m&&(r.adler=v(r.adler,w.pending_buf,w.pending-m,m)),E===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&z(r),w.pending+2<=w.pending_buf_size&&(q(w,255&r.adler),q(w,r.adler>>8&255),r.adler=0,w.status=N)):w.status=N),w.pending!==0){if(z(r),r.avail_out===0)return w.last_flush=-1,c}else if(r.avail_in===0&&W(L)<=W(T)&&L!==p)return Q(r,-5);if(w.status===666&&r.avail_in!==0)return Q(r,-5);if(r.avail_in!==0||w.lookahead!==0||L!==h&&w.status!==666){var $=w.strategy===2?function(I,Z){for(var Y;;){if(I.lookahead===0&&(nt(I),I.lookahead===0)){if(Z===h)return a;break}if(I.match_length=0,Y=i._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,Y&&(C(I,!1),I.strm.avail_out===0))return a}return I.insert=0,Z===p?(C(I,!0),I.strm.avail_out===0?G:O):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?a:B}(w,L):w.strategy===3?function(I,Z){for(var Y,j,V,rt,et=I.window;;){if(I.lookahead<=M){if(nt(I),I.lookahead<=M&&Z===h)return a;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=A&&0<I.strstart&&(j=et[V=I.strstart-1])===et[++V]&&j===et[++V]&&j===et[++V]){rt=I.strstart+M;do;while(j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&V<rt);I.match_length=M-(rt-V),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=A?(Y=i._tr_tally(I,1,I.match_length-A),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(Y=i._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),Y&&(C(I,!1),I.strm.avail_out===0))return a}return I.insert=0,Z===p?(C(I,!0),I.strm.avail_out===0?G:O):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?a:B}(w,L):n[w.level].func(w,L);if($!==G&&$!==O||(w.status=666),$===a||$===G)return r.avail_out===0&&(w.last_flush=-1),c;if($===B&&(L===1?i._tr_align(w):L!==5&&(i._tr_stored_block(w,0,0,!1),L===3&&(J(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),z(r),r.avail_out===0))return w.last_flush=-1,c}return L!==p?c:w.wrap<=0?1:(w.wrap===2?(q(w,255&r.adler),q(w,r.adler>>8&255),q(w,r.adler>>16&255),q(w,r.adler>>24&255),q(w,255&r.total_in),q(w,r.total_in>>8&255),q(w,r.total_in>>16&255),q(w,r.total_in>>24&255)):(K(w,r.adler>>>16),K(w,65535&r.adler)),z(r),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?c:1)},e.deflateEnd=function(r){var L;return r&&r.state?(L=r.state.status)!==_&&L!==69&&L!==73&&L!==91&&L!==103&&L!==N&&L!==666?Q(r,f):(r.state=null,L===N?Q(r,-3):c):f},e.deflateSetDictionary=function(r,L){var T,w,m,E,D,$,I,Z,Y=L.length;if(!r||!r.state||(E=(T=r.state).wrap)===2||E===1&&T.status!==_||T.lookahead)return f;for(E===1&&(r.adler=s(r.adler,L,Y,0)),T.wrap=0,Y>=T.w_size&&(E===0&&(J(T.head),T.strstart=0,T.block_start=0,T.insert=0),Z=new t.Buf8(T.w_size),t.arraySet(Z,L,Y-T.w_size,T.w_size,0),L=Z,Y=T.w_size),D=r.avail_in,$=r.next_in,I=r.input,r.avail_in=Y,r.next_in=0,r.input=L,nt(T);T.lookahead>=A;){for(w=T.strstart,m=T.lookahead-(A-1);T.ins_h=(T.ins_h<<T.hash_shift^T.window[w+A-1])&T.hash_mask,T.prev[w&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=w,w++,--m;);T.strstart=w,T.lookahead=A-1,nt(T)}return T.strstart+=T.lookahead,T.block_start=T.strstart,T.insert=T.lookahead,T.lookahead=0,T.match_length=T.prev_length=A-1,T.match_available=0,r.next_in=$,r.input=I,r.avail_in=D,T.wrap=E,c},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(S,o,e){"use strict";o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(S,o,e){"use strict";o.exports=function(n,t){var i,s,v,y,h,p,c,f,l,d,u,g,b,k,x,P,F,R,A,M,H,_,N,a,B;i=n.state,s=n.next_in,a=n.input,v=s+(n.avail_in-5),y=n.next_out,B=n.output,h=y-(t-n.avail_out),p=y+(n.avail_out-257),c=i.dmax,f=i.wsize,l=i.whave,d=i.wnext,u=i.window,g=i.hold,b=i.bits,k=i.lencode,x=i.distcode,P=(1<<i.lenbits)-1,F=(1<<i.distbits)-1;t:do{b<15&&(g+=a[s++]<<b,b+=8,g+=a[s++]<<b,b+=8),R=k[g&P];e:for(;;){if(g>>>=A=R>>>24,b-=A,(A=R>>>16&255)===0)B[y++]=65535&R;else{if(!(16&A)){if(!(64&A)){R=k[(65535&R)+(g&(1<<A)-1)];continue e}if(32&A){i.mode=12;break t}n.msg="invalid literal/length code",i.mode=30;break t}M=65535&R,(A&=15)&&(b<A&&(g+=a[s++]<<b,b+=8),M+=g&(1<<A)-1,g>>>=A,b-=A),b<15&&(g+=a[s++]<<b,b+=8,g+=a[s++]<<b,b+=8),R=x[g&F];i:for(;;){if(g>>>=A=R>>>24,b-=A,!(16&(A=R>>>16&255))){if(!(64&A)){R=x[(65535&R)+(g&(1<<A)-1)];continue i}n.msg="invalid distance code",i.mode=30;break t}if(H=65535&R,b<(A&=15)&&(g+=a[s++]<<b,(b+=8)<A&&(g+=a[s++]<<b,b+=8)),c<(H+=g&(1<<A)-1)){n.msg="invalid distance too far back",i.mode=30;break t}if(g>>>=A,b-=A,(A=y-h)<H){if(l<(A=H-A)&&i.sane){n.msg="invalid distance too far back",i.mode=30;break t}if(N=u,(_=0)===d){if(_+=f-A,A<M){for(M-=A;B[y++]=u[_++],--A;);_=y-H,N=B}}else if(d<A){if(_+=f+d-A,(A-=d)<M){for(M-=A;B[y++]=u[_++],--A;);if(_=0,d<M){for(M-=A=d;B[y++]=u[_++],--A;);_=y-H,N=B}}}else if(_+=d-A,A<M){for(M-=A;B[y++]=u[_++],--A;);_=y-H,N=B}for(;2<M;)B[y++]=N[_++],B[y++]=N[_++],B[y++]=N[_++],M-=3;M&&(B[y++]=N[_++],1<M&&(B[y++]=N[_++]))}else{for(_=y-H;B[y++]=B[_++],B[y++]=B[_++],B[y++]=B[_++],2<(M-=3););M&&(B[y++]=B[_++],1<M&&(B[y++]=B[_++]))}break}}break}}while(s<v&&y<p);s-=M=b>>3,g&=(1<<(b-=M<<3))-1,n.next_in=s,n.next_out=y,n.avail_in=s<v?v-s+5:5-(s-v),n.avail_out=y<p?p-y+257:257-(y-p),i.hold=g,i.bits=b}},{}],49:[function(S,o,e){"use strict";var n=S("../utils/common"),t=S("./adler32"),i=S("./crc32"),s=S("./inffast"),v=S("./inftrees"),y=1,h=2,p=0,c=-2,f=1,l=852,d=592;function u(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(_){var N;return _&&_.state?(N=_.state,_.total_in=_.total_out=N.total=0,_.msg="",N.wrap&&(_.adler=1&N.wrap),N.mode=f,N.last=0,N.havedict=0,N.dmax=32768,N.head=null,N.hold=0,N.bits=0,N.lencode=N.lendyn=new n.Buf32(l),N.distcode=N.distdyn=new n.Buf32(d),N.sane=1,N.back=-1,p):c}function k(_){var N;return _&&_.state?((N=_.state).wsize=0,N.whave=0,N.wnext=0,b(_)):c}function x(_,N){var a,B;return _&&_.state?(B=_.state,N<0?(a=0,N=-N):(a=1+(N>>4),N<48&&(N&=15)),N&&(N<8||15<N)?c:(B.window!==null&&B.wbits!==N&&(B.window=null),B.wrap=a,B.wbits=N,k(_))):c}function P(_,N){var a,B;return _?(B=new g,(_.state=B).window=null,(a=x(_,N))!==p&&(_.state=null),a):c}var F,R,A=!0;function M(_){if(A){var N;for(F=new n.Buf32(512),R=new n.Buf32(32),N=0;N<144;)_.lens[N++]=8;for(;N<256;)_.lens[N++]=9;for(;N<280;)_.lens[N++]=7;for(;N<288;)_.lens[N++]=8;for(v(y,_.lens,0,288,F,0,_.work,{bits:9}),N=0;N<32;)_.lens[N++]=5;v(h,_.lens,0,32,R,0,_.work,{bits:5}),A=!1}_.lencode=F,_.lenbits=9,_.distcode=R,_.distbits=5}function H(_,N,a,B){var G,O=_.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new n.Buf8(O.wsize)),B>=O.wsize?(n.arraySet(O.window,N,a-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(B<(G=O.wsize-O.wnext)&&(G=B),n.arraySet(O.window,N,a-B,G,O.wnext),(B-=G)?(n.arraySet(O.window,N,a-B,B,0),O.wnext=B,O.whave=O.wsize):(O.wnext+=G,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=G))),0}e.inflateReset=k,e.inflateReset2=x,e.inflateResetKeep=b,e.inflateInit=function(_){return P(_,15)},e.inflateInit2=P,e.inflate=function(_,N){var a,B,G,O,Q,W,J,z,C,q,K,U,nt,lt,tt,it,ot,st,mt,ft,r,L,T,w,m=0,E=new n.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return c;(a=_.state).mode===12&&(a.mode=13),Q=_.next_out,G=_.output,J=_.avail_out,O=_.next_in,B=_.input,W=_.avail_in,z=a.hold,C=a.bits,q=W,K=J,L=p;t:for(;;)switch(a.mode){case f:if(a.wrap===0){a.mode=13;break}for(;C<16;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(2&a.wrap&&z===35615){E[a.check=0]=255&z,E[1]=z>>>8&255,a.check=i(a.check,E,2,0),C=z=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&z)<<8)+(z>>8))%31){_.msg="incorrect header check",a.mode=30;break}if((15&z)!=8){_.msg="unknown compression method",a.mode=30;break}if(C-=4,r=8+(15&(z>>>=4)),a.wbits===0)a.wbits=r;else if(r>a.wbits){_.msg="invalid window size",a.mode=30;break}a.dmax=1<<r,_.adler=a.check=1,a.mode=512&z?10:12,C=z=0;break;case 2:for(;C<16;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(a.flags=z,(255&a.flags)!=8){_.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){_.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=z>>8&1),512&a.flags&&(E[0]=255&z,E[1]=z>>>8&255,a.check=i(a.check,E,2,0)),C=z=0,a.mode=3;case 3:for(;C<32;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}a.head&&(a.head.time=z),512&a.flags&&(E[0]=255&z,E[1]=z>>>8&255,E[2]=z>>>16&255,E[3]=z>>>24&255,a.check=i(a.check,E,4,0)),C=z=0,a.mode=4;case 4:for(;C<16;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}a.head&&(a.head.xflags=255&z,a.head.os=z>>8),512&a.flags&&(E[0]=255&z,E[1]=z>>>8&255,a.check=i(a.check,E,2,0)),C=z=0,a.mode=5;case 5:if(1024&a.flags){for(;C<16;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}a.length=z,a.head&&(a.head.extra_len=z),512&a.flags&&(E[0]=255&z,E[1]=z>>>8&255,a.check=i(a.check,E,2,0)),C=z=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(W<(U=a.length)&&(U=W),U&&(a.head&&(r=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),n.arraySet(a.head.extra,B,O,U,r)),512&a.flags&&(a.check=i(a.check,B,U,O)),W-=U,O+=U,a.length-=U),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(W===0)break t;for(U=0;r=B[O+U++],a.head&&r&&a.length<65536&&(a.head.name+=String.fromCharCode(r)),r&&U<W;);if(512&a.flags&&(a.check=i(a.check,B,U,O)),W-=U,O+=U,r)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(W===0)break t;for(U=0;r=B[O+U++],a.head&&r&&a.length<65536&&(a.head.comment+=String.fromCharCode(r)),r&&U<W;);if(512&a.flags&&(a.check=i(a.check,B,U,O)),W-=U,O+=U,r)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;C<16;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(z!==(65535&a.check)){_.msg="header crc mismatch",a.mode=30;break}C=z=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),_.adler=a.check=0,a.mode=12;break;case 10:for(;C<32;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}_.adler=a.check=u(z),C=z=0,a.mode=11;case 11:if(a.havedict===0)return _.next_out=Q,_.avail_out=J,_.next_in=O,_.avail_in=W,a.hold=z,a.bits=C,2;_.adler=a.check=1,a.mode=12;case 12:if(N===5||N===6)break t;case 13:if(a.last){z>>>=7&C,C-=7&C,a.mode=27;break}for(;C<3;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}switch(a.last=1&z,C-=1,3&(z>>>=1)){case 0:a.mode=14;break;case 1:if(M(a),a.mode=20,N!==6)break;z>>>=2,C-=2;break t;case 2:a.mode=17;break;case 3:_.msg="invalid block type",a.mode=30}z>>>=2,C-=2;break;case 14:for(z>>>=7&C,C-=7&C;C<32;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if((65535&z)!=(z>>>16^65535)){_.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&z,C=z=0,a.mode=15,N===6)break t;case 15:a.mode=16;case 16:if(U=a.length){if(W<U&&(U=W),J<U&&(U=J),U===0)break t;n.arraySet(G,B,O,U,Q),W-=U,O+=U,J-=U,Q+=U,a.length-=U;break}a.mode=12;break;case 17:for(;C<14;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(a.nlen=257+(31&z),z>>>=5,C-=5,a.ndist=1+(31&z),z>>>=5,C-=5,a.ncode=4+(15&z),z>>>=4,C-=4,286<a.nlen||30<a.ndist){_.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;C<3;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}a.lens[D[a.have++]]=7&z,z>>>=3,C-=3}for(;a.have<19;)a.lens[D[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,T={bits:a.lenbits},L=v(0,a.lens,0,19,a.lencode,0,a.work,T),a.lenbits=T.bits,L){_.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;it=(m=a.lencode[z&(1<<a.lenbits)-1])>>>16&255,ot=65535&m,!((tt=m>>>24)<=C);){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(ot<16)z>>>=tt,C-=tt,a.lens[a.have++]=ot;else{if(ot===16){for(w=tt+2;C<w;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(z>>>=tt,C-=tt,a.have===0){_.msg="invalid bit length repeat",a.mode=30;break}r=a.lens[a.have-1],U=3+(3&z),z>>>=2,C-=2}else if(ot===17){for(w=tt+3;C<w;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}C-=tt,r=0,U=3+(7&(z>>>=tt)),z>>>=3,C-=3}else{for(w=tt+7;C<w;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}C-=tt,r=0,U=11+(127&(z>>>=tt)),z>>>=7,C-=7}if(a.have+U>a.nlen+a.ndist){_.msg="invalid bit length repeat",a.mode=30;break}for(;U--;)a.lens[a.have++]=r}}if(a.mode===30)break;if(a.lens[256]===0){_.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,T={bits:a.lenbits},L=v(y,a.lens,0,a.nlen,a.lencode,0,a.work,T),a.lenbits=T.bits,L){_.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,T={bits:a.distbits},L=v(h,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,T),a.distbits=T.bits,L){_.msg="invalid distances set",a.mode=30;break}if(a.mode=20,N===6)break t;case 20:a.mode=21;case 21:if(6<=W&&258<=J){_.next_out=Q,_.avail_out=J,_.next_in=O,_.avail_in=W,a.hold=z,a.bits=C,s(_,K),Q=_.next_out,G=_.output,J=_.avail_out,O=_.next_in,B=_.input,W=_.avail_in,z=a.hold,C=a.bits,a.mode===12&&(a.back=-1);break}for(a.back=0;it=(m=a.lencode[z&(1<<a.lenbits)-1])>>>16&255,ot=65535&m,!((tt=m>>>24)<=C);){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(it&&!(240&it)){for(st=tt,mt=it,ft=ot;it=(m=a.lencode[ft+((z&(1<<st+mt)-1)>>st)])>>>16&255,ot=65535&m,!(st+(tt=m>>>24)<=C);){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}z>>>=st,C-=st,a.back+=st}if(z>>>=tt,C-=tt,a.back+=tt,a.length=ot,it===0){a.mode=26;break}if(32&it){a.back=-1,a.mode=12;break}if(64&it){_.msg="invalid literal/length code",a.mode=30;break}a.extra=15&it,a.mode=22;case 22:if(a.extra){for(w=a.extra;C<w;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}a.length+=z&(1<<a.extra)-1,z>>>=a.extra,C-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;it=(m=a.distcode[z&(1<<a.distbits)-1])>>>16&255,ot=65535&m,!((tt=m>>>24)<=C);){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(!(240&it)){for(st=tt,mt=it,ft=ot;it=(m=a.distcode[ft+((z&(1<<st+mt)-1)>>st)])>>>16&255,ot=65535&m,!(st+(tt=m>>>24)<=C);){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}z>>>=st,C-=st,a.back+=st}if(z>>>=tt,C-=tt,a.back+=tt,64&it){_.msg="invalid distance code",a.mode=30;break}a.offset=ot,a.extra=15&it,a.mode=24;case 24:if(a.extra){for(w=a.extra;C<w;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}a.offset+=z&(1<<a.extra)-1,z>>>=a.extra,C-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){_.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(J===0)break t;if(U=K-J,a.offset>U){if((U=a.offset-U)>a.whave&&a.sane){_.msg="invalid distance too far back",a.mode=30;break}nt=U>a.wnext?(U-=a.wnext,a.wsize-U):a.wnext-U,U>a.length&&(U=a.length),lt=a.window}else lt=G,nt=Q-a.offset,U=a.length;for(J<U&&(U=J),J-=U,a.length-=U;G[Q++]=lt[nt++],--U;);a.length===0&&(a.mode=21);break;case 26:if(J===0)break t;G[Q++]=a.length,J--,a.mode=21;break;case 27:if(a.wrap){for(;C<32;){if(W===0)break t;W--,z|=B[O++]<<C,C+=8}if(K-=J,_.total_out+=K,a.total+=K,K&&(_.adler=a.check=a.flags?i(a.check,G,K,Q-K):t(a.check,G,K,Q-K)),K=J,(a.flags?z:u(z))!==a.check){_.msg="incorrect data check",a.mode=30;break}C=z=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;C<32;){if(W===0)break t;W--,z+=B[O++]<<C,C+=8}if(z!==(4294967295&a.total)){_.msg="incorrect length check",a.mode=30;break}C=z=0}a.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return c}return _.next_out=Q,_.avail_out=J,_.next_in=O,_.avail_in=W,a.hold=z,a.bits=C,(a.wsize||K!==_.avail_out&&a.mode<30&&(a.mode<27||N!==4))&&H(_,_.output,_.next_out,K-_.avail_out)?(a.mode=31,-4):(q-=_.avail_in,K-=_.avail_out,_.total_in+=q,_.total_out+=K,a.total+=K,a.wrap&&K&&(_.adler=a.check=a.flags?i(a.check,G,K,_.next_out-K):t(a.check,G,K,_.next_out-K)),_.data_type=a.bits+(a.last?64:0)+(a.mode===12?128:0)+(a.mode===20||a.mode===15?256:0),(q==0&&K===0||N===4)&&L===p&&(L=-5),L)},e.inflateEnd=function(_){if(!_||!_.state)return c;var N=_.state;return N.window&&(N.window=null),_.state=null,p},e.inflateGetHeader=function(_,N){var a;return _&&_.state&&2&(a=_.state).wrap?((a.head=N).done=!1,p):c},e.inflateSetDictionary=function(_,N){var a,B=N.length;return _&&_.state?(a=_.state).wrap!==0&&a.mode!==11?c:a.mode===11&&t(1,N,B,0)!==a.check?-3:H(_,N,B,B)?(a.mode=31,-4):(a.havedict=1,p):c},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(S,o,e){"use strict";var n=S("../utils/common"),t=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(y,h,p,c,f,l,d,u){var g,b,k,x,P,F,R,A,M,H=u.bits,_=0,N=0,a=0,B=0,G=0,O=0,Q=0,W=0,J=0,z=0,C=null,q=0,K=new n.Buf16(16),U=new n.Buf16(16),nt=null,lt=0;for(_=0;_<=15;_++)K[_]=0;for(N=0;N<c;N++)K[h[p+N]]++;for(G=H,B=15;1<=B&&K[B]===0;B--);if(B<G&&(G=B),B===0)return f[l++]=20971520,f[l++]=20971520,u.bits=1,0;for(a=1;a<B&&K[a]===0;a++);for(G<a&&(G=a),_=W=1;_<=15;_++)if(W<<=1,(W-=K[_])<0)return-1;if(0<W&&(y===0||B!==1))return-1;for(U[1]=0,_=1;_<15;_++)U[_+1]=U[_]+K[_];for(N=0;N<c;N++)h[p+N]!==0&&(d[U[h[p+N]]++]=N);if(F=y===0?(C=nt=d,19):y===1?(C=t,q-=257,nt=i,lt-=257,256):(C=s,nt=v,-1),_=a,P=l,Q=N=z=0,k=-1,x=(J=1<<(O=G))-1,y===1&&852<J||y===2&&592<J)return 1;for(;;){for(R=_-Q,M=d[N]<F?(A=0,d[N]):d[N]>F?(A=nt[lt+d[N]],C[q+d[N]]):(A=96,0),g=1<<_-Q,a=b=1<<O;f[P+(z>>Q)+(b-=g)]=R<<24|A<<16|M|0,b!==0;);for(g=1<<_-1;z&g;)g>>=1;if(g!==0?(z&=g-1,z+=g):z=0,N++,--K[_]==0){if(_===B)break;_=h[p+d[N]]}if(G<_&&(z&x)!==k){for(Q===0&&(Q=G),P+=a,W=1<<(O=_-Q);O+Q<B&&!((W-=K[O+Q])<=0);)O++,W<<=1;if(J+=1<<O,y===1&&852<J||y===2&&592<J)return 1;f[k=z&x]=G<<24|O<<16|P-l|0}}return z!==0&&(f[P+z]=_-Q<<24|64<<16|0),u.bits=G,0}},{"../utils/common":41}],51:[function(S,o,e){"use strict";o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(S,o,e){"use strict";var n=S("../utils/common"),t=0,i=1;function s(m){for(var E=m.length;0<=--E;)m[E]=0}var v=0,y=29,h=256,p=h+1+y,c=30,f=19,l=2*p+1,d=15,u=16,g=7,b=256,k=16,x=17,P=18,F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(p+2));s(H);var _=new Array(2*c);s(_);var N=new Array(512);s(N);var a=new Array(256);s(a);var B=new Array(y);s(B);var G,O,Q,W=new Array(c);function J(m,E,D,$,I){this.static_tree=m,this.extra_bits=E,this.extra_base=D,this.elems=$,this.max_length=I,this.has_stree=m&&m.length}function z(m,E){this.dyn_tree=m,this.max_code=0,this.stat_desc=E}function C(m){return m<256?N[m]:N[256+(m>>>7)]}function q(m,E){m.pending_buf[m.pending++]=255&E,m.pending_buf[m.pending++]=E>>>8&255}function K(m,E,D){m.bi_valid>u-D?(m.bi_buf|=E<<m.bi_valid&65535,q(m,m.bi_buf),m.bi_buf=E>>u-m.bi_valid,m.bi_valid+=D-u):(m.bi_buf|=E<<m.bi_valid&65535,m.bi_valid+=D)}function U(m,E,D){K(m,D[2*E],D[2*E+1])}function nt(m,E){for(var D=0;D|=1&m,m>>>=1,D<<=1,0<--E;);return D>>>1}function lt(m,E,D){var $,I,Z=new Array(d+1),Y=0;for($=1;$<=d;$++)Z[$]=Y=Y+D[$-1]<<1;for(I=0;I<=E;I++){var j=m[2*I+1];j!==0&&(m[2*I]=nt(Z[j]++,j))}}function tt(m){var E;for(E=0;E<p;E++)m.dyn_ltree[2*E]=0;for(E=0;E<c;E++)m.dyn_dtree[2*E]=0;for(E=0;E<f;E++)m.bl_tree[2*E]=0;m.dyn_ltree[2*b]=1,m.opt_len=m.static_len=0,m.last_lit=m.matches=0}function it(m){8<m.bi_valid?q(m,m.bi_buf):0<m.bi_valid&&(m.pending_buf[m.pending++]=m.bi_buf),m.bi_buf=0,m.bi_valid=0}function ot(m,E,D,$){var I=2*E,Z=2*D;return m[I]<m[Z]||m[I]===m[Z]&&$[E]<=$[D]}function st(m,E,D){for(var $=m.heap[D],I=D<<1;I<=m.heap_len&&(I<m.heap_len&&ot(E,m.heap[I+1],m.heap[I],m.depth)&&I++,!ot(E,$,m.heap[I],m.depth));)m.heap[D]=m.heap[I],D=I,I<<=1;m.heap[D]=$}function mt(m,E,D){var $,I,Z,Y,j=0;if(m.last_lit!==0)for(;$=m.pending_buf[m.d_buf+2*j]<<8|m.pending_buf[m.d_buf+2*j+1],I=m.pending_buf[m.l_buf+j],j++,$===0?U(m,I,E):(U(m,(Z=a[I])+h+1,E),(Y=F[Z])!==0&&K(m,I-=B[Z],Y),U(m,Z=C(--$),D),(Y=R[Z])!==0&&K(m,$-=W[Z],Y)),j<m.last_lit;);U(m,b,E)}function ft(m,E){var D,$,I,Z=E.dyn_tree,Y=E.stat_desc.static_tree,j=E.stat_desc.has_stree,V=E.stat_desc.elems,rt=-1;for(m.heap_len=0,m.heap_max=l,D=0;D<V;D++)Z[2*D]!==0?(m.heap[++m.heap_len]=rt=D,m.depth[D]=0):Z[2*D+1]=0;for(;m.heap_len<2;)Z[2*(I=m.heap[++m.heap_len]=rt<2?++rt:0)]=1,m.depth[I]=0,m.opt_len--,j&&(m.static_len-=Y[2*I+1]);for(E.max_code=rt,D=m.heap_len>>1;1<=D;D--)st(m,Z,D);for(I=V;D=m.heap[1],m.heap[1]=m.heap[m.heap_len--],st(m,Z,1),$=m.heap[1],m.heap[--m.heap_max]=D,m.heap[--m.heap_max]=$,Z[2*I]=Z[2*D]+Z[2*$],m.depth[I]=(m.depth[D]>=m.depth[$]?m.depth[D]:m.depth[$])+1,Z[2*D+1]=Z[2*$+1]=I,m.heap[1]=I++,st(m,Z,1),2<=m.heap_len;);m.heap[--m.heap_max]=m.heap[1],function(et,dt){var At,vt,zt,at,Bt,Ht,wt=dt.dyn_tree,Xt=dt.max_code,ne=dt.stat_desc.static_tree,se=dt.stat_desc.has_stree,ae=dt.stat_desc.extra_bits,Jt=dt.stat_desc.extra_base,Tt=dt.stat_desc.max_length,Lt=0;for(at=0;at<=d;at++)et.bl_count[at]=0;for(wt[2*et.heap[et.heap_max]+1]=0,At=et.heap_max+1;At<l;At++)Tt<(at=wt[2*wt[2*(vt=et.heap[At])+1]+1]+1)&&(at=Tt,Lt++),wt[2*vt+1]=at,Xt<vt||(et.bl_count[at]++,Bt=0,Jt<=vt&&(Bt=ae[vt-Jt]),Ht=wt[2*vt],et.opt_len+=Ht*(at+Bt),se&&(et.static_len+=Ht*(ne[2*vt+1]+Bt)));if(Lt!==0){do{for(at=Tt-1;et.bl_count[at]===0;)at--;et.bl_count[at]--,et.bl_count[at+1]+=2,et.bl_count[Tt]--,Lt-=2}while(0<Lt);for(at=Tt;at!==0;at--)for(vt=et.bl_count[at];vt!==0;)Xt<(zt=et.heap[--At])||(wt[2*zt+1]!==at&&(et.opt_len+=(at-wt[2*zt+1])*wt[2*zt],wt[2*zt+1]=at),vt--)}}(m,E),lt(Z,rt,m.bl_count)}function r(m,E,D){var $,I,Z=-1,Y=E[1],j=0,V=7,rt=4;for(Y===0&&(V=138,rt=3),E[2*(D+1)+1]=65535,$=0;$<=D;$++)I=Y,Y=E[2*($+1)+1],++j<V&&I===Y||(j<rt?m.bl_tree[2*I]+=j:I!==0?(I!==Z&&m.bl_tree[2*I]++,m.bl_tree[2*k]++):j<=10?m.bl_tree[2*x]++:m.bl_tree[2*P]++,Z=I,rt=(j=0)===Y?(V=138,3):I===Y?(V=6,3):(V=7,4))}function L(m,E,D){var $,I,Z=-1,Y=E[1],j=0,V=7,rt=4;for(Y===0&&(V=138,rt=3),$=0;$<=D;$++)if(I=Y,Y=E[2*($+1)+1],!(++j<V&&I===Y)){if(j<rt)for(;U(m,I,m.bl_tree),--j!=0;);else I!==0?(I!==Z&&(U(m,I,m.bl_tree),j--),U(m,k,m.bl_tree),K(m,j-3,2)):j<=10?(U(m,x,m.bl_tree),K(m,j-3,3)):(U(m,P,m.bl_tree),K(m,j-11,7));Z=I,rt=(j=0)===Y?(V=138,3):I===Y?(V=6,3):(V=7,4)}}s(W);var T=!1;function w(m,E,D,$){K(m,(v<<1)+($?1:0),3),function(I,Z,Y,j){it(I),j&&(q(I,Y),q(I,~Y)),n.arraySet(I.pending_buf,I.window,Z,Y,I.pending),I.pending+=Y}(m,E,D,!0)}e._tr_init=function(m){T||(function(){var E,D,$,I,Z,Y=new Array(d+1);for(I=$=0;I<y-1;I++)for(B[I]=$,E=0;E<1<<F[I];E++)a[$++]=I;for(a[$-1]=I,I=Z=0;I<16;I++)for(W[I]=Z,E=0;E<1<<R[I];E++)N[Z++]=I;for(Z>>=7;I<c;I++)for(W[I]=Z<<7,E=0;E<1<<R[I]-7;E++)N[256+Z++]=I;for(D=0;D<=d;D++)Y[D]=0;for(E=0;E<=143;)H[2*E+1]=8,E++,Y[8]++;for(;E<=255;)H[2*E+1]=9,E++,Y[9]++;for(;E<=279;)H[2*E+1]=7,E++,Y[7]++;for(;E<=287;)H[2*E+1]=8,E++,Y[8]++;for(lt(H,p+1,Y),E=0;E<c;E++)_[2*E+1]=5,_[2*E]=nt(E,5);G=new J(H,F,h+1,p,d),O=new J(_,R,0,c,d),Q=new J(new Array(0),A,0,f,g)}(),T=!0),m.l_desc=new z(m.dyn_ltree,G),m.d_desc=new z(m.dyn_dtree,O),m.bl_desc=new z(m.bl_tree,Q),m.bi_buf=0,m.bi_valid=0,tt(m)},e._tr_stored_block=w,e._tr_flush_block=function(m,E,D,$){var I,Z,Y=0;0<m.level?(m.strm.data_type===2&&(m.strm.data_type=function(j){var V,rt=4093624447;for(V=0;V<=31;V++,rt>>>=1)if(1&rt&&j.dyn_ltree[2*V]!==0)return t;if(j.dyn_ltree[18]!==0||j.dyn_ltree[20]!==0||j.dyn_ltree[26]!==0)return i;for(V=32;V<h;V++)if(j.dyn_ltree[2*V]!==0)return i;return t}(m)),ft(m,m.l_desc),ft(m,m.d_desc),Y=function(j){var V;for(r(j,j.dyn_ltree,j.l_desc.max_code),r(j,j.dyn_dtree,j.d_desc.max_code),ft(j,j.bl_desc),V=f-1;3<=V&&j.bl_tree[2*M[V]+1]===0;V--);return j.opt_len+=3*(V+1)+5+5+4,V}(m),I=m.opt_len+3+7>>>3,(Z=m.static_len+3+7>>>3)<=I&&(I=Z)):I=Z=D+5,D+4<=I&&E!==-1?w(m,E,D,$):m.strategy===4||Z===I?(K(m,2+($?1:0),3),mt(m,H,_)):(K(m,4+($?1:0),3),function(j,V,rt,et){var dt;for(K(j,V-257,5),K(j,rt-1,5),K(j,et-4,4),dt=0;dt<et;dt++)K(j,j.bl_tree[2*M[dt]+1],3);L(j,j.dyn_ltree,V-1),L(j,j.dyn_dtree,rt-1)}(m,m.l_desc.max_code+1,m.d_desc.max_code+1,Y+1),mt(m,m.dyn_ltree,m.dyn_dtree)),tt(m),$&&it(m)},e._tr_tally=function(m,E,D){return m.pending_buf[m.d_buf+2*m.last_lit]=E>>>8&255,m.pending_buf[m.d_buf+2*m.last_lit+1]=255&E,m.pending_buf[m.l_buf+m.last_lit]=255&D,m.last_lit++,E===0?m.dyn_ltree[2*D]++:(m.matches++,E--,m.dyn_ltree[2*(a[D]+h+1)]++,m.dyn_dtree[2*C(E)]++),m.last_lit===m.lit_bufsize-1},e._tr_align=function(m){K(m,2,3),U(m,b,H),function(E){E.bi_valid===16?(q(E,E.bi_buf),E.bi_buf=0,E.bi_valid=0):8<=E.bi_valid&&(E.pending_buf[E.pending++]=255&E.bi_buf,E.bi_buf>>=8,E.bi_valid-=8)}(m)}},{"../utils/common":41}],53:[function(S,o,e){"use strict";o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(S,o,e){(function(n){(function(t,i){"use strict";if(!t.setImmediate){var s,v,y,h,p=1,c={},f=!1,l=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,s={}.toString.call(t.process)==="[object process]"?function(k){process.nextTick(function(){g(k)})}:function(){if(t.postMessage&&!t.importScripts){var k=!0,x=t.onmessage;return t.onmessage=function(){k=!1},t.postMessage("","*"),t.onmessage=x,k}}()?(h="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",b,!1):t.attachEvent("onmessage",b),function(k){t.postMessage(h+k,"*")}):t.MessageChannel?((y=new MessageChannel).port1.onmessage=function(k){g(k.data)},function(k){y.port2.postMessage(k)}):l&&"onreadystatechange"in l.createElement("script")?(v=l.documentElement,function(k){var x=l.createElement("script");x.onreadystatechange=function(){g(k),x.onreadystatechange=null,v.removeChild(x),x=null},v.appendChild(x)}):function(k){setTimeout(g,0,k)},d.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var x=new Array(arguments.length-1),P=0;P<x.length;P++)x[P]=arguments[P+1];var F={callback:k,args:x};return c[p]=F,s(p),p++},d.clearImmediate=u}function u(k){delete c[k]}function g(k){if(f)setTimeout(g,0,k);else{var x=c[k];if(x){f=!0;try{(function(P){var F=P.callback,R=P.args;switch(R.length){case 0:F();break;case 1:F(R[0]);break;case 2:F(R[0],R[1]);break;case 3:F(R[0],R[1],R[2]);break;default:F.apply(i,R)}})(x)}finally{u(k),f=!1}}}}function b(k){k.source===t&&typeof k.data=="string"&&k.data.indexOf(h)===0&&g(+k.data.slice(h.length))}})(typeof self=="undefined"?n===void 0?this:n:self)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})});var ve={};pe(ve,{default:()=>Yt});module.exports=fe(ve);var ht=require("obsidian");var ct={watchedFolderPath:"",notesFolderPath:"KrispNotes/Notes",attachmentsFolderPath:"KrispNotes/Attachments",noteNameTemplate:"{{YYYY}}-{{MM}}-{{DD}}_{{HHMM}}_{{meetingTitle}}",attachmentNameTemplate:"{{YYYY}}-{{MM}}-{{DD}}_{{meetingTitle}}_audio",noteContentTemplate:`---
title: {{meetingTitle}}
date: {{date}}
time: {{time}}
type: meeting
source: krisp
tags:
{{yamlTags}}
  - meeting
  - krisp
audio: "{{audioPathForYaml}}"
participants: [{{participants}}]
duration: {{duration}}
meeting_stats:
  participants_count: {{participantsCount}}
  transcript_length: {{transcriptWords}}
  most_active_speaker: "{{mostActiveSpeaker}}"
---

# \u{1F399}\uFE0F {{meetingTitle}}

> [!info]+ \u{1F4CB} \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0432\u0441\u0442\u0440\u0435\u0447\u0435
>
> **\u{1F4C5} \u0414\u0430\u0442\u0430:** {{date}}
> **\u23F0 \u0412\u0440\u0435\u043C\u044F:** {{time}}
> **\u23F1\uFE0F \u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C:** {{duration}}
> **\u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438:** {{participantsCount}} \u0447\u0435\u043B\u043E\u0432\u0435\u043A
> **\u{1F4CA} \u0421\u043B\u043E\u0432 \u0432 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442\u0435:** {{transcriptWords}}
> **\u{1F5E3}\uFE0F \u0421\u0430\u043C\u044B\u0439 \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439:** {{mostActiveSpeaker}}

---

## \u{1F3A7} \u0410\u0443\u0434\u0438\u043E\u0437\u0430\u043F\u0438\u0441\u044C

![[{{audioPathForYaml}}]]

*\u0414\u043B\u044F \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u044B\u0439 \u043F\u043B\u0435\u0435\u0440 Obsidian \u0438\u043B\u0438 \u043E\u0442\u043A\u0440\u043E\u0439\u0442\u0435 \u0444\u0430\u0439\u043B: [[{{audioPathForYaml}}]]*

---

## \u{1F4DD} \u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435

> [!note]+ \u{1F4A1} \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B \u0432\u0441\u0442\u0440\u0435\u0447\u0438
>
> {{summary}}

---

## \u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438 \u0432\u0441\u0442\u0440\u0435\u0447\u0438

{{participantsList}}

### \u{1F4C8} \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438

{{participantsStats}}

---

## \u2705 \u0417\u0430\u0434\u0430\u0447\u0438 \u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F

> [!todo]+ \u{1F4CB} Action Items
>
> {{actionItemsList}}

---

## \u{1F511} \u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B

> [!important]+ \u2B50 Key Points
>
> {{keyPointsList}}

---

## \u{1F3F7}\uFE0F \u0418\u0437\u0432\u043B\u0435\u0447\u0435\u043D\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F

{{extractedEntities}}

---

## \u{1F4CB} \u041F\u043E\u043B\u043D\u0430\u044F \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0446\u0438\u044F

> [!quote]- \u{1F399}\uFE0F \u0422\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u0432\u0441\u0442\u0440\u0435\u0447\u0438 ({{transcriptWords}} \u0441\u043B\u043E\u0432)
>
> {{formattedTranscript}}

---

## \u{1F517} \u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B

- \u{1F4C4} **\u0417\u0430\u043C\u0435\u0442\u043A\u0430:** [[{{noteFileName}}]]
- \u{1F3B5} **\u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B:** [[{{audioPathForYaml}}]]

{{relatedLinks}}

---

## \u{1F4CA} \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0432\u0441\u0442\u0440\u0435\u0447\u0438

| \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440 | \u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 |
|----------|----------|
| \u{1F4C5} \u0414\u0430\u0442\u0430 | {{date}} |
| \u23F0 \u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430 | {{time}} |
| \u23F1\uFE0F \u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C | {{duration}} |
| \u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432 | {{participantsCount}} |
| \u{1F4DD} \u0421\u043B\u043E\u0432 \u0432 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442\u0435 | {{transcriptWords}} |
| \u{1F5E3}\uFE0F \u0421\u0430\u043C\u044B\u0439 \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 | {{mostActiveSpeaker}} |

---

> [!tip]+ \u{1F916} \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0438\u043C\u043F\u043E\u0440\u0442\u0435
>
> **\u0421\u043E\u0437\u0434\u0430\u043D\u043E:** Krisp Notes Importer
> **\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043E:** {{importDate}}
> **\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A:** Krisp Meeting Archive
`,duplicateStrategy:"rename",deleteZipAfterImport:!1,openNoteAfterImport:!0,autoScanEnabled:!1,language:"en"};var Ot=class{constructor(o){this.plugin=o}async loadSettings(){this.settings=Object.assign({},ct,await this.plugin.loadData())}async saveSettings(){await this.plugin.saveData(this.settings)}getSetting(o){return this.settings?this.settings[o]:ct[o]}getAllSettings(){return this.settings||ct}async updateSetting(o,e){this.settings||await this.loadSettings(),this.settings[o]=e,await this.saveSettings()}validateSettings(){let o=[];return(!this.settings.watchedFolderPath||this.settings.watchedFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.notesFolderPath||this.settings.notesFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435 \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.attachmentsFolderPath||this.settings.attachmentsFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435 \u0432\u043B\u043E\u0436\u0435\u043D\u0438\u0439 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.noteNameTemplate||this.settings.noteNameTemplate.trim()==="")&&o.push("Note name template cannot be empty"),(!this.settings.attachmentNameTemplate||this.settings.attachmentNameTemplate.trim()==="")&&o.push("Audio name template cannot be empty"),["skip","overwrite","rename"].includes(this.settings.duplicateStrategy)||o.push(`\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u0430\u044F \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432: ${this.settings.duplicateStrategy}`),["en","ru"].includes(this.settings.language)||o.push(`\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 \u044F\u0437\u044B\u043A: ${this.settings.language}`),{isValid:o.length===0,errors:o}}getValidatedSettings(){let o=this.validateSettings();return o.isValid?this.settings:(console.warn("[Krisp Importer] Settings contain errors:",o.errors),this.getSettingsWithDefaults())}getSettingsWithDefaults(){var o,e,n,t,i;return{...ct,...this.settings,watchedFolderPath:((o=this.settings.watchedFolderPath)==null?void 0:o.trim())||ct.watchedFolderPath,notesFolderPath:((e=this.settings.notesFolderPath)==null?void 0:e.trim())||ct.notesFolderPath,attachmentsFolderPath:((n=this.settings.attachmentsFolderPath)==null?void 0:n.trim())||ct.attachmentsFolderPath,noteNameTemplate:((t=this.settings.noteNameTemplate)==null?void 0:t.trim())||ct.noteNameTemplate,attachmentNameTemplate:((i=this.settings.attachmentNameTemplate)==null?void 0:i.trim())||ct.attachmentNameTemplate,duplicateStrategy:["skip","overwrite","rename"].includes(this.settings.duplicateStrategy)?this.settings.duplicateStrategy:ct.duplicateStrategy,language:["en","ru"].includes(this.settings.language)?this.settings.language:ct.language}}};var X=require("obsidian");var ge={settings:{title:"Krisp Notes Importer Settings",sections:{basic:"\u{1F527} Basic Settings",storage:"\u{1F4BE} Obsidian Storage",templates:"\u{1F4DD} Templates & Naming",duplicates:"\u{1F504} Duplicate Handling",postImport:"\u26A1 Post-Import Actions",advanced:"\u{1F6E0}\uFE0F Advanced & Maintenance"},fields:{watchedFolder:{name:"Watched Folder Path",desc:"Full path to the folder where Krisp saves ZIP archives"},autoScan:{name:"Enable Auto-Watching",desc:"Automatically monitor the folder for new ZIP files"},notesFolder:{name:"Notes Folder",desc:"Folder in your Obsidian vault for saving meeting notes"},attachmentsFolder:{name:"Attachments Folder",desc:"Folder in your Obsidian vault for saving audio files"},noteNameTemplate:{name:"Note Name Template",desc:"Template for naming note files. Available variables: {{YYYY}}, {{MM}}, {{DD}}, {{HHMM}}, {{meetingTitle}}"},attachmentNameTemplate:{name:"Audio Name Template",desc:"Template for naming audio files. Same variables available"},noteContentTemplate:{name:"Note Content Template",desc:"Template for note content. Available variables: {{title}}, {{date}}, {{time}}, {{participants}}, {{summary}}, {{actionItems}}, {{keyPoints}}, {{transcript}}, {{audioLink}}"},duplicateStrategy:{name:"Duplicate Strategy",desc:"What to do when a meeting with the same name already exists",options:{skip:"Skip import",overwrite:"Overwrite existing",rename:"Create with suffix"}},deleteZipAfterImport:{name:"Delete ZIP after import",desc:"Automatically delete the ZIP file after successful import"},openNoteAfterImport:{name:"Open note after import",desc:"Automatically open the created note in Obsidian"},language:{name:"Interface Language",desc:"Choose the language for the plugin interface"}},buttons:{testImport:"Test Import",massImport:"Import All Files",resetSettings:"Reset Settings",showLogs:"Show Logs",restoreTemplate:"Restore Default Template"},info:{title:"Plugin Information",version:"Version",status:"Status",features:["\u2705 Manual ZIP import","\u2705 Automatic folder watching","\u2705 Beautiful note formatting with callouts","\u2705 Advanced participant analytics","\u2705 Complete UI settings","\u2705 Logging and diagnostic system","\u2705 Bilingual support (English/Russian)"],commands:["Import ZIP file manually","Start auto-watching folder","Stop auto-watching","Scan existing files","Check watching status","Debug current settings"]}},commands:{importZip:"Import ZIP file manually",startWatching:"Start auto-watching folder",stopWatching:"Stop auto-watching",scanExisting:"Scan existing files in folder",checkStatus:"Check watching status",debugSettings:"Debug current settings"},notifications:{success:{imported:"Meeting '{{title}}' imported successfully!",watchingStarted:"Auto-watching started for: {{path}}",watchingStopped:"Auto-watching stopped",settingsReset:"Settings reset to defaults"},error:{invalidZip:"Invalid ZIP file: {{file}}",missingFiles:"Required files not found in: {{file}}",createNote:"Failed to create note for: {{title}}",copyAudio:"Failed to copy audio file for: {{title}}",watchingFailed:"Failed to start watching: {{error}}"},warning:{duplicateSkipped:"Meeting '{{title}}' already exists - skipped",duplicateRenamed:"Meeting '{{title}}' already exists - created as '{{newTitle}}'",duplicateOverwritten:"Meeting '{{title}}' already exists - overwritten"},info:{processing:"Processing: {{file}}",scanningFolder:"Scanning folder for ZIP files..."}},statusBar:{idle:"Idle",watching:"Watching: {{path}}",processing:"Processing...",error:"Error: {{message}}"},modals:{testImport:{title:"Test Import ZIP File",placeholder:"Enter full path to ZIP file...",button:"Test Import"},confirmReset:{title:"Reset Settings",message:"Are you sure you want to reset all settings to defaults? This action cannot be undone.",confirm:"Reset",cancel:"Cancel"},logs:{title:"Plugin Logs",export:"Export",clear:"Clear",close:"Close"}}},me={settings:{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Krisp Notes Importer",sections:{basic:"\u{1F527} \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",storage:"\u{1F4BE} \u0425\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0432 Obsidian",templates:"\u{1F4DD} \u0428\u0430\u0431\u043B\u043E\u043D\u044B \u0438 \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",duplicates:"\u{1F504} \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432",postImport:"\u26A1 \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",advanced:"\u{1F6E0}\uFE0F \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0438 \u043E\u0431\u0441\u043B\u0443\u0436\u0438\u0432\u0430\u043D\u0438\u0435"},fields:{watchedFolder:{name:"\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u0430\u044F \u043F\u0430\u043F\u043A\u0430",desc:"\u041F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435, \u0433\u0434\u0435 Krisp \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u0442 ZIP-\u0430\u0440\u0445\u0438\u0432\u044B"},autoScan:{name:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0443 \u043D\u0430 \u043F\u0440\u0435\u0434\u043C\u0435\u0442 \u043D\u043E\u0432\u044B\u0445 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432"},notesFolder:{name:"\u041F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A",desc:"\u041F\u0430\u043F\u043A\u0430 \u0432 \u0432\u0430\u0448\u0435\u043C \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 Obsidian \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u0432\u0441\u0442\u0440\u0435\u0447"},attachmentsFolder:{name:"\u041F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u0432\u043B\u043E\u0436\u0435\u043D\u0438\u0439",desc:"\u041F\u0430\u043F\u043A\u0430 \u0432 \u0432\u0430\u0448\u0435\u043C \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 Obsidian \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432"},noteNameTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432 \u0437\u0430\u043C\u0435\u0442\u043E\u043A. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{YYYY}}, {{MM}}, {{DD}}, {{HHMM}}, {{meetingTitle}}"},attachmentNameTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0430\u0443\u0434\u0438\u043E",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0442\u0435 \u0436\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435"},noteContentTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{title}}, {{date}}, {{time}}, {{participants}}, {{summary}}, {{actionItems}}, {{keyPoints}}, {{transcript}}, {{audioLink}}"},duplicateStrategy:{name:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432",desc:"\u0427\u0442\u043E \u0434\u0435\u043B\u0430\u0442\u044C, \u043A\u043E\u0433\u0434\u0430 \u0432\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0442\u0430\u043A\u0438\u043C \u0436\u0435 \u0438\u043C\u0435\u043D\u0435\u043C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",options:{skip:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0438\u043C\u043F\u043E\u0440\u0442",overwrite:"\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0443\u044E",rename:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441 \u0441\u0443\u0444\u0444\u0438\u043A\u0441\u043E\u043C"}},deleteZipAfterImport:{name:"\u0423\u0434\u0430\u043B\u044F\u0442\u044C ZIP \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0443\u0434\u0430\u043B\u044F\u0442\u044C ZIP-\u0444\u0430\u0439\u043B \u043F\u043E\u0441\u043B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430"},openNoteAfterImport:{name:"\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0432 Obsidian"},language:{name:"\u042F\u0437\u044B\u043A \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430",desc:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u044F\u0437\u044B\u043A \u0434\u043B\u044F \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043F\u043B\u0430\u0433\u0438\u043D\u0430"}},buttons:{testImport:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442",massImport:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435 \u0444\u0430\u0439\u043B\u044B",resetSettings:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",showLogs:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043B\u043E\u0433\u0438",restoreTemplate:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D"},info:{title:"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u043F\u043B\u0430\u0433\u0438\u043D\u0435",version:"\u0412\u0435\u0440\u0441\u0438\u044F",status:"\u0421\u0442\u0430\u0442\u0443\u0441",features:["\u2705 \u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP","\u2705 \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438","\u2705 \u041A\u0440\u0430\u0441\u0438\u0432\u043E\u0435 \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u0441 callouts","\u2705 \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u0430\u044F \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0430 \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432","\u2705 \u041F\u043E\u043B\u043D\u044B\u0439 UI \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A","\u2705 \u0421\u0438\u0441\u0442\u0435\u043C\u0430 \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u0438 \u0434\u0438\u0430\u0433\u043D\u043E\u0441\u0442\u0438\u043A\u0438","\u2705 \u0414\u0432\u0443\u044F\u0437\u044B\u0447\u043D\u0430\u044F \u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430 (English/\u0420\u0443\u0441\u0441\u043A\u0438\u0439)"],commands:["\u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430","\u0417\u0430\u043F\u0443\u0441\u043A \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u043F\u0430\u043F\u043A\u0438","\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F","\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u0444\u0430\u0439\u043B\u043E\u0432","\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F","\u041E\u0442\u043B\u0430\u0434\u043A\u0430 \u0442\u0435\u043A\u0443\u0449\u0438\u0445 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A"]}},commands:{importZip:"\u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430",startWatching:"\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438",stopWatching:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435",scanExisting:"\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u0444\u0430\u0439\u043B\u044B \u0432 \u043F\u0430\u043F\u043A\u0435",checkStatus:"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F",debugSettings:"\u041E\u0442\u043B\u0430\u0434\u043A\u0430 \u0442\u0435\u043A\u0443\u0449\u0438\u0445 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A"},notifications:{success:{imported:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0430!",watchingStarted:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D\u043E \u0434\u043B\u044F: {{path}}",watchingStopped:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E",settingsReset:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0431\u0440\u043E\u0448\u0435\u043D\u044B \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E"},error:{invalidZip:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ZIP-\u0444\u0430\u0439\u043B: {{file}}",missingFiles:"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u044B\u0435 \u0444\u0430\u0439\u043B\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B \u0432: {{file}}",createNote:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0434\u043B\u044F: {{title}}",copyAudio:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u0434\u043B\u044F: {{title}}",watchingFailed:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435: {{error}}"},warning:{duplicateSkipped:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u043F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u0430",duplicateRenamed:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u0441\u043E\u0437\u0434\u0430\u043D\u0430 \u043A\u0430\u043A '{{newTitle}}'",duplicateOverwritten:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u043D\u0430"},info:{processing:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430: {{file}}",scanningFolder:"\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043D\u0430 \u043F\u0440\u0435\u0434\u043C\u0435\u0442 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432..."}},statusBar:{idle:"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435",watching:"\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435: {{path}}",processing:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430...",error:"\u041E\u0448\u0438\u0431\u043A\u0430: {{message}}"},modals:{testImport:{title:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043A ZIP-\u0444\u0430\u0439\u043B\u0443...",button:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442"},confirmReset:{title:"\u0421\u0431\u0440\u043E\u0441 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",message:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E? \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.",confirm:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C",cancel:"\u041E\u0442\u043C\u0435\u043D\u0430"},logs:{title:"\u041B\u043E\u0433\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430",export:"\u042D\u043A\u0441\u043F\u043E\u0440\u0442",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",close:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"}}},Et=class{constructor(o){this.currentLanguage="en";this.strings={en:ge,ru:me};o&&(this.currentLanguage=o)}setLanguage(o){this.currentLanguage=o}getCurrentLanguage(){return this.currentLanguage}t(o,e){let n=o.split("."),t=this.strings[this.currentLanguage];for(let i of n)if(t&&typeof t=="object"&&i in t)t=t[i];else{t=this.strings.en;for(let s of n)if(t&&typeof t=="object"&&s in t)t=t[s];else return`[Missing: ${o}]`;break}if(typeof t!="string")return`[Invalid: ${o}]`;if(e)for(let[i,s]of Object.entries(e))t=t.replace(new RegExp(`{{${i}}}`,"g"),s);return t}getSettingsStrings(){return this.strings[this.currentLanguage].settings}getCommandStrings(){return this.strings[this.currentLanguage].commands}getNotificationStrings(){return this.strings[this.currentLanguage].notifications}getStatusBarStrings(){return this.strings[this.currentLanguage].statusBar}getModalStrings(){return this.strings[this.currentLanguage].modals}};var Rt=class extends X.PluginSettingTab{constructor(e,n){super(e,n);this.plugin=n;let t=this.plugin.settingsManager.getSetting("language")||"en";this.localization=n.localizationService||new Et(t)}updateLanguage(e){this.localization.setLanguage(e),this.display()}display(){var y;let{containerEl:e}=this;e.empty(),e.createEl("h1",{text:this.localization.t("settings.title")}),e.createEl("p",{text:this.localization.t("settings.title")+" - "+this.localization.t("settings.sections.basic")}),new X.Setting(e).setName(this.localization.t("settings.fields.language.name")).setDesc(this.localization.t("settings.fields.language.desc")).addDropdown(h=>h.addOption("en","English").addOption("ru","\u0420\u0443\u0441\u0441\u043A\u0438\u0439").setValue(this.plugin.settingsManager.getSetting("language")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("language",p),this.updateLanguage(p)})),e.createEl("h2",{text:"\u{1F527} "+this.localization.t("settings.sections.basic")}),new X.Setting(e).setName(this.localization.t("settings.fields.watchedFolder.name")).setDesc(this.localization.t("settings.fields.watchedFolder.desc")).addText(h=>h.setPlaceholder("/Users/username/Downloads/Krisp").setValue(this.plugin.settingsManager.getSetting("watchedFolderPath")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("watchedFolderPath",p)})),new X.Setting(e).setName(this.localization.t("settings.fields.autoScan.name")).setDesc(this.localization.t("settings.fields.autoScan.desc")).addToggle(h=>h.setValue(this.plugin.settingsManager.getSetting("autoScanEnabled")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("autoScanEnabled",p)})),e.createEl("h2",{text:this.localization.t("settings.sections.storage")}),new X.Setting(e).setName(this.localization.t("settings.fields.notesFolder.name")).setDesc(this.localization.t("settings.fields.notesFolder.desc")).addText(h=>h.setPlaceholder("KrispNotes/Notes").setValue(this.plugin.settingsManager.getSetting("notesFolderPath")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("notesFolderPath",p)})),new X.Setting(e).setName(this.localization.t("settings.fields.attachmentsFolder.name")).setDesc(this.localization.t("settings.fields.attachmentsFolder.desc")).addText(h=>h.setPlaceholder("KrispNotes/Attachments").setValue(this.plugin.settingsManager.getSetting("attachmentsFolderPath")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("attachmentsFolderPath",p)})),e.createEl("h2",{text:this.localization.t("settings.sections.templates")}),new X.Setting(e).setName(this.localization.t("settings.fields.noteNameTemplate.name")).setDesc(this.localization.t("settings.fields.noteNameTemplate.desc")).addText(h=>h.setPlaceholder("{{YYYY}}-{{MM}}-{{DD}}_{{HHMM}}_{{meetingTitle}}").setValue(this.plugin.settingsManager.getSetting("noteNameTemplate")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("noteNameTemplate",p)})),new X.Setting(e).setName(this.localization.t("settings.fields.attachmentNameTemplate.name")).setDesc(this.localization.t("settings.fields.attachmentNameTemplate.desc")).addText(h=>h.setPlaceholder("{{YYYY}}-{{MM}}-{{DD}}_{{meetingTitle}}_audio").setValue(this.plugin.settingsManager.getSetting("attachmentNameTemplate")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("attachmentNameTemplate",p)})),e.createEl("h2",{text:this.localization.t("settings.sections.duplicates")}),new X.Setting(e).setName(this.localization.t("settings.fields.duplicateStrategy.name")).setDesc(this.localization.t("settings.fields.duplicateStrategy.desc")).addDropdown(h=>h.addOption("skip",this.localization.t("settings.fields.duplicateStrategy.options.skip")).addOption("overwrite",this.localization.t("settings.fields.duplicateStrategy.options.overwrite")).addOption("rename",this.localization.t("settings.fields.duplicateStrategy.options.rename")).setValue(this.plugin.settingsManager.getSetting("duplicateStrategy")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("duplicateStrategy",p)})),e.createEl("h2",{text:this.localization.t("settings.sections.postImport")}),new X.Setting(e).setName(this.localization.t("settings.fields.openNoteAfterImport.name")).setDesc(this.localization.t("settings.fields.openNoteAfterImport.desc")).addToggle(h=>h.setValue(this.plugin.settingsManager.getSetting("openNoteAfterImport")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("openNoteAfterImport",p)})),new X.Setting(e).setName(this.localization.t("settings.fields.deleteZipAfterImport.name")).setDesc(this.localization.t("settings.fields.deleteZipAfterImport.desc")).addToggle(h=>h.setValue(this.plugin.settingsManager.getSetting("deleteZipAfterImport")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("deleteZipAfterImport",p)})),e.createEl("h2",{text:this.localization.t("settings.sections.advanced")}),new X.Setting(e).setName(this.localization.t("settings.fields.noteContentTemplate.name")).setDesc(this.localization.t("settings.fields.noteContentTemplate.desc")).addTextArea(h=>(h.setValue(this.plugin.settingsManager.getSetting("noteContentTemplate")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",p)}),h.inputEl.rows=10,h.inputEl.cols=50,h)).addButton(h=>h.setButtonText(this.localization.t("settings.buttons.restoreTemplate")).onClick(async()=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",ct.noteContentTemplate),this.display(),new X.Notice(this.localization.t("notifications.success.settingsReset"),3e3)})),new X.Setting(e).setName(this.localization.t("settings.buttons.testImport")).setDesc("\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 ZIP-\u0444\u0430\u0439\u043B \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0441 \u0442\u0435\u043A\u0443\u0449\u0438\u043C\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u043C\u0438").addButton(h=>h.setButtonText(this.localization.t("settings.buttons.testImport")).setClass("mod-cta").onClick(async()=>{let p=this.localization,c=this.plugin;new class extends X.Modal{constructor(l){super(l)}onOpen(){let{contentEl:l}=this;l.createEl("h2",{text:p.t("modals.testImport.title")});let d=l.createEl("input",{type:"text",placeholder:p.t("modals.testImport.placeholder")});d.style.width="100%",d.style.marginBottom="10px";let u=l.createEl("button",{text:p.t("modals.testImport.button"),cls:"mod-cta"});u.onclick=async()=>{let g=d.value.trim();if(g){this.close();let b=c;if(b.processingService)try{await b.processingService.processZipFile(g)}catch(k){new X.Notice(`Error: ${k.message}`,5e3)}}}}onClose(){let{contentEl:l}=this;l.empty()}}(this.app).open()})),new X.Setting(e).setName(this.localization.t("settings.buttons.massImport")).setDesc("\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435 ZIP-\u0444\u0430\u0439\u043B\u044B \u0438\u0437 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0438").addButton(h=>h.setButtonText(this.localization.t("settings.buttons.massImport")).onClick(async()=>{let p=this.plugin;if(p.fileWatcherService&&p.fileWatcherService.scanExistingFiles)try{await p.fileWatcherService.scanExistingFiles(),new X.Notice(this.localization.t("notifications.info.scanningFolder"),3e3)}catch(c){new X.Notice(`Error: ${c.message}`,5e3)}else new X.Notice("FileWatcherService not available",3e3)})),new X.Setting(e).setName(this.localization.t("settings.buttons.showLogs")).setDesc("\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u044C\u043D\u044B\u0435 \u043B\u043E\u0433\u0438 \u0440\u0430\u0431\u043E\u0442\u044B \u043F\u043B\u0430\u0433\u0438\u043D\u0430 \u0434\u043B\u044F \u0434\u0438\u0430\u0433\u043D\u043E\u0441\u0442\u0438\u043A\u0438 \u043F\u0440\u043E\u0431\u043B\u0435\u043C").addButton(h=>h.setButtonText(this.localization.t("settings.buttons.showLogs")).onClick(async()=>{let p=this.plugin;p.loggingService?new class extends X.Modal{constructor(f){super(f)}onOpen(){let{contentEl:f}=this;f.createEl("h2",{text:"\u{1F4CB} \u041B\u043E\u0433\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430 Krisp Notes Importer"});let l=p.loggingService.getLogStats(),d=f.createEl("div");d.style.marginBottom="15px",d.style.padding="10px",d.style.backgroundColor="var(--background-secondary)",d.style.borderRadius="5px",d.createEl("p",{text:`\u{1F4CA} \u0412\u0441\u0435\u0433\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439: ${l.total}`});let u=Object.entries(l.byLevel).map(([R,A])=>`${R}: ${A}`).join(", ");d.createEl("p",{text:`\u{1F4C8} \u041F\u043E \u0443\u0440\u043E\u0432\u043D\u044F\u043C: ${u}`});let g=f.createEl("div");g.style.display="flex",g.style.gap="10px",g.style.marginBottom="15px";let b=g.createEl("button",{text:"\u{1F4CB} \u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043B\u043E\u0433\u0438"});b.className="mod-cta",b.onclick=async()=>{await p.loggingService.copyLogsToClipboard()};let k=g.createEl("button",{text:"\u{1F5D1}\uFE0F \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043B\u043E\u0433\u0438"});k.className="mod-warning",k.onclick=()=>{p.loggingService.clearLogs(),this.close(),new X.Notice("\u{1F5D1}\uFE0F Logs cleared",3e3)};let x=g.createEl("button",{text:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"});x.onclick=()=>this.close();let P=f.createEl("div");P.style.maxHeight="400px",P.style.overflow="auto",P.style.border="1px solid var(--background-modifier-border)",P.style.borderRadius="5px",P.style.padding="10px",P.style.backgroundColor="var(--background-primary-alt)",P.style.fontFamily="monospace",P.style.fontSize="0.8em",P.style.whiteSpace="pre-wrap";let F=p.loggingService.getRecentLogs(100);if(F.length===0)P.textContent="\u041B\u043E\u0433\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442";else{let R=F.map(A=>{let M=A.timestamp.toLocaleString(),H=A.level===0?"DEBUG":A.level===1?"INFO":A.level===2?"WARN":"ERROR";return`[${M}] [${H}] [${A.category}] ${A.message}`}).join(`
`);P.textContent=R}}onClose(){let{contentEl:f}=this;f.empty()}}(this.app).open():new X.Notice("\u274C LoggingService unavailable",5e3)})),new X.Setting(e).setName("\u0418\u043C\u043F\u043E\u0440\u0442 \u0432\u0441\u0435\u0445 \u0444\u0430\u0439\u043B\u043E\u0432").setDesc("\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0432\u0441\u0435 ZIP-\u0444\u0430\u0439\u043B\u044B \u0432 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043F\u0440\u044F\u043C\u043E \u0441\u0435\u0439\u0447\u0430\u0441").addButton(h=>h.setButtonText("\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435").setClass("mod-warning").onClick(async()=>{let p=this.plugin;if(!p.settingsManager.getSetting("watchedFolderPath")){new X.Notice(`\u274C ${this.localization.t("notifications.error.watchingFailed",{error:"No watched folder specified"})}`,5e3);return}new X.Notice(`\u{1F504} ${this.localization.t("notifications.info.scanningFolder")}`,3e3);try{p.fileWatcher&&p.fileWatcher.scanExistingFiles?(await p.fileWatcher.scanExistingFiles(),new X.Notice("\u2705 Mass import completed successfully!",5e3)):new X.Notice("\u274C FileWatcherService unavailable",5e3)}catch(f){console.error("[Krisp Importer] Mass import error:",f),new X.Notice(`\u274C Mass import error: ${f.message}`,8e3)}})),new X.Setting(e).setName(this.localization.t("settings.buttons.testImport")).setDesc("Select ZIP file for test import with current settings").addButton(h=>h.setButtonText(this.localization.t("settings.buttons.testImport")).onClick(async()=>{let p=this.plugin,c=this.localization;new class extends X.Modal{constructor(d){super(d);this.result=""}onOpen(){let{contentEl:d}=this;d.createEl("h2",{text:c.t("modals.testImport.title")}),d.createEl("p",{text:c.t("modals.testImport.placeholder")});let u=d.createEl("input",{type:"text",placeholder:"/path/to/meeting.zip"});u.style.width="100%",u.style.marginBottom="10px";let g=d.createEl("div");g.style.display="flex",g.style.gap="10px",g.style.justifyContent="flex-end";let b=g.createEl("button",{text:c.t("modals.testImport.button")});b.className="mod-cta",b.onclick=async()=>{let x=u.value.trim();if(x){this.result=x,this.close();let P=p;if(P&&P.processingService)try{new X.Notice(`\u{1F9EA} ${c.t("notifications.info.processing",{file:"test file"})}`,3e3),await P.processingService.processZipFile(x),new X.Notice("\u2705 Test import completed successfully!",5e3)}catch(F){console.error("[Krisp Importer] Test import error:",F),new X.Notice(`\u274C Test import error: ${F.message}`,8e3)}else new X.Notice("\u274C ProcessingService unavailable",5e3)}};let k=g.createEl("button",{text:c.t("modals.confirmReset.cancel")});k.onclick=()=>this.close(),u.focus(),u.addEventListener("keypress",x=>{x.key==="Enter"&&b.click()})}onClose(){let{contentEl:d}=this;d.empty()}}(this.app).open()})),e.createEl("h2",{text:this.localization.t("settings.sections.templates")});let n=e.createEl("p",{text:this.localization.t("settings.fields.noteContentTemplate.desc")});n.style.fontSize="0.9em",n.style.color="var(--text-muted)",new X.Setting(e).setName(this.localization.t("settings.fields.noteContentTemplate.name")).setDesc("").addTextArea(h=>(h.inputEl.rows=10,h.inputEl.style.width="100%",h.inputEl.style.fontFamily="monospace",h.inputEl.style.fontSize="0.85em",h.setPlaceholder("Enter note template...").setValue(this.plugin.settingsManager.getSetting("noteContentTemplate")).onChange(async p=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",p)}))),new X.Setting(e).setName(this.localization.t("settings.buttons.restoreTemplate")).setDesc("Restore default note template").addButton(h=>h.setButtonText(this.localization.t("settings.buttons.restoreTemplate")).setCta().onClick(async()=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",ct.noteContentTemplate),this.display()})),e.createEl("h2",{text:this.localization.t("settings.sections.advanced")}),new X.Setting(e).setName(this.localization.t("settings.buttons.resetSettings")).setDesc("Reset all plugin settings to default values").addButton(h=>h.setButtonText(this.localization.t("settings.buttons.resetSettings")).setClass("mod-warning").onClick(async()=>{let p=this.plugin,c=this.localization;new class extends X.Modal{constructor(l){super(l)}onOpen(){let{contentEl:l}=this;l.createEl("h2",{text:c.t("modals.confirmReset.title")}),l.createEl("p",{text:c.t("modals.confirmReset.message")});let d=l.createEl("div");d.style.display="flex",d.style.gap="10px",d.style.justifyContent="flex-end",d.style.marginTop="20px";let u=d.createEl("button",{text:c.t("modals.confirmReset.confirm")});u.className="mod-warning",u.onclick=async()=>{this.close();let b=p;if(b&&b.settingsManager)try{for(let[x,P]of Object.entries(ct))await b.settingsManager.updateSetting(x,P);new X.Notice(`\u2705 ${c.t("notifications.success.settingsReset")}`,5e3);let k=b.settingsTab;k&&k.display&&k.display()}catch(k){console.error("[Krisp Importer] Settings reset error:",k),new X.Notice(`\u274C Settings reset error: ${k.message}`,8e3)}else new X.Notice("\u274C Plugin unavailable for settings reset",5e3)};let g=d.createEl("button",{text:c.t("modals.confirmReset.cancel")});g.onclick=()=>this.close()}onClose(){let{contentEl:l}=this;l.empty()}}(this.app).open()})),e.createEl("h2",{text:this.localization.t("settings.info.title")});let t=e.createEl("div"),i=((y=this.plugin.manifest)==null?void 0:y.version)||"unknown";t.createEl("p",{text:`${this.localization.t("settings.info.version")}: v${i}`}),t.createEl("p",{text:`${this.localization.t("settings.info.status")}: ${this.localization.t("settings.info.features.0")}`}),this.localization.getSettingsStrings().info.features.forEach(h=>{t.createEl("p",{text:h})});let s=e.createEl("div");s.style.padding="15px",s.style.backgroundColor="var(--background-secondary)",s.style.borderRadius="8px",s.style.marginTop="15px",s.style.border="1px solid var(--background-modifier-border)",s.createEl("h4",{text:"\u{1F680} "+(this.localization.getCurrentLanguage()==="ru"?"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B:":"Available commands:")}),this.localization.getSettingsStrings().info.commands.forEach(h=>{s.createEl("p",{text:`\u2022 ${h}`})});let v=e.createEl("div");v.style.padding="10px",v.style.backgroundColor="var(--background-primary-alt)",v.style.borderRadius="5px",v.style.marginTop="10px",v.style.borderLeft="4px solid var(--interactive-accent)",v.createEl("p",{text:"\u{1F4A1} \u0421\u043E\u0432\u0435\u0442: \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043F\u0430\u043B\u0438\u0442\u0440\u0443 \u043A\u043E\u043C\u0430\u043D\u0434 (Ctrl/Cmd + P) \u0434\u043B\u044F \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A\u043E \u0432\u0441\u0435\u043C \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C \u043F\u043B\u0430\u0433\u0438\u043D\u0430"})}};var yt=require("obsidian");var ie=xt(ee()),ut=require("fs"),Pt=require("obsidian"),It=xt(require("path")),$t=class{constructor(o){this.app=o}async extract(o,e){try{let n=await ut.promises.readFile(o),t=await ie.loadAsync(n),s=require("os").tmpdir(),v=It.join(s,"krisp-importer-temp",e+"_"+Date.now());if(!(0,ut.existsSync)(v)){let y=It.join(s,"krisp-importer-temp");(0,ut.existsSync)(y)||(0,ut.mkdirSync)(y,{recursive:!0}),(0,ut.mkdirSync)(v,{recursive:!0})}for(let y in t.files)if(!t.files[y].dir){let h=await t.files[y].async("nodebuffer"),p=(0,Pt.normalizePath)(It.join(v,y)),c=It.dirname(p);(0,ut.existsSync)(c)||(0,ut.mkdirSync)(c,{recursive:!0}),await ut.promises.writeFile(p,h)}return console.log(`Successfully extracted to ${v}`),v}catch(n){return new Pt.Notice("Error extracting ZIP file: "+n.message),console.error("Error extracting ZIP file:",n),null}}async cleanup(o){if(o)try{(0,ut.existsSync)(o)&&((0,ut.rmSync)(o,{recursive:!0,force:!0}),console.log(`Successfully cleaned up temp directory: ${o}`))}catch(e){new Pt.Notice("Error cleaning up temporary directory: "+e.message),console.error("Error cleaning up temporary directory:",e)}}};var Mt=class{constructor(){}parseMeetingNotes(o,e,n){var p;let t={},i=n;i=i.replace(/\s*\([0-9a-fA-F]{8}-(?:[0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}\)$/,""),i=i.replace(/-[0-9a-fA-F]{32}$/,""),i=i.replace(/\s*-\s*[A-Za-z]+(?:\s+|,\s*)[0-9]{1,2}(?:,\s*[0-9]{4})?(?:\s+[0-9]{1,2}[0-9]{2}(?:\s*(?:AM|PM))?)?$/,"").trim(),t.meetingTitle=i;let s=(p=o.split(`
`)[0])==null?void 0:p.trim(),v=null,y=null;if(s&&(v=this.extractDateFromString(s),y=this.extractTimeFromString(s)),v||(v=this.extractDateFromString(n)),!y&&(y=this.extractTimeFromString(n),y==="00:00"&&e)){let c=e.match(/(\d{2}:\d{2}(?::\d{2})?)/)}t.date=v||void 0,t.time=y||void 0,t.summary=this.extractSection(o,"Summary"),t.actionItems=this.extractSection(o,"Action Items",!0),t.keyPoints=this.extractSection(o,"Key Points",!0);let h=this.parseTranscript(e);return t.participants=h.participants,t.rawTranscript=e,t.formattedTranscript=h.formattedTranscript,t.duration=h.duration,t.participantsCount=h.participants.length,t.transcriptWords=this.countWords(e),t.mostActiveSpeaker=this.findMostActiveSpeaker(e),t.participantsStats=this.generateParticipantsStats(e,h.participants),t.extractedEntities=this.extractEntities(o,e),t.relatedLinks=this.generateRelatedLinks(o,i),t.importDate=new Date().toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),t.smartTags=this.generateSmartTags(o,e,i),t.tags=[...t.smartTags||[]],t}parseTranscript(o){let e=o.split(`
`),n=new Set,t=[],i="00:00:00",s=/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/;for(let y=0;y<e.length;y++){let p=e[y].trim();if(p==="")continue;let c=p.match(s);if(c){let f=c[1].trim(),l=c[2];f&&!f.toLowerCase().includes("transcription service")&&!f.toLowerCase().includes("meeting summary")&&n.add(f);let d=l.length===5?`${l}:00`:l;i=d;let u=[],g=y+1;for(;g<e.length;){let b=e[g].trim();if(b===""){g++;continue}if(s.test(b))break;b.toLowerCase()==="\u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u0435 \u0441\u043B\u0435\u0434\u0443\u0435\u0442..."?u.push(`_${b}_`):u.push(b),g++}if(u.length>0){let b=u.join(`
`);t.push(`[[${d}]] **${f}**: ${b}`)}else t.push(`[[${d}]] **${f}**:`);y=g-1}else p.toLowerCase()==="\u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u0435 \u0441\u043B\u0435\u0434\u0443\u0435\u0442..."?t.push(`_${p}_`):t.length>0?t[t.length-1]+=`
${p}`:t.push(p)}let v="N/A";return i!=="00:00:00"&&(v=i),{participants:Array.from(n),formattedTranscript:t.join(`

`),duration:v}}extractDateFromString(o){if(!o)return null;let e,n,t,i=o.match(/(\d{4})-(\d{2})-(\d{2})/);if(i&&(e=parseInt(i[1],10),n=parseInt(i[2],10),t=parseInt(i[3],10),n>=1&&n<=12&&t>=1&&t<=31))return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`;if(i=o.match(/([A-Za-z]+)\s+(\d{1,2}),\s+(\d{4})/),i){let s=i[1];if(t=parseInt(i[2],10),e=parseInt(i[3],10),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}if(i=o.match(/([A-Za-z]+),\s*(\d{1,2})(?!\s*,\s*\d{4})/),i){let s=i[1];if(t=parseInt(i[2],10),e=new Date().getFullYear(),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}if(i=o.match(/(\d{1,2})\s+([A-Za-z]+)\s+(\d{4})/),i){t=parseInt(i[1],10);let s=i[2];if(e=parseInt(i[3],10),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}return null}extractTimeFromString(o){if(!o)return null;let e=o.match(/(\d{2}):(\d{2})(?!\s*(?:AM|PM))/);if(e){let n=parseInt(e[1],10),t=parseInt(e[2],10);if(n>=0&&n<=23&&t>=0&&t<=59)return`${String(n).padStart(2,"0")}:${String(t).padStart(2,"0")}`}if(e=o.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i),e){let n=parseInt(e[1],10),t=parseInt(e[2],10),i=e[3].toUpperCase();if(n>=1&&n<=12&&t>=0&&t<=59)return i==="PM"&&n!==12?n+=12:i==="AM"&&n===12&&(n=0),`${String(n).padStart(2,"0")}:${String(t).padStart(2,"0")}`}return"00:00"}extractSection(o,e,n=!1){var p,c;let t=o.split(`
`),i=[],s=!1,v=new RegExp(`^${e}s*$`,"i"),y=["Summary","Action Items","Key Points","Transcript","Transcription"],h=new RegExp(`^(${y.filter(f=>f.toLowerCase()!==e.toLowerCase()).join("|")})s*$`,"i");for(let f=0;f<t.length;f++){let l=t[f];if(v.test(l)){s=!0;continue}if(s){if(h.test(l))break;let d=l.trim();if(d===""){if(n){let u=(p=t[f+1])==null?void 0:p.trim();if(!(u&&!u.match(/^(\s*[-*]|[0-9]+\.)/)&&!u.match(/^\s+/))){if(!u)break}}else if(((c=t[f+1])==null?void 0:c.trim())==="")break}if(d!==""||n&&i.length>0)if(n){let u=d;(u.startsWith("- ")||u.startsWith("* "))&&(u=u.substring(2).trim()),(e==="Action Items"&&u||u)&&i.push(u)}else i.push(d);else i.length>0}}return i}escapeRegExp(o){return o.replace(/[.*+?^${}()|[\\\]]/g,"\\$&")}isLikelyDateOrTime(o){if(!o)return!1;let e=/^(\d{4}-\d{2}-\d{2}|[A-Za-z]+\s+\d{1,2}(?:,\s*\d{4})?)$/i,n=/^(\d{1,2}:\d{2}(\s*[APap][Mm])?)$/;return e.test(o)||n.test(o)}isSectionHeader(o){if(!o)return!1;let e=o.toLowerCase();return e.startsWith("summary")||e.startsWith("action items")||e.startsWith("key points")||e.startsWith("transcript")}monthNameToNumber(o){if(!o)return null;let e=o.toLowerCase().substring(0,3);return{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,\u044F\u043D\u0432:1,\u0444\u0435\u0432:2,\u043C\u0430\u0440:3,\u0430\u043F\u0440:4,\u043C\u0430\u044F:5,\u0438\u044E\u043D:6,\u0438\u044E\u043B:7,\u0430\u0432\u0433:8,\u0441\u0435\u043D:9,\u043E\u043A\u0442:10,\u043D\u043E\u044F:11,\u0434\u0435\u043A:12}[e]||null}countWords(o){return o?o.trim().split(/\s+/).filter(e=>e.length>0).length:0}findMostActiveSpeaker(o){let e=o.split(`
`),n={},t="";for(let v of e){let y=v.trim();if(y==="")continue;let h=y.match(/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/);if(h)t=h[1].trim(),n[t]||(n[t]=0);else if(t){let p=this.countWords(y);n[t]+=p}}let i="",s=0;for(let[v,y]of Object.entries(n))y>s&&(s=y,i=v);return i||"N/A"}generateParticipantsStats(o,e){let n=o.split(`
`),t={},i={},s="";for(let h of e)t[h]=0,i[h]=0;for(let h of n){let p=h.trim();if(p==="")continue;let c=p.match(/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/);if(c)s=c[1].trim(),i[s]!==void 0&&i[s]++;else if(s&&t[s]!==void 0){let f=this.countWords(p);t[s]+=f}}let v=[],y=Object.values(t).reduce((h,p)=>h+p,0);for(let h of e){let p=t[h]||0,c=i[h]||0,f=y>0?(p/y*100).toFixed(1):"0";v.push(`- **${h}**: ${p} \u0441\u043B\u043E\u0432 (${f}%), ${c} \u0432\u044B\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0439`)}return v.length>0?["### \u{1F4CA} \u0410\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432","",...v]:[]}extractEntities(o,e){let n=[],i=`${o} ${e}`.substring(0,5e3),s={projects:/(?:|project|||||)\s+([--\w\s]{3,30})/gi,companies:/(?:|||||)\s+([--\w\s]{3,30})|([--][--\w]*(?:||||))/gi,dates:/\d{1,2}[\.\-\/]\d{1,2}[\.\-\/]\d{2,4}|\d{4}[\.\-\/]\d{1,2}[\.\-\/]\d{1,2}/g},v=i.match(s.projects);v&&v.length>0&&(n.push("### \u{1F680} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u044B",""),[...new Set(v.slice(0,5))].forEach(c=>n.push(`- ${c.trim()}`)),n.push(""));let y=i.match(s.companies);y&&y.length>0&&(n.push("### \u{1F3E2} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0438",""),[...new Set(y.slice(0,5))].forEach(c=>n.push(`- ${c.trim()}`)),n.push(""));let h=i.match(s.dates);return h&&h.length>0&&(n.push("### \u{1F4C5} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u0434\u0430\u0442\u044B",""),[...new Set(h.slice(0,5))].forEach(c=>n.push(`- ${c}`)),n.push("")),n}generateRelatedLinks(o,e){let n=[],t=o.match(/|||/gi);t&&t.length>1&&n.push("- \u{1F4CB} **\u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0432\u0441\u0442\u0440\u0435\u0447\u0438:** [[\u041F\u043E\u0438\u0441\u043A \u0432\u0441\u0442\u0440\u0435\u0447]]");let i=o.match(/||||/gi);return i&&i.length>0&&n.push("- \u{1F4C4} **\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B:** [[\u041F\u043E\u0438\u0441\u043A \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432]]"),e.toLowerCase().includes("\u043F\u0440\u043E\u0435\u043A\u0442")&&n.push("- \u{1F680} **\u041F\u0440\u043E\u0435\u043A\u0442:** [[\u041F\u0440\u043E\u0435\u043A\u0442\u044B]]"),n}generateSmartTags(o,e,n){let t=new Set,i=`${o} ${e} ${n}`.toLowerCase();t.add("meeting"),t.add("krisp");let s={\u043F\u0440\u043E\u0435\u043A\u0442:"project",project:"project",\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435:"planning",planning:"planning",\u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u043A\u0430:"development",development:"development",\u043E\u0431\u0441\u0443\u0436\u0434\u0435\u043D\u0438\u0435:"discussion",\u0432\u0441\u0442\u0440\u0435\u0447\u0430:"meeting",\u0430\u043D\u0430\u043B\u0438\u0437:"analysis",strategy:"strategy",\u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F:"strategy",\u0432\u043D\u0435\u0434\u0440\u0435\u043D\u0438\u0435:"implementation",\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435:"testing",\u0440\u0435\u0432\u044C\u044E:"review",review:"review",\u0431\u044E\u0434\u0436\u0435\u0442:"budget",budget:"budget",deadline:"deadline",\u0434\u0435\u0434\u043B\u0430\u0439\u043D:"deadline",hr:"hr",\u0440\u0435\u043A\u0440\u0443\u0442\u0438\u043D\u0433:"hr",recruiting:"hr",\u0438\u043D\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044F:"integration",integration:"integration",api:"technical",\u0441\u0438\u0441\u0442\u0435\u043C\u0430:"system",system:"system",\u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C:"security",security:"security",\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430:"support",support:"support"};for(let[v,y]of Object.entries(s))i.includes(v)&&t.add(y);return(i.includes("ceo")||i.includes("director")||i.includes("\u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440"))&&t.add("management"),(i.includes("developer")||i.includes("\u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A")||i.includes("\u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442"))&&t.add("technical"),(i.includes("designer")||i.includes("\u0434\u0438\u0437\u0430\u0439\u043D\u0435\u0440"))&&t.add("design"),(i.includes("\u0440\u0435\u0442\u0440\u043E\u0441\u043F\u0435\u043A\u0442\u0438\u0432\u0430")||i.includes("retrospective"))&&t.add("retrospective"),(i.includes("\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435")||i.includes("planning"))&&t.add("planning"),(i.includes("\u0434\u0435\u043C\u043E")||i.includes("demo")||i.includes("\u043F\u0440\u0435\u0437\u0435\u043D\u0442\u0430\u0446\u0438\u044F"))&&t.add("demo"),Array.from(t)}};var gt=require("obsidian"),_t=xt(require("path")),Wt=class{constructor(o,e){this.app=o,this.vault=o.vault,this.settings=e}applyTemplate(o,e,n,t,i){var k,x,P,F,R,A,M,H;let s=o;s=s.replace(/{{meetingTitle}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{title}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{date}}/g,e.date||"YYYY-MM-DD"),s=s.replace(/{{time}}/g,e.time||"HH:MM"),s=s.replace(/{{duration}}/g,e.duration||"N/A");let v=((k=e.participants)==null?void 0:k.map(_=>`- **${_}**`).join(`
`))||"- *\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430\u0445 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430*";s=s.replace(/{{participantsList}}/g,v),s=s.replace(/{{participants}}/g,((x=e.participants)==null?void 0:x.join(", "))||"N/A"),s=s.replace(/{{participantsCount}}/g,String(e.participantsCount||0)),s=s.replace(/{{transcriptWords}}/g,String(e.transcriptWords||0)),s=s.replace(/{{mostActiveSpeaker}}/g,e.mostActiveSpeaker||"N/A"),s=s.replace(/{{importDate}}/g,e.importDate||new Date().toLocaleDateString("ru-RU"));let y=((P=e.participantsStats)==null?void 0:P.join(`
`))||"*\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430*";s=s.replace(/{{participantsStats}}/g,y);let h=(F=e.extractedEntities)!=null&&F.length?e.extractedEntities.join(`

`):"*\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430*";s=s.replace(/{{extractedEntities}}/g,h);let p=(R=e.relatedLinks)!=null&&R.length?`
`+e.relatedLinks.join(`
`):"";s=s.replace(/{{relatedLinks}}/g,p);let c=(A=e.summary)!=null&&A.length?e.summary.map(_=>_.trim().startsWith("- ")||_.trim().startsWith("* ")?_.trim():_.trim()===""?"":_.trim()).join(`
>
> `):"*\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E*";s=s.replace(/{{summary}}/g,c);let f=((M=e.actionItems)==null?void 0:M.map(_=>`- [ ] ${_}`).join(`
> 
> `))||"*\u041D\u0435\u0442 \u0437\u0430\u0434\u0430\u0447 \u0434\u043B\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F*";s=s.replace(/{{actionItemsList}}/g,f),s=s.replace(/{{actionItems}}/g,f);let l=((H=e.keyPoints)==null?void 0:H.map(_=>`- ${_}`).join(`
> 
> `))||"*\u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B \u043D\u0435 \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u044B*";s=s.replace(/{{keyPointsList}}/g,l),s=s.replace(/{{keyPoints}}/g,l);let d=e.formattedTranscript?e.formattedTranscript.split(`
`).map(_=>`> ${_}`).join(`
`):"> *\u0422\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D*";s=s.replace(/{{formattedTranscript}}/g,d),s=s.replace(/{{transcript}}/g,d),s=s.replace(/{{rawTranscript}}/g,e.rawTranscript||"\u0421\u044B\u0440\u043E\u0439 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D");let u=[...e.tags||[],...e.smartTags||[]],g=[...new Set(u)],b=g.length>0?g.map(_=>`  - ${_}`).join(`
`)+`
`:"";if(s=s.replace(/{{yamlTags}}/g,b),i){let _=(0,gt.normalizePath)(i);s=s.replace(/{{audioPathForYaml}}/g,_),s=s.replace(/{{audioLink}}/g,_),s=s.replace(/{{audioEmbed}}/g,`![[${_}]]`)}else s=s.replace(/{{audioPathForYaml}}/g,""),s=s.replace(/{{audioLink}}/g,"N/A"),s=s.replace(/{{audioEmbed}}/g,`> [!warning] \u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D
> \u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u043D\u0435 \u0431\u044B\u043B \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D \u0438\u043B\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D \u0432 \u0430\u0440\u0445\u0438\u0432\u0435.`);return t?s=s.replace(/{{noteFileName}}/g,t.replace(/\.md$/,"")):s=s.replace(/{{noteFileName}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{YYYY}}/g,e.date?e.date.substring(0,4):"YYYY"),s=s.replace(/{{MM}}/g,e.date?e.date.substring(5,7):"MM"),s=s.replace(/{{DD}}/g,e.date?e.date.substring(8,10):"DD"),s=s.replace(/{{HH}}/g,e.time?e.time.substring(0,2):"HH"),s=s.replace(/{{mm}}/g,e.time?e.time.substring(3,5):"mm"),s=s.replace(/{{HHMM}}/g,e.time?e.time.replace(":",""):"HHMM"),s}generateFileName(o,e,n){var i,s,v,y,h,p;let t=o;return t=t.replace(/{{YYYY}}/g,((i=e.date)==null?void 0:i.substring(0,4))||"YYYY"),t=t.replace(/{{MM}}/g,((s=e.date)==null?void 0:s.substring(5,7))||"MM"),t=t.replace(/{{DD}}/g,((v=e.date)==null?void 0:v.substring(8,10))||"DD"),t=t.replace(/{{HHMM}}/g,((y=e.time)==null?void 0:y.replace(":",""))||"HHMM"),t=t.replace(/{{HH}}/g,((h=e.time)==null?void 0:h.substring(0,2))||"HH"),t=t.replace(/{{mm}}/g,((p=e.time)==null?void 0:p.substring(3,5))||"mm"),t=t.replace(/{{meetingTitle}}/g,e.meetingTitle||"Untitled Meeting"),t=t.replace(/[\/:\[\]\*\?"<>\|#^]/g,"_").replace(/\s+/g,"_"),`${t}.${n}`}async createNote(o,e){var f,l,d;let n=this.generateFileName(this.settings.noteNameTemplate,o,"md"),t=((f=o.date)==null?void 0:f.substring(0,4))||"YYYY",i=((l=o.date)==null?void 0:l.substring(5,7))||"MM",s=(0,gt.normalizePath)(_t.join(this.settings.notesFolderPath,t,i));await this.ensureFolderExists(s);let v=(0,gt.normalizePath)(_t.join(s,n)),y=this.vault.getAbstractFileByPath(v);if(y&&y instanceof gt.TFile)switch(this.settings.duplicateStrategy){case"skip":return console.log(`Note ${v} already exists. Skipping.`),new Notification("Krisp Importer",{body:`\u0417\u0430\u043C\u0435\u0442\u043A\u0430 ${n} \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442. \u0418\u043C\u043F\u043E\u0440\u0442 \u043F\u0440\u043E\u043F\u0443\u0449\u0435\u043D.`}),{notePath:v,noteFile:y};case"overwrite":console.log(`Note ${v} already exists. Overwriting.`),await this.vault.delete(y);break;case"rename":let u=1,g=n.substring(0,n.lastIndexOf(".")),b=n.substring(n.lastIndexOf(".")+1);for(;y;)v=(0,gt.normalizePath)(_t.join(s,`${g}_${u}.${b}`)),y=this.vault.getAbstractFileByPath(v),u++;console.log(`Note ${v} will be created with a new name.`);break}let h;if(e&&o.meetingTitle){let u=_t.extname(e)||".mp3",g=this.generateFileName(this.settings.attachmentNameTemplate,o,u.substring(1)),b=this.settings.attachmentsFolderPath;!b.includes("{{YYYY}}")&&!b.includes("{{MM}}")&&(b=_t.join(b,t,i)),b=b.replace(/{{YYYY}}/g,t).replace(/{{MM}}/g,i).replace(/{{DD}}/g,((d=o.date)==null?void 0:d.substring(8,10))||"DD"),await this.ensureFolderExists((0,gt.normalizePath)(b)),h=(0,gt.normalizePath)(_t.join(b,g));let k=this.vault.getAbstractFileByPath(h);if(k){let x=1,P=g.substring(0,g.lastIndexOf(".")),F=g.substring(g.lastIndexOf(".")+1);for(;k;)h=(0,gt.normalizePath)(_t.join(b,`${P}_${x}.${F}`)),k=this.vault.getAbstractFileByPath(h),x++}}let p=this.applyTemplate(this.settings.noteContentTemplate,o,this.settings,v.split("/").pop(),h),c=await this.vault.create(v,p);return console.log(`Note created: ${v}`),{notePath:v,audioDestPath:h,noteFile:c}}async ensureFolderExists(o){let e=(0,gt.normalizePath)(o);if(e==="/"||e==="")return;if(!this.vault.getAbstractFileByPath(e)){let t=e.split("/"),i="";for(let s of t){if(!s)continue;if(i=i?`${i}/${s}`:s,!this.vault.getAbstractFileByPath(i))try{await this.vault.createFolder(i)}catch(y){if(!this.vault.getAbstractFileByPath(i))throw console.error(`Failed to create folder ${i}:`,y),y}}}}};var Ft=require("obsidian"),Ct=class{constructor(){}showSuccess(o,e=5e3){new Ft.Notice(o,e),console.log(`[Krisp Importer] SUCCESS: ${o}`)}showError(o,e=8e3){new Ft.Notice(`ERROR: ${o}`,e),console.error(`[Krisp Importer] ERROR: ${o}`)}showWarning(o,e=6e3){new Ft.Notice(`WARNING: ${o}`,e),console.warn(`[Krisp Importer] WARNING: ${o}`)}showInfo(o,e=4e3){new Ft.Notice(o,e),console.log(`[Krisp Importer] INFO: ${o}`)}showDuplicateFound(o,e,n){let t=`\u0414\u0443\u0431\u043B\u0438\u043A\u0430\u0442 "${o}": ${n} (\u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F: ${e})`;this.showWarning(t)}showBatchImportResult(o,e,n,t){o>0&&e===0?this.showSuccess(`\u0418\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D: ${o} \u0432\u0441\u0442\u0440\u0435\u0447(\u0438) \u0438\u0437 "${t}"`,8e3):o>0&&e>0?this.showWarning(`\u0418\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D \u0447\u0430\u0441\u0442\u0438\u0447\u043D\u043E: ${o} \u0443\u0441\u043F\u0435\u0448\u043D\u043E, ${e} \u043E\u0448\u0438\u0431\u043E\u043A \u0438\u0437 "${t}"`,1e4):e>0?this.showError(`\u0418\u043C\u043F\u043E\u0440\u0442 \u043D\u0435 \u0443\u0434\u0430\u043B\u0441\u044F: ${e} \u043E\u0448\u0438\u0431\u043E\u043A \u0432 "${t}"`,1e4):this.showInfo(`\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0432 "${t}"`,6e3),n>0&&this.showInfo(`\u041F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u043E \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432: ${n}`,4e3)}};var St=xt(require("path")),bt=require("fs"),Zt=class{constructor(o,e){this.app=o,this.zipExtractor=new $t(this.app),this.noteParser=new Mt,this.noteCreator=null,this.notificationService=new Ct,this.statusBarService=e||null}async processZipFile(o,e){var s,v,y;let n=null,t=St.basename(o),i=new yt.Notice(`Processing ${t}...`,0);this.statusBarService&&this.statusBarService.setProcessing(t),this.noteCreator=new Wt(this.app,e);try{let h=`${t.replace(".zip","")}_${Date.now()}`;if(n=await this.zipExtractor.extract(o,h),!n){this.notificationService.showError(`Failed to extract ZIP file: ${t}`),i&&i.hide();return}let c=(await bt.promises.readdir(n,{withFileTypes:!0})).filter(d=>d.isDirectory());if(c.length===0){this.notificationService.showError(`No meeting folders found in ZIP: ${t}`),i&&i.hide(),await this.zipExtractor.cleanup(n);return}let f=0,l=0;for(let d of c){let u=d.name,g=(0,yt.normalizePath)(St.join(n,u));new yt.Notice(`Processing meeting: ${u}...`);let b="meeting_notes.txt",k="transcript.txt",x="recording.mp3",P=(0,yt.normalizePath)(St.join(g,b)),F=(0,yt.normalizePath)(St.join(g,k)),R=await bt.promises.readdir(g),M=R.find(G=>G.toLowerCase().startsWith("recording.")&&(G.toLowerCase().endsWith(".mp3")||G.toLowerCase().endsWith(".m4a")))||x,H=(0,yt.normalizePath)(St.join(g,M)),_="",N="";try{_=await bt.promises.readFile(P,"utf-8")}catch(G){this.notificationService.showError(`Failed to read ${b} from ${u} in ${t}`);let O=R.find(Q=>Q.toLowerCase().includes("notes")&&Q.toLowerCase().endsWith(".txt")&&Q!==b);if(O){this.notificationService.showInfo(`Attempting to use alternative notes file: ${O}`);try{_=await bt.promises.readFile(St.join(g,O),"utf-8")}catch(Q){this.notificationService.showError(`Failed to read alternative notes file ${O} for ${u}.`),l++;continue}}else{l++;continue}}try{N=await bt.promises.readFile(F,"utf-8")}catch(G){this.notificationService.showWarning(`Failed to read ${k} for ${u} in ${t}. Transcript might be missing.`)}let a=this.noteParser.parseMeetingNotes(_,N,u);console.log(`[DEBUG] Parsed data for ${u}:`,{title:a.meetingTitle,date:a.date,time:a.time,participants:a.participants,hasTranscript:!!a.formattedTranscript,transcriptLength:((s=a.formattedTranscript)==null?void 0:s.length)||0,summaryLength:((v=a.summary)==null?void 0:v.length)||0,actionItemsLength:((y=a.actionItems)==null?void 0:y.length)||0});let B=await this.noteCreator.createNote(a,H);if(!B.notePath){this.notificationService.showError(`Failed to create note for ${u}`),l++;continue}console.log(`[DEBUG] Note created at: ${B.notePath}, audio dest: ${B.audioDestPath}`);try{await bt.promises.access(H),console.log(`[DEBUG] Audio file found: ${H}`);let G=await bt.promises.readFile(H);if(console.log(`[DEBUG] Audio file read, size: ${G.length} bytes`),B.audioDestPath){let O=this.app.vault.getAbstractFileByPath(B.audioDestPath);O&&O instanceof yt.TFile?(this.notificationService.showInfo(`Overwriting existing audio file: ${B.audioDestPath}`),await this.app.vault.modifyBinary(O,G)):await this.app.vault.createBinary(B.audioDestPath,G),console.log(`[DEBUG] Audio file saved to: ${B.audioDestPath}`),this.notificationService.showInfo(`Audio file for ${u} saved: ${B.audioDestPath}`)}}catch(G){console.log("[DEBUG] Audio file error:",G),this.notificationService.showWarning(`Audio file ${M} not found in ${g}. Skipped audio.`)}this.notificationService.showSuccess(`Successfully imported meeting ${u} to ${B.notePath}`),f++}if(i&&i.hide(),this.statusBarService&&(l===0&&f>0?this.statusBarService.showTemporaryMessage(`\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043E: ${f}`,3e3):l>0&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043E\u043A: ${l}`)),this.notificationService.showBatchImportResult(f,l,0,t),console.log(`[DEBUG] deleteZipAfterImport setting: ${e.deleteZipAfterImport}`),console.log(`[DEBUG] errorCount: ${l}, importedCount: ${f}`),e.deleteZipAfterImport&&l===0&&f>0)try{console.log(`[DEBUG] Attempting to delete ZIP file: ${o}`),await bt.promises.rm(o),this.notificationService.showInfo(`Deleted original ZIP file: ${t}`),console.log(`[DEBUG] Successfully deleted ZIP file: ${o}`)}catch(d){console.error("[DEBUG] Failed to delete ZIP file:",d),this.notificationService.showError(`Failed to delete original ZIP file ${t}: ${d.message}`)}else e.deleteZipAfterImport?console.log(`[DEBUG] ZIP file not deleted due to errors or no imports. errorCount: ${l}, importedCount: ${f}`):console.log("[DEBUG] ZIP file deletion disabled in settings")}catch(h){i&&i.hide(),this.statusBarService&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043A\u0430: ${h.message}`),console.error("Error processing ZIP file:",h),this.notificationService.showError(`An unexpected error occurred while processing ${t}: ${h.message}`)}finally{n&&await this.zipExtractor.cleanup(n)}}};var pt=xt(require("fs")),Nt=xt(require("path")),jt=class{constructor(o,e,n,t,i){this.watcher=null;this.isWatching=!1;this.watchedPath="";this.app=o,this.processingService=e,this.notificationService=n,this.settingsProvider=t,this.statusBarService=i||null}async startWatching(o){if(this.isWatching&&await this.stopWatching(),!o||o.trim()===""){this.notificationService.showError("No watched folder specified");return}try{if(!pt.existsSync(o)){this.notificationService.showError(`Folder does not exist: ${o}`);return}if(!pt.statSync(o).isDirectory()){this.notificationService.showError(`\u0423\u043A\u0430\u0437\u0430\u043D\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043F\u0430\u043F\u043A\u043E\u0439: ${o}`);return}this.watchedPath=o,this.watcher=pt.watch(o,{persistent:!0},(n,t)=>{console.log(`[FileWatcher] Event detected: ${n}, filename: ${t}`),n==="rename"&&t&&this.handleFileEvent(t)}),this.isWatching=!0,this.statusBarService&&this.statusBarService.setWatching(o),this.notificationService.showSuccess(`\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u0437\u0430\u043F\u0443\u0449\u0435\u043D\u043E: ${o}`),console.log(`[Krisp Importer] FileWatcher started for: ${o}`)}catch(e){this.statusBarService&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F: ${e.message}`),console.error("[Krisp Importer] Error starting file watcher:",e),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0443\u0441\u043A\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F: ${e.message}`)}}async stopWatching(){this.watcher&&(this.watcher.close(),this.watcher=null),this.isWatching&&(this.isWatching=!1,this.statusBarService&&this.statusBarService.setIdle("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),this.notificationService.showInfo("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),console.log("[Krisp Importer] FileWatcher stopped"))}isCurrentlyWatching(){return this.isWatching}getWatchedPath(){return this.watchedPath}async handleFileEvent(o){console.log(`[FileWatcher] Processing file event for: ${o}`);try{if(!o.toLowerCase().endsWith(".zip")){console.log(`[FileWatcher] Ignoring non-ZIP file: ${o}`);return}let e=Nt.join(this.watchedPath,o);if(!pt.existsSync(e)||!pt.statSync(e).isFile())return;console.log(`[Krisp Importer] New ZIP file detected: ${o}`),await this.waitForFileStability(e);let t=this.settingsProvider();await this.processNewZipFile(e,t)}catch(e){console.error("[Krisp Importer] Error handling file event:",e),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0444\u0430\u0439\u043B\u0430 ${o}: ${e.message}`)}}async waitForFileStability(o,e=5e3){let t=0,i=0,s=3;return new Promise(v=>{let y=()=>{try{if(!pt.existsSync(o)){v();return}let c=pt.statSync(o).size;if(c===t&&c>0){if(i++,i>=s){v();return}}else i=0;t=c,Date.now()-h<e?setTimeout(y,500):v()}catch(p){v()}},h=Date.now();y()})}async processNewZipFile(o,e){try{console.log(`[FileWatcher] Processing new ZIP file: ${o}`),console.log(`[FileWatcher] Settings - deleteZipAfterImport: ${e.deleteZipAfterImport}`),this.notificationService.showInfo(`\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D \u043D\u043E\u0432\u044B\u0439 \u0444\u0430\u0439\u043B: ${Nt.basename(o)}`),await this.processingService.processZipFile(o,e)}catch(n){console.error("[Krisp Importer] Error processing new ZIP file:",n),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0439 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0444\u0430\u0439\u043B\u0430: ${n.message}`)}}async scanExistingFiles(){if(!(!this.isWatching||!this.watchedPath))try{let e=pt.readdirSync(this.watchedPath).filter(i=>i.toLowerCase().endsWith(".zip"));if(e.length===0){this.notificationService.showInfo("\u0412 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043D\u0435\u0442 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432");return}this.notificationService.showInfo(`\u041D\u0430\u0439\u0434\u0435\u043D\u043E ${e.length} ZIP-\u0444\u0430\u0439\u043B\u043E\u0432 \u0434\u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438`);let n=0,t=0;for(let i of e)try{let s=Nt.join(this.watchedPath,i),v=this.settingsProvider();await this.processNewZipFile(s,v),n++}catch(s){console.error(`[Krisp Importer] Error processing ${i}:`,s),t++}this.notificationService.showBatchImportResult(n,t,0,"\u043C\u0430\u0441\u0441\u043E\u0432\u043E\u0435 \u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435")}catch(o){console.error("[Krisp Importer] Error scanning existing files:",o),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043F\u0430\u043F\u043A\u0438: ${o.message}`)}}};var Vt=require("obsidian"),kt=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(kt||{}),Ut=class{constructor(o=1){this.logs=[];this.maxLogEntries=1e3;this.currentLogLevel=1;this.currentLogLevel=o,this.log(1,"System","LoggingService initialized")}log(o,e,n,t){if(o<this.currentLogLevel)return;let i={timestamp:new Date,level:o,category:e,message:n,details:t};this.logs.push(i),this.logs.length>this.maxLogEntries&&(this.logs=this.logs.slice(-this.maxLogEntries));let s=kt[o],y=`[${i.timestamp.toISOString()}] [${s}] [${e}] ${n}`;switch(o){case 0:console.debug(y,t);break;case 1:console.info(y,t);break;case 2:console.warn(y,t);break;case 3:console.error(y,t);break}}debug(o,e,n){this.log(0,o,e,n)}info(o,e,n){this.log(1,o,e,n)}warn(o,e,n){this.log(2,o,e,n)}error(o,e,n){this.log(3,o,e,n)}logZipProcessingStart(o){this.info("Processing",`\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 ZIP-\u0444\u0430\u0439\u043B\u0430: ${o}`)}logZipProcessingSuccess(o,e){this.info("Processing",`\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D ZIP-\u0444\u0430\u0439\u043B: ${o}`,{noteName:e})}logZipProcessingError(o,e){this.error("Processing",`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 ZIP-\u0444\u0430\u0439\u043B\u0430: ${o}`,{error:e.message,stack:e.stack})}logFileWatcherStart(o){this.info("FileWatcher",`\u0417\u0430\u043F\u0443\u0449\u0435\u043D\u043E \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438: ${o}`)}logFileWatcherStop(){this.info("FileWatcher","\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E")}logFileWatcherError(o){this.error("FileWatcher","\u041E\u0448\u0438\u0431\u043A\u0430 \u0432 FileWatcher",{error:o.message,stack:o.stack})}logDuplicateHandling(o,e,n){this.info("Duplicates",`\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u0430: ${e}`,{strategy:o,action:n})}logSettingsChange(o,e,n){this.info("Settings",`\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430: ${o}`,{oldValue:e,newValue:n})}logNoteCreation(o,e){this.info("NoteCreator",`\u0421\u043E\u0437\u0434\u0430\u043D\u0430 \u0437\u0430\u043C\u0435\u0442\u043A\u0430: ${o}`,{templateUsed:e})}logAudioFileCopy(o,e){this.info("AudioCopy",`\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B: ${o} -> ${e}`)}getAllLogs(){return[...this.logs]}getLogsByLevel(o){return this.logs.filter(e=>e.level>=o)}getLogsByCategory(o){return this.logs.filter(e=>e.category===o)}getRecentLogs(o=50){return this.logs.slice(-o)}exportLogsAsText(){return this.logs.map(e=>{let n=e.timestamp.toISOString(),t=kt[e.level].padEnd(5),i=e.category.padEnd(12),s=`[${n}] [${t}] [${i}] ${e.message}`;return e.details&&(s+=`
    Details: ${JSON.stringify(e.details,null,2)}`),s}).join(`
`)}exportLogsAsJSON(){return JSON.stringify(this.logs,null,2)}clearLogs(){let o=this.logs.length;this.logs=[],this.info("System",`\u041E\u0447\u0438\u0449\u0435\u043D\u044B \u043B\u043E\u0433\u0438 (\u0431\u044B\u043B\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439: ${o})`)}setLogLevel(o){let e=this.currentLogLevel;this.currentLogLevel=o,this.info("System",`\u0418\u0437\u043C\u0435\u043D\u0435\u043D \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F: ${kt[e]} -> ${kt[o]}`)}getLogStats(){let o={},e={};return this.logs.forEach(n=>{let t=kt[n.level];o[t]=(o[t]||0)+1,e[n.category]=(e[n.category]||0)+1}),{total:this.logs.length,byLevel:o,byCategory:e}}async copyLogsToClipboard(){try{let o=this.exportLogsAsText();await navigator.clipboard.writeText(o),new Vt.Notice("\u{1F4CB} Logs copied to clipboard",3e3),this.info("System","\u041B\u043E\u0433\u0438 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430")}catch(o){this.error("System","\u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043B\u043E\u0433\u043E\u0432 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430",o),new Vt.Notice("\u274C Error copying logs",5e3)}}};var re=require("obsidian");var Kt=class{constructor(o){this.statusBarItem=null;this.currentStatus="idle";this.currentMessage="";this.plugin=o,this.initialize()}initialize(){this.statusBarItem=this.plugin.addStatusBarItem(),this.statusBarItem.addClass("krisp-importer-status"),this.statusBarItem.style.cursor="pointer",this.statusBarItem.addEventListener("click",()=>{this.plugin.app.setting.open(),this.plugin.app.setting.openTabById("krisp-notes-importer")}),this.updateDisplay()}updateDisplay(){if(!this.statusBarItem)return;let{icon:o,text:e,color:n}=this.getStatusDisplay();this.statusBarItem.empty(),this.statusBarItem.removeClass("idle","watching","processing","error");let t=this.currentStatus.toLowerCase();this.statusBarItem.addClass(t);let i=this.statusBarItem.createEl("span");i.style.marginRight="4px",(0,re.setIcon)(i,o);let s=this.statusBarItem.createEl("span");s.textContent=e,this.statusBarItem.style.color=n,this.statusBarItem.setAttribute("aria-label",this.getTooltipText())}getStatusDisplay(){switch(this.currentStatus){case"idle":return{icon:"pause-circle",text:"Krisp",color:"var(--text-muted)"};case"watching":return{icon:"eye",text:"Krisp",color:"var(--color-green)"};case"processing":return{icon:"loader-2",text:"Krisp",color:"var(--color-blue)"};case"error":return{icon:"alert-circle",text:"Krisp",color:"var(--color-red)"};default:return{icon:"help-circle",text:"Krisp",color:"var(--text-muted)"}}}getTooltipText(){let o="Krisp Notes Importer";switch(this.currentStatus){case"idle":return`${o}: \u041D\u0435\u0430\u043A\u0442\u0438\u0432\u0435\u043D`;case"watching":return`${o}: \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u043D\u043E${this.currentMessage?` - ${this.currentMessage}`:""}`;case"processing":return`${o}: \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0444\u0430\u0439\u043B\u0430${this.currentMessage?` - ${this.currentMessage}`:""}`;case"error":return`${o}: \u041E\u0448\u0438\u0431\u043A\u0430${this.currentMessage?` - ${this.currentMessage}`:""}`;default:return o}}setIdle(o){this.currentStatus="idle",this.currentMessage=o||"",this.updateDisplay()}setWatching(o){this.currentStatus="watching",this.currentMessage=o?`Watching: ${o}`:"",this.updateDisplay()}setProcessing(o){this.currentStatus="processing",this.currentMessage=o?`\u0424\u0430\u0439\u043B: ${o}`:"",this.updateDisplay()}setError(o){this.currentStatus="error",this.currentMessage=o||"",this.updateDisplay(),setTimeout(()=>{this.currentStatus==="error"&&this.setIdle()},1e4)}showTemporaryMessage(o,e=3e3){let n=this.currentStatus,t=this.currentMessage;this.currentMessage=o,this.updateDisplay(),setTimeout(()=>{this.currentStatus=n,this.currentMessage=t,this.updateDisplay()},e)}getCurrentStatus(){return this.currentStatus}isActive(){return this.currentStatus==="watching"||this.currentStatus==="processing"}destroy(){this.statusBarItem&&(this.statusBarItem.remove(),this.statusBarItem=null)}startProcessingAnimation(){if(!this.statusBarItem||this.currentStatus!=="processing")return;let o=this.statusBarItem.querySelector("span:first-child");o&&(o.style.animation="spin 1s linear infinite")}stopAnimation(){if(!this.statusBarItem)return;let o=this.statusBarItem.querySelector("span:first-child");o&&(o.style.animation="")}updateDisplayWithAnimation(){this.updateDisplay(),this.currentStatus==="processing"?this.startProcessingAnimation():this.stopAnimation()}};var Yt=class extends ht.Plugin{async onload(){console.log("Loading Krisp Notes Importer plugin..."),this.loggingService=new Ut(1),this.loggingService.info("Plugin","\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0443 \u043F\u043B\u0430\u0433\u0438\u043D\u0430 Krisp Notes Importer"),this.settingsManager=new Ot(this),await this.settingsManager.loadSettings(),this.loggingService.info("Plugin","Settings loaded");let e=this.settingsManager.getSetting("language")||"en";this.localizationService=new Et(e),this.loggingService.info("Plugin",`\u041B\u043E\u043A\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u0430: ${e}`),this.notificationService=new Ct,this.statusBarService=new Kt(this),this.processingService=new Zt(this.app,this.statusBarService),this.loggingService.info("Plugin","\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044B \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u044B"),this.fileWatcherService=new jt(this.app,this.processingService,this.notificationService,()=>this.settingsManager.getAllSettings(),this.statusBarService),this.addSettingTab(new Rt(this.app,this)),this.addCommand({id:"import-krisp-zip-manually",name:this.localizationService.t("commands.importZip"),callback:()=>{this.loggingService.info("Commands","\u0417\u0430\u043F\u0443\u0449\u0435\u043D\u0430 \u043A\u043E\u043C\u0430\u043D\u0434\u0430 \u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430 ZIP-\u0444\u0430\u0439\u043B\u0430"),new qt(this.app,async i=>{i&&i.trim()!==""?(this.loggingService.info("Commands",`\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u0440\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 \u0444\u0430\u0439\u043B\u0430: ${i}`),new ht.Notice(`Starting import for: ${i}`),await this.processingService.processZipFile(i,this.settingsManager.settings)):(this.loggingService.warn("Commands","\u041F\u043E\u043F\u044B\u0442\u043A\u0430 \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0441 \u043F\u0443\u0441\u0442\u044B\u043C \u043F\u0443\u0442\u0435\u043C \u043A \u0444\u0430\u0439\u043B\u0443"),new ht.Notice("File path cannot be empty."))},this.localizationService).open()}}),this.addCommand({id:"start-auto-watching",name:this.localizationService.t("commands.startWatching"),callback:async()=>{let i=this.settingsManager.getSetting("watchedFolderPath");i&&i.trim()!==""?(this.statusBarService.setWatching(i),await this.fileWatcherService.startWatching(i)):(this.statusBarService.setError("No watched folder specified"),new ht.Notice("Please set the watched folder path in settings first."))}}),this.addCommand({id:"stop-auto-watching",name:this.localizationService.t("commands.stopWatching"),callback:async()=>{this.statusBarService.setIdle("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),await this.fileWatcherService.stopWatching()}}),this.addCommand({id:"scan-existing-files",name:this.localizationService.t("commands.scanExisting"),callback:async()=>{this.statusBarService.setProcessing("\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432"),await this.fileWatcherService.scanExistingFiles(),this.statusBarService.setIdle("\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E")}}),this.addCommand({id:"debug-settings",name:this.localizationService.t("commands.debugSettings"),callback:()=>{let i=this.settingsManager.getAllSettings();console.log("[Krisp Importer] Current settings:",i),new ht.Notice(`Settings logged to console. deleteZipAfterImport: ${i.deleteZipAfterImport}`,5e3)}}),this.addCommand({id:"check-watching-status",name:this.localizationService.t("commands.checkStatus"),callback:()=>{let i=this.fileWatcherService.isCurrentlyWatching(),s=this.fileWatcherService.getWatchedPath(),v=this.settingsManager.getSetting("autoScanEnabled");console.log("[Krisp Importer] Watching status:",{isWatching:i,watchedPath:s,autoScanEnabled:v});let y=i?`\u2705 \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u043D\u043E: ${s}`:`\u274C \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u043E. AutoScan \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445: ${v?"\u0432\u043A\u043B\u044E\u0447\u0435\u043D":"\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D"}`;new ht.Notice(y,7e3)}});let n=this.settingsManager.getSetting("autoScanEnabled"),t=this.settingsManager.getSetting("watchedFolderPath");n&&t&&t.trim()!==""?(this.loggingService.info("Plugin",`\u0410\u0432\u0442\u043E\u0437\u0430\u043F\u0443\u0441\u043A \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u043F\u0430\u043F\u043A\u0438: ${t}`),this.statusBarService.setWatching(t),await this.fileWatcherService.startWatching(t)):this.statusBarService.setIdle("\u0413\u043E\u0442\u043E\u0432 \u043A \u0440\u0430\u0431\u043E\u0442\u0435"),this.loggingService.info("Plugin","\u041F\u043B\u0430\u0433\u0438\u043D Krisp Notes Importer \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E"),console.log("Krisp Notes Importer plugin loaded successfully.")}onunload(){this.fileWatcherService&&this.fileWatcherService.stopWatching(),this.statusBarService&&this.statusBarService.destroy(),this.loggingService&&this.loggingService.info("Plugin","\u0412\u044B\u0433\u0440\u0443\u0436\u0430\u044E \u043F\u043B\u0430\u0433\u0438\u043D Krisp Notes Importer"),console.log("Unloading Krisp Notes Importer plugin.")}},qt=class extends ht.Modal{constructor(e,n,t){super(e);this.onSubmitCallback=n,this.localization=t}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.localization.t("modal.importZip.title")}),new ht.Setting(e).setName(this.localization.t("modal.importZip.pathLabel")).setDesc(this.localization.t("modal.importZip.pathDesc")).addText(n=>{n.setPlaceholder("/path/to/your/krisp_meeting.zip"),n.onChange(t=>{this.filePath=t}),n.inputEl.style.width="100%",n.inputEl.addEventListener("keypress",t=>{t.key==="Enter"&&(t.preventDefault(),this.submitForm())})}),new ht.Setting(e).addButton(n=>n.setButtonText(this.localization.t("modal.importZip.importButton")).setCta().onClick(()=>{this.submitForm()}))}submitForm(){this.filePath&&this.filePath.trim()!==""?(this.onSubmitCallback(this.filePath.trim()),this.close()):new ht.Notice(this.localization.t("modal.importZip.emptyPathError"))}onClose(){let{contentEl:e}=this;e.empty()}};
/*! Bundled license information:

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)
*/
