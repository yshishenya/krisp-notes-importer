/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var oe=Object.create;var Dt=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var ce=Object.getOwnPropertyNames;var he=Object.getPrototypeOf,ue=Object.prototype.hasOwnProperty;var de=(b,o)=>()=>(o||b((o={exports:{}}).exports,o),o.exports),pe=(b,o)=>{for(var e in o)Dt(b,e,{get:o[e],enumerable:!0})},Qt=(b,o,e,n)=>{if(o&&typeof o=="object"||typeof o=="function")for(let t of ce(o))!ue.call(b,t)&&t!==e&&Dt(b,t,{get:()=>o[t],enumerable:!(n=le(o,t))||n.enumerable});return b};var xt=(b,o,e)=>(e=b!=null?oe(he(b)):{},Qt(o||!b||!b.__esModule?Dt(e,"default",{value:b,enumerable:!0}):e,b)),fe=b=>Qt(Dt({},"__esModule",{value:!0}),b);var ee=de((te,Gt)=>{(function(b){typeof te=="object"&&typeof Gt!="undefined"?Gt.exports=b():typeof define=="function"&&define.amd?define([],b):(typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this).JSZip=b()})(function(){return function b(o,e,n){function t(u,d){if(!e[u]){if(!o[u]){var g=typeof require=="function"&&require;if(!d&&g)return g(u,!0);if(i)return i(u,!0);var y=new Error("Cannot find module '"+u+"'");throw y.code="MODULE_NOT_FOUND",y}var l=e[u]={exports:{}};o[u][0].call(l.exports,function(f){var c=o[u][1][f];return t(c||f)},l,l.exports,b,o,e,n)}return e[u].exports}for(var i=typeof require=="function"&&require,s=0;s<n.length;s++)t(n[s]);return t}({1:[function(b,o,e){"use strict";var n=b("./utils"),t=b("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(s){for(var u,d,g,y,l,f,c,p=[],h=0,m=s.length,S=m,k=n.getTypeOf(s)!=="string";h<s.length;)S=m-h,g=k?(u=s[h++],d=h<m?s[h++]:0,h<m?s[h++]:0):(u=s.charCodeAt(h++),d=h<m?s.charCodeAt(h++):0,h<m?s.charCodeAt(h++):0),y=u>>2,l=(3&u)<<4|d>>4,f=1<S?(15&d)<<2|g>>6:64,c=2<S?63&g:64,p.push(i.charAt(y)+i.charAt(l)+i.charAt(f)+i.charAt(c));return p.join("")},e.decode=function(s){var u,d,g,y,l,f,c=0,p=0,h="data:";if(s.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var m,S=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&S--,s.charAt(s.length-2)===i.charAt(64)&&S--,S%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=t.uint8array?new Uint8Array(0|S):new Array(0|S);c<s.length;)u=i.indexOf(s.charAt(c++))<<2|(y=i.indexOf(s.charAt(c++)))>>4,d=(15&y)<<4|(l=i.indexOf(s.charAt(c++)))>>2,g=(3&l)<<6|(f=i.indexOf(s.charAt(c++))),m[p++]=u,l!==64&&(m[p++]=d),f!==64&&(m[p++]=g);return m}},{"./support":30,"./utils":32}],2:[function(b,o,e){"use strict";var n=b("./external"),t=b("./stream/DataWorker"),i=b("./stream/Crc32Probe"),s=b("./stream/DataLengthProbe");function u(d,g,y,l,f){this.compressedSize=d,this.uncompressedSize=g,this.crc32=y,this.compression=l,this.compressedContent=f}u.prototype={getContentWorker:function(){var d=new t(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),g=this;return d.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new t(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,g,y){return d.pipe(new i).pipe(new s("uncompressedSize")).pipe(g.compressWorker(y)).pipe(new s("compressedSize")).withStreamInfo("compression",g)},o.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(b,o,e){"use strict";var n=b("./stream/GenericWorker");e.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},e.DEFLATE=b("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(b,o,e){"use strict";var n=b("./utils"),t=function(){for(var i,s=[],u=0;u<256;u++){i=u;for(var d=0;d<8;d++)i=1&i?3988292384^i>>>1:i>>>1;s[u]=i}return s}();o.exports=function(i,s){return i!==void 0&&i.length?n.getTypeOf(i)!=="string"?function(u,d,g,y){var l=t,f=y+g;u^=-1;for(var c=y;c<f;c++)u=u>>>8^l[255&(u^d[c])];return-1^u}(0|s,i,i.length,0):function(u,d,g,y){var l=t,f=y+g;u^=-1;for(var c=y;c<f;c++)u=u>>>8^l[255&(u^d.charCodeAt(c))];return-1^u}(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(b,o,e){"use strict";e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null},{}],6:[function(b,o,e){"use strict";var n=null;n=typeof Promise!="undefined"?Promise:b("lie"),o.exports={Promise:n}},{lie:37}],7:[function(b,o,e){"use strict";var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",t=b("pako"),i=b("./utils"),s=b("./stream/GenericWorker"),u=n?"uint8array":"array";function d(g,y){s.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=y,this.meta={}}e.magic="\b\0",i.inherits(d,s),d.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(u,g.data),!1)},d.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new t[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(y){g.push({data:y,meta:g.meta})}},e.compressWorker=function(g){return new d("Deflate",g)},e.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(b,o,e){"use strict";function n(l,f){var c,p="";for(c=0;c<f;c++)p+=String.fromCharCode(255&l),l>>>=8;return p}function t(l,f,c,p,h,m){var S,k,E=l.file,B=l.compression,z=m!==u.utf8encode,$=i.transformTo("string",m(E.name)),T=i.transformTo("string",u.utf8encode(E.name)),M=E.comment,H=i.transformTo("string",m(M)),_=i.transformTo("string",u.utf8encode(M)),F=T.length!==E.name.length,a=_.length!==M.length,N="",G="",O="",Q=E.dir,W=E.date,J={crc32:0,compressedSize:0,uncompressedSize:0};f&&!c||(J.crc32=l.crc32,J.compressedSize=l.compressedSize,J.uncompressedSize=l.uncompressedSize);var A=0;f&&(A|=8),z||!F&&!a||(A|=2048);var C=0,q=0;Q&&(C|=16),h==="UNIX"?(q=798,C|=function(U,nt){var lt=U;return U||(lt=nt?16893:33204),(65535&lt)<<16}(E.unixPermissions,Q)):(q=20,C|=function(U){return 63&(U||0)}(E.dosPermissions)),S=W.getUTCHours(),S<<=6,S|=W.getUTCMinutes(),S<<=5,S|=W.getUTCSeconds()/2,k=W.getUTCFullYear()-1980,k<<=4,k|=W.getUTCMonth()+1,k<<=5,k|=W.getUTCDate(),F&&(G=n(1,1)+n(d($),4)+T,N+="up"+n(G.length,2)+G),a&&(O=n(1,1)+n(d(H),4)+_,N+="uc"+n(O.length,2)+O);var K="";return K+=`
\0`,K+=n(A,2),K+=B.magic,K+=n(S,2),K+=n(k,2),K+=n(J.crc32,4),K+=n(J.compressedSize,4),K+=n(J.uncompressedSize,4),K+=n($.length,2),K+=n(N.length,2),{fileRecord:g.LOCAL_FILE_HEADER+K+$+N,dirRecord:g.CENTRAL_FILE_HEADER+n(q,2)+K+n(H.length,2)+"\0\0\0\0"+n(C,4)+n(p,4)+$+N+H}}var i=b("../utils"),s=b("../stream/GenericWorker"),u=b("../utf8"),d=b("../crc32"),g=b("../signature");function y(l,f,c,p){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=c,this.encodeFileName=p,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(y,s),y.prototype.push=function(l){var f=l.meta.percent||0,c=this.entriesCount,p=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,s.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:c?(f+100*(c-p-1))/c:100}}))},y.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var f=this.streamFiles&&!l.file.dir;if(f){var c=t(l,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(l){this.accumulate=!1;var f=this.streamFiles&&!l.file.dir,c=t(l,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),f)this.push({data:function(p){return g.DATA_DESCRIPTOR+n(p.crc32,4)+n(p.compressedSize,4)+n(p.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var l=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var c=this.bytesWritten-l,p=function(h,m,S,k,E){var B=i.transformTo("string",E(k));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(h,2)+n(h,2)+n(m,4)+n(S,4)+n(B.length,2)+B}(this.dirRecords.length,c,l,this.zipComment,this.encodeFileName);this.push({data:p,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(l){this._sources.push(l);var f=this;return l.on("data",function(c){f.processChunk(c)}),l.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),l.on("error",function(c){f.error(c)}),this},y.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(l){var f=this._sources;if(!s.prototype.error.call(this,l))return!1;for(var c=0;c<f.length;c++)try{f[c].error(l)}catch(p){}return!0},y.prototype.lock=function(){s.prototype.lock.call(this);for(var l=this._sources,f=0;f<l.length;f++)l[f].lock()},o.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(b,o,e){"use strict";var n=b("../compressions"),t=b("./ZipFileWorker");e.generateWorker=function(i,s,u){var d=new t(s.streamFiles,u,s.platform,s.encodeFileName),g=0;try{i.forEach(function(y,l){g++;var f=function(m,S){var k=m||S,E=n[k];if(!E)throw new Error(k+" is not a valid compression method !");return E}(l.options.compression,s.compression),c=l.options.compressionOptions||s.compressionOptions||{},p=l.dir,h=l.date;l._compressWorker(f,c).withStreamInfo("file",{name:y,dir:p,date:h,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(d)}),d.entriesCount=g}catch(y){d.error(y)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(b,o,e){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new n;for(var i in this)typeof this[i]!="function"&&(t[i]=this[i]);return t}}(n.prototype=b("./object")).loadAsync=b("./load"),n.support=b("./support"),n.defaults=b("./defaults"),n.version="3.10.1",n.loadAsync=function(t,i){return new n().loadAsync(t,i)},n.external=b("./external"),o.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(b,o,e){"use strict";var n=b("./utils"),t=b("./external"),i=b("./utf8"),s=b("./zipEntries"),u=b("./stream/Crc32Probe"),d=b("./nodejsUtils");function g(y){return new t.Promise(function(l,f){var c=y.decompressed.getContentWorker().pipe(new u);c.on("error",function(p){f(p)}).on("end",function(){c.streamInfo.crc32!==y.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}o.exports=function(y,l){var f=this;return l=n.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),d.isNode&&d.isStream(y)?t.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",y,!0,l.optimizedBinaryString,l.base64).then(function(c){var p=new s(l);return p.load(c),p}).then(function(c){var p=[t.Promise.resolve(c)],h=c.files;if(l.checkCRC32)for(var m=0;m<h.length;m++)p.push(g(h[m]));return t.Promise.all(p)}).then(function(c){for(var p=c.shift(),h=p.files,m=0;m<h.length;m++){var S=h[m],k=S.fileNameStr,E=n.resolve(S.fileNameStr);f.file(E,S.decompressed,{binary:!0,optimizedBinaryString:!0,date:S.date,dir:S.dir,comment:S.fileCommentStr.length?S.fileCommentStr:null,unixPermissions:S.unixPermissions,dosPermissions:S.dosPermissions,createFolders:l.createFolders}),S.dir||(f.file(E).unsafeOriginalName=k)}return p.zipComment.length&&(f.comment=p.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(b,o,e){"use strict";var n=b("../utils"),t=b("../stream/GenericWorker");function i(s,u){t.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(u)}n.inherits(i,t),i.prototype._bindStream=function(s){var u=this;(this._stream=s).pause(),s.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},i.prototype.pause=function(){return!!t.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},o.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(b,o,e){"use strict";var n=b("readable-stream").Readable;function t(i,s,u){n.call(this,s),this._helper=i;var d=this;i.on("data",function(g,y){d.push(g)||d._helper.pause(),u&&u(y)}).on("error",function(g){d.emit("error",g)}).on("end",function(){d.push(null)})}b("../utils").inherits(t,n),t.prototype._read=function(){this._helper.resume()},o.exports=t},{"../utils":32,"readable-stream":16}],14:[function(b,o,e){"use strict";o.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(n,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,t);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,t)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var t=new Buffer(n);return t.fill(0),t},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(b,o,e){"use strict";function n(E,B,z){var $,T=i.getTypeOf(B),M=i.extend(z||{},d);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(E=h(E)),M.createFolders&&($=p(E))&&m.call(this,$,!0);var H=T==="string"&&M.binary===!1&&M.base64===!1;z&&z.binary!==void 0||(M.binary=!H),(B instanceof g&&B.uncompressedSize===0||M.dir||!B||B.length===0)&&(M.base64=!1,M.binary=!0,B="",M.compression="STORE",T="string");var _=null;_=B instanceof g||B instanceof s?B:f.isNode&&f.isStream(B)?new c(E,B):i.prepareContent(E,B,M.binary,M.optimizedBinaryString,M.base64);var F=new y(E,_,M);this.files[E]=F}var t=b("./utf8"),i=b("./utils"),s=b("./stream/GenericWorker"),u=b("./stream/StreamHelper"),d=b("./defaults"),g=b("./compressedObject"),y=b("./zipObject"),l=b("./generate"),f=b("./nodejsUtils"),c=b("./nodejs/NodejsStreamInputAdapter"),p=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var B=E.lastIndexOf("/");return 0<B?E.substring(0,B):""},h=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},m=function(E,B){return B=B!==void 0?B:d.createFolders,E=h(E),this.files[E]||n.call(this,E,null,{dir:!0,createFolders:B}),this.files[E]};function S(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var B,z,$;for(B in this.files)$=this.files[B],(z=B.slice(this.root.length,B.length))&&B.slice(0,this.root.length)===this.root&&E(z,$)},filter:function(E){var B=[];return this.forEach(function(z,$){E(z,$)&&B.push($)}),B},file:function(E,B,z){if(arguments.length!==1)return E=this.root+E,n.call(this,E,B,z),this;if(S(E)){var $=E;return this.filter(function(M,H){return!H.dir&&$.test(M)})}var T=this.files[this.root+E];return T&&!T.dir?T:null},folder:function(E){if(!E)return this;if(S(E))return this.filter(function(T,M){return M.dir&&E.test(T)});var B=this.root+E,z=m.call(this,B),$=this.clone();return $.root=z.name,$},remove:function(E){E=this.root+E;var B=this.files[E];if(B||(E.slice(-1)!=="/"&&(E+="/"),B=this.files[E]),B&&!B.dir)delete this.files[E];else for(var z=this.filter(function(T,M){return M.name.slice(0,E.length)===E}),$=0;$<z.length;$++)delete this.files[z[$].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var B,z={};try{if((z=i.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:t.utf8encode})).type=z.type.toLowerCase(),z.compression=z.compression.toUpperCase(),z.type==="binarystring"&&(z.type="string"),!z.type)throw new Error("No output type specified.");i.checkSupport(z.type),z.platform!=="darwin"&&z.platform!=="freebsd"&&z.platform!=="linux"&&z.platform!=="sunos"||(z.platform="UNIX"),z.platform==="win32"&&(z.platform="DOS");var $=z.comment||this.comment||"";B=l.generateWorker(this,z,$)}catch(T){(B=new s("error")).error(T)}return new u(B,z.type||"string",z.mimeType)},generateAsync:function(E,B){return this.generateInternalStream(E).accumulate(B)},generateNodeStream:function(E,B){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(B)}};o.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(b,o,e){"use strict";o.exports=b("stream")},{stream:void 0}],17:[function(b,o,e){"use strict";var n=b("./DataReader");function t(i){n.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}b("../utils").inherits(t,n),t.prototype.byteAt=function(i){return this.data[this.zero+i]},t.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),u=i.charCodeAt(1),d=i.charCodeAt(2),g=i.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===s&&this.data[y+1]===u&&this.data[y+2]===d&&this.data[y+3]===g)return y-this.zero;return-1},t.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),u=i.charCodeAt(1),d=i.charCodeAt(2),g=i.charCodeAt(3),y=this.readData(4);return s===y[0]&&u===y[1]&&d===y[2]&&g===y[3]},t.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./DataReader":18}],18:[function(b,o,e){"use strict";var n=b("../utils");function t(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}t.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,u=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)u=(u<<8)+this.byteAt(s);return this.index+=i,u},readString:function(i){return n.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},o.exports=t},{"../utils":32}],19:[function(b,o,e){"use strict";var n=b("./Uint8ArrayReader");function t(i){n.call(this,i)}b("../utils").inherits(t,n),t.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(b,o,e){"use strict";var n=b("./DataReader");function t(i){n.call(this,i)}b("../utils").inherits(t,n),t.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},t.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},t.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},t.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./DataReader":18}],21:[function(b,o,e){"use strict";var n=b("./ArrayReader");function t(i){n.call(this,i)}b("../utils").inherits(t,n),t.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},o.exports=t},{"../utils":32,"./ArrayReader":17}],22:[function(b,o,e){"use strict";var n=b("../utils"),t=b("../support"),i=b("./ArrayReader"),s=b("./StringReader"),u=b("./NodeBufferReader"),d=b("./Uint8ArrayReader");o.exports=function(g){var y=n.getTypeOf(g);return n.checkSupport(y),y!=="string"||t.uint8array?y==="nodebuffer"?new u(g):t.uint8array?new d(n.transformTo("uint8array",g)):new i(n.transformTo("array",g)):new s(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(b,o,e){"use strict";e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(b,o,e){"use strict";var n=b("./GenericWorker"),t=b("../utils");function i(s){n.call(this,"ConvertWorker to "+s),this.destType=s}t.inherits(i,n),i.prototype.processChunk=function(s){this.push({data:t.transformTo(this.destType,s.data),meta:s.meta})},o.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(b,o,e){"use strict";var n=b("./GenericWorker"),t=b("../crc32");function i(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}b("../utils").inherits(i,n),i.prototype.processChunk=function(s){this.streamInfo.crc32=t(s.data,this.streamInfo.crc32||0),this.push(s)},o.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(b,o,e){"use strict";var n=b("../utils"),t=b("./GenericWorker");function i(s){t.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}n.inherits(i,t),i.prototype.processChunk=function(s){if(s){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+s.data.length}t.prototype.processChunk.call(this,s)},o.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(b,o,e){"use strict";var n=b("../utils"),t=b("./GenericWorker");function i(s){t.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=n.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}n.inherits(i,t),i.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,u);break;case"uint8array":s=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":s=this.data.slice(this.index,u)}return this.index=u,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},o.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(b,o,e){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,i){return this._listeners[t].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,i){if(this._listeners[t])for(var s=0;s<this._listeners[t].length;s++)this._listeners[t][s].call(this,i)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var i=this;return t.on("data",function(s){i.processChunk(s)}),t.on("end",function(){i.end()}),t.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,i){return this.extraStreamInfo[t]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},o.exports=n},{}],29:[function(b,o,e){"use strict";var n=b("../utils"),t=b("./ConvertWorker"),i=b("./GenericWorker"),s=b("../base64"),u=b("../support"),d=b("../external"),g=null;if(u.nodestream)try{g=b("../nodejs/NodejsStreamOutputAdapter")}catch(f){}function y(f,c){return new d.Promise(function(p,h){var m=[],S=f._internalType,k=f._outputType,E=f._mimeType;f.on("data",function(B,z){m.push(B),c&&c(z)}).on("error",function(B){m=[],h(B)}).on("end",function(){try{var B=function(z,$,T){switch(z){case"blob":return n.newBlob(n.transformTo("arraybuffer",$),T);case"base64":return s.encode($);default:return n.transformTo(z,$)}}(k,function(z,$){var T,M=0,H=null,_=0;for(T=0;T<$.length;T++)_+=$[T].length;switch(z){case"string":return $.join("");case"array":return Array.prototype.concat.apply([],$);case"uint8array":for(H=new Uint8Array(_),T=0;T<$.length;T++)H.set($[T],M),M+=$[T].length;return H;case"nodebuffer":return Buffer.concat($);default:throw new Error("concat : unsupported type '"+z+"'")}}(S,m),E);p(B)}catch(z){h(z)}m=[]}).resume()})}function l(f,c,p){var h=c;switch(c){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=c,this._mimeType=p,n.checkSupport(h),this._worker=f.pipe(new t(h)),f.lock()}catch(m){this._worker=new i("error"),this._worker.error(m)}}l.prototype={accumulate:function(f){return y(this,f)},on:function(f,c){var p=this;return f==="data"?this._worker.on(f,function(h){c.call(p,h.data,h.meta)}):this._worker.on(f,function(){n.delay(c,arguments,p)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},f)}},o.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(b,o,e){"use strict";if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",e.nodebuffer=typeof Buffer!="undefined",e.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")e.blob=!1;else{var n=new ArrayBuffer(0);try{e.blob=new Blob([n],{type:"application/zip"}).size===0}catch(i){try{var t=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);t.append(n),e.blob=t.getBlob("application/zip").size===0}catch(s){e.blob=!1}}}try{e.nodestream=!!b("readable-stream").Readable}catch(i){e.nodestream=!1}},{"readable-stream":16}],31:[function(b,o,e){"use strict";for(var n=b("./utils"),t=b("./support"),i=b("./nodejsUtils"),s=b("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function g(){s.call(this,"utf-8 decode"),this.leftOver=null}function y(){s.call(this,"utf-8 encode")}e.utf8encode=function(l){return t.nodebuffer?i.newBufferFrom(l,"utf-8"):function(f){var c,p,h,m,S,k=f.length,E=0;for(m=0;m<k;m++)(64512&(p=f.charCodeAt(m)))==55296&&m+1<k&&(64512&(h=f.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),m++),E+=p<128?1:p<2048?2:p<65536?3:4;for(c=t.uint8array?new Uint8Array(E):new Array(E),m=S=0;S<E;m++)(64512&(p=f.charCodeAt(m)))==55296&&m+1<k&&(64512&(h=f.charCodeAt(m+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),m++),p<128?c[S++]=p:(p<2048?c[S++]=192|p>>>6:(p<65536?c[S++]=224|p>>>12:(c[S++]=240|p>>>18,c[S++]=128|p>>>12&63),c[S++]=128|p>>>6&63),c[S++]=128|63&p);return c}(l)},e.utf8decode=function(l){return t.nodebuffer?n.transformTo("nodebuffer",l).toString("utf-8"):function(f){var c,p,h,m,S=f.length,k=new Array(2*S);for(c=p=0;c<S;)if((h=f[c++])<128)k[p++]=h;else if(4<(m=u[h]))k[p++]=65533,c+=m-1;else{for(h&=m===2?31:m===3?15:7;1<m&&c<S;)h=h<<6|63&f[c++],m--;1<m?k[p++]=65533:h<65536?k[p++]=h:(h-=65536,k[p++]=55296|h>>10&1023,k[p++]=56320|1023&h)}return k.length!==p&&(k.subarray?k=k.subarray(0,p):k.length=p),n.applyFromCharCode(k)}(l=n.transformTo(t.uint8array?"uint8array":"array",l))},n.inherits(g,s),g.prototype.processChunk=function(l){var f=n.transformTo(t.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(t.uint8array){var c=f;(f=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),f.set(c,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var p=function(m,S){var k;for((S=S||m.length)>m.length&&(S=m.length),k=S-1;0<=k&&(192&m[k])==128;)k--;return k<0||k===0?S:k+u[m[k]]>S?k:S}(f),h=f;p!==f.length&&(t.uint8array?(h=f.subarray(0,p),this.leftOver=f.subarray(p,f.length)):(h=f.slice(0,p),this.leftOver=f.slice(p,f.length))),this.push({data:e.utf8decode(h),meta:l.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=g,n.inherits(y,s),y.prototype.processChunk=function(l){this.push({data:e.utf8encode(l.data),meta:l.meta})},e.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(b,o,e){"use strict";var n=b("./support"),t=b("./base64"),i=b("./nodejsUtils"),s=b("./external");function u(c){return c}function d(c,p){for(var h=0;h<c.length;++h)p[h]=255&c.charCodeAt(h);return p}b("setimmediate"),e.newBlob=function(c,p){e.checkSupport("blob");try{return new Blob([c],{type:p})}catch(m){try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(c),h.getBlob(p)}catch(S){throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(c,p,h){var m=[],S=0,k=c.length;if(k<=h)return String.fromCharCode.apply(null,c);for(;S<k;)p==="array"||p==="nodebuffer"?m.push(String.fromCharCode.apply(null,c.slice(S,Math.min(S+h,k)))):m.push(String.fromCharCode.apply(null,c.subarray(S,Math.min(S+h,k)))),S+=h;return m.join("")},stringifyByChar:function(c){for(var p="",h=0;h<c.length;h++)p+=String.fromCharCode(c[h]);return p},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(c){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch(c){return!1}}()}};function y(c){var p=65536,h=e.getTypeOf(c),m=!0;if(h==="uint8array"?m=g.applyCanBeUsed.uint8array:h==="nodebuffer"&&(m=g.applyCanBeUsed.nodebuffer),m)for(;1<p;)try{return g.stringifyByChunk(c,h,p)}catch(S){p=Math.floor(p/2)}return g.stringifyByChar(c)}function l(c,p){for(var h=0;h<c.length;h++)p[h]=c[h];return p}e.applyFromCharCode=y;var f={};f.string={string:u,array:function(c){return d(c,new Array(c.length))},arraybuffer:function(c){return f.string.uint8array(c).buffer},uint8array:function(c){return d(c,new Uint8Array(c.length))},nodebuffer:function(c){return d(c,i.allocBuffer(c.length))}},f.array={string:y,array:u,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return i.newBufferFrom(c)}},f.arraybuffer={string:function(c){return y(new Uint8Array(c))},array:function(c){return l(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:u,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return i.newBufferFrom(new Uint8Array(c))}},f.uint8array={string:y,array:function(c){return l(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:u,nodebuffer:function(c){return i.newBufferFrom(c)}},f.nodebuffer={string:y,array:function(c){return l(c,new Array(c.length))},arraybuffer:function(c){return f.nodebuffer.uint8array(c).buffer},uint8array:function(c){return l(c,new Uint8Array(c.length))},nodebuffer:u},e.transformTo=function(c,p){if(p=p||"",!c)return p;e.checkSupport(c);var h=e.getTypeOf(p);return f[h][c](p)},e.resolve=function(c){for(var p=c.split("/"),h=[],m=0;m<p.length;m++){var S=p[m];S==="."||S===""&&m!==0&&m!==p.length-1||(S===".."?h.pop():h.push(S))}return h.join("/")},e.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":n.nodebuffer&&i.isBuffer(c)?"nodebuffer":n.uint8array&&c instanceof Uint8Array?"uint8array":n.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},e.checkSupport=function(c){if(!n[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(c){var p,h,m="";for(h=0;h<(c||"").length;h++)m+="\\x"+((p=c.charCodeAt(h))<16?"0":"")+p.toString(16).toUpperCase();return m},e.delay=function(c,p,h){setImmediate(function(){c.apply(h||null,p||[])})},e.inherits=function(c,p){function h(){}h.prototype=p.prototype,c.prototype=new h},e.extend=function(){var c,p,h={};for(c=0;c<arguments.length;c++)for(p in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],p)&&h[p]===void 0&&(h[p]=arguments[c][p]);return h},e.prepareContent=function(c,p,h,m,S){return s.Promise.resolve(p).then(function(k){return n.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader!="undefined"?new s.Promise(function(E,B){var z=new FileReader;z.onload=function($){E($.target.result)},z.onerror=function($){B($.target.error)},z.readAsArrayBuffer(k)}):k}).then(function(k){var E=e.getTypeOf(k);return E?(E==="arraybuffer"?k=e.transformTo("uint8array",k):E==="string"&&(S?k=t.decode(k):h&&m!==!0&&(k=function(B){return d(B,n.uint8array?new Uint8Array(B.length):new Array(B.length))}(k))),k):s.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(b,o,e){"use strict";var n=b("./reader/readerFor"),t=b("./utils"),i=b("./signature"),s=b("./zipEntry"),u=b("./support");function d(g){this.files=[],this.loadOptions=g}d.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+t.pretty(y)+", expected "+t.pretty(g)+")")}},isSignature:function(g,y){var l=this.reader.index;this.reader.setIndex(g);var f=this.reader.readString(4)===y;return this.reader.setIndex(l),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),y=u.uint8array?"uint8array":"array",l=t.transformTo(y,g);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,y,l,f=this.zip64EndOfCentralSize-44;0<f;)g=this.reader.readInt(2),y=this.reader.readInt(4),l=this.reader.readData(y),this.zip64ExtensibleData[g]={id:g,length:y,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,y;for(g=0;g<this.files.length;g++)y=this.files[g],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(g=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var y=g;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===t.MAX_VALUE_16BITS||this.diskWithCentralDirStart===t.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===t.MAX_VALUE_16BITS||this.centralDirRecords===t.MAX_VALUE_16BITS||this.centralDirSize===t.MAX_VALUE_32BITS||this.centralDirOffset===t.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var f=y-l;if(0<f)this.isSignature(y,i.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(g){this.reader=n(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},o.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(b,o,e){"use strict";var n=b("./reader/readerFor"),t=b("./utils"),i=b("./compressedObject"),s=b("./crc32"),u=b("./utf8"),d=b("./compressions"),g=b("./support");function y(l,f){this.options=l,this.loadOptions=f}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var f,c;if(l.skip(22),this.fileNameLength=l.readInt(2),c=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=function(p){for(var h in d)if(Object.prototype.hasOwnProperty.call(d,h)&&d[h].magic===p)return d[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+t.pretty(this.compressionMethod)+" unknown (inner file : "+t.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,f,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var f=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(f),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var l=n(this.extraFields[1].value);this.uncompressedSize===t.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===t.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===t.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===t.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(l){var f,c,p,h=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<h;)f=l.readInt(2),c=l.readInt(2),p=l.readData(c),this.extraFields[f]={id:f,length:c,value:p};l.setIndex(h)},handleUTF8:function(){var l=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var c=t.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var p=this.findExtraFieldUnicodeComment();if(p!==null)this.fileCommentStr=p;else{var h=t.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var f=n(l.value);return f.readInt(1)!==1||s(this.fileName)!==f.readInt(4)?null:u.utf8decode(f.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var f=n(l.value);return f.readInt(1)!==1||s(this.fileComment)!==f.readInt(4)?null:u.utf8decode(f.readData(l.length-5))}return null}},o.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(b,o,e){"use strict";function n(f,c,p){this.name=f,this.dir=p.dir,this.date=p.date,this.comment=p.comment,this.unixPermissions=p.unixPermissions,this.dosPermissions=p.dosPermissions,this._data=c,this._dataBinary=p.binary,this.options={compression:p.compression,compressionOptions:p.compressionOptions}}var t=b("./stream/StreamHelper"),i=b("./stream/DataWorker"),s=b("./utf8"),u=b("./compressedObject"),d=b("./stream/GenericWorker");n.prototype={internalStream:function(f){var c=null,p="string";try{if(!f)throw new Error("No output type specified.");var h=(p=f.toLowerCase())==="string"||p==="text";p!=="binarystring"&&p!=="text"||(p="string"),c=this._decompressWorker();var m=!this._dataBinary;m&&!h&&(c=c.pipe(new s.Utf8EncodeWorker)),!m&&h&&(c=c.pipe(new s.Utf8DecodeWorker))}catch(S){(c=new d("error")).error(S)}return new t(c,p,"")},async:function(f,c){return this.internalStream(f).accumulate(c)},nodeStream:function(f,c){return this.internalStream(f||"nodebuffer").toNodejsStream(c)},_compressWorker:function(f,c){if(this._data instanceof u&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var p=this._decompressWorker();return this._dataBinary||(p=p.pipe(new s.Utf8EncodeWorker)),u.createWorkerFrom(p,f,c)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new i(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<g.length;l++)n.prototype[g[l]]=y;o.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(b,o,e){(function(n){"use strict";var t,i,s=n.MutationObserver||n.WebKitMutationObserver;if(s){var u=0,d=new s(f),g=n.document.createTextNode("");d.observe(g,{characterData:!0}),t=function(){g.data=u=++u%2}}else if(n.setImmediate||n.MessageChannel===void 0)t="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var c=n.document.createElement("script");c.onreadystatechange=function(){f(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},n.document.documentElement.appendChild(c)}:function(){setTimeout(f,0)};else{var y=new n.MessageChannel;y.port1.onmessage=f,t=function(){y.port2.postMessage(0)}}var l=[];function f(){var c,p;i=!0;for(var h=l.length;h;){for(p=l,l=[],c=-1;++c<h;)p[c]();h=l.length}i=!1}o.exports=function(c){l.push(c)!==1||i||t()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(b,o,e){"use strict";var n=b("immediate");function t(){}var i={},s=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function g(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,h!==t&&c(this,h)}function y(h,m,S){this.promise=h,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}function l(h,m,S){n(function(){var k;try{k=m(S)}catch(E){return i.reject(h,E)}k===h?i.reject(h,new TypeError("Cannot resolve promise with itself")):i.resolve(h,k)})}function f(h){var m=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof m=="function")return function(){m.apply(h,arguments)}}function c(h,m){var S=!1;function k(z){S||(S=!0,i.reject(h,z))}function E(z){S||(S=!0,i.resolve(h,z))}var B=p(function(){m(E,k)});B.status==="error"&&k(B.value)}function p(h,m){var S={};try{S.value=h(m),S.status="success"}catch(k){S.status="error",S.value=k}return S}(o.exports=g).prototype.finally=function(h){if(typeof h!="function")return this;var m=this.constructor;return this.then(function(S){return m.resolve(h()).then(function(){return S})},function(S){return m.resolve(h()).then(function(){throw S})})},g.prototype.catch=function(h){return this.then(null,h)},g.prototype.then=function(h,m){if(typeof h!="function"&&this.state===u||typeof m!="function"&&this.state===s)return this;var S=new this.constructor(t);return this.state!==d?l(S,this.state===u?h:m,this.outcome):this.queue.push(new y(S,h,m)),S},y.prototype.callFulfilled=function(h){i.resolve(this.promise,h)},y.prototype.otherCallFulfilled=function(h){l(this.promise,this.onFulfilled,h)},y.prototype.callRejected=function(h){i.reject(this.promise,h)},y.prototype.otherCallRejected=function(h){l(this.promise,this.onRejected,h)},i.resolve=function(h,m){var S=p(f,m);if(S.status==="error")return i.reject(h,S.value);var k=S.value;if(k)c(h,k);else{h.state=u,h.outcome=m;for(var E=-1,B=h.queue.length;++E<B;)h.queue[E].callFulfilled(m)}return h},i.reject=function(h,m){h.state=s,h.outcome=m;for(var S=-1,k=h.queue.length;++S<k;)h.queue[S].callRejected(m);return h},g.resolve=function(h){return h instanceof this?h:i.resolve(new this(t),h)},g.reject=function(h){var m=new this(t);return i.reject(m,h)},g.all=function(h){var m=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,k=!1;if(!S)return this.resolve([]);for(var E=new Array(S),B=0,z=-1,$=new this(t);++z<S;)T(h[z],z);return $;function T(M,H){m.resolve(M).then(function(_){E[H]=_,++B!==S||k||(k=!0,i.resolve($,E))},function(_){k||(k=!0,i.reject($,_))})}},g.race=function(h){var m=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=h.length,k=!1;if(!S)return this.resolve([]);for(var E=-1,B=new this(t);++E<S;)z=h[E],m.resolve(z).then(function($){k||(k=!0,i.resolve(B,$))},function($){k||(k=!0,i.reject(B,$))});var z;return B}},{immediate:36}],38:[function(b,o,e){"use strict";var n={};(0,b("./lib/utils/common").assign)(n,b("./lib/deflate"),b("./lib/inflate"),b("./lib/zlib/constants")),o.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(b,o,e){"use strict";var n=b("./zlib/deflate"),t=b("./utils/common"),i=b("./utils/strings"),s=b("./zlib/messages"),u=b("./zlib/zstream"),d=Object.prototype.toString,g=0,y=-1,l=0,f=8;function c(h){if(!(this instanceof c))return new c(h);this.options=t.assign({level:y,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},h||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var S=n.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(S!==g)throw new Error(s[S]);if(m.header&&n.deflateSetHeader(this.strm,m.header),m.dictionary){var k;if(k=typeof m.dictionary=="string"?i.string2buf(m.dictionary):d.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(S=n.deflateSetDictionary(this.strm,k))!==g)throw new Error(s[S]);this._dict_set=!0}}function p(h,m){var S=new c(m);if(S.push(h,!0),S.err)throw S.msg||s[S.err];return S.result}c.prototype.push=function(h,m){var S,k,E=this.strm,B=this.options.chunkSize;if(this.ended)return!1;k=m===~~m?m:m===!0?4:0,typeof h=="string"?E.input=i.string2buf(h):d.call(h)==="[object ArrayBuffer]"?E.input=new Uint8Array(h):E.input=h,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new t.Buf8(B),E.next_out=0,E.avail_out=B),(S=n.deflate(E,k))!==1&&S!==g)return this.onEnd(S),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(t.shrinkBuf(E.output,E.next_out))):this.onData(t.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&S!==1);return k===4?(S=n.deflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===g):k!==2||(this.onEnd(g),!(E.avail_out=0))},c.prototype.onData=function(h){this.chunks.push(h)},c.prototype.onEnd=function(h){h===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},e.Deflate=c,e.deflate=p,e.deflateRaw=function(h,m){return(m=m||{}).raw=!0,p(h,m)},e.gzip=function(h,m){return(m=m||{}).gzip=!0,p(h,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(b,o,e){"use strict";var n=b("./zlib/inflate"),t=b("./utils/common"),i=b("./utils/strings"),s=b("./zlib/constants"),u=b("./zlib/messages"),d=b("./zlib/zstream"),g=b("./zlib/gzheader"),y=Object.prototype.toString;function l(c){if(!(this instanceof l))return new l(c);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},c||{});var p=this.options;p.raw&&0<=p.windowBits&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),!(0<=p.windowBits&&p.windowBits<16)||c&&c.windowBits||(p.windowBits+=32),15<p.windowBits&&p.windowBits<48&&!(15&p.windowBits)&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var h=n.inflateInit2(this.strm,p.windowBits);if(h!==s.Z_OK)throw new Error(u[h]);this.header=new g,n.inflateGetHeader(this.strm,this.header)}function f(c,p){var h=new l(p);if(h.push(c,!0),h.err)throw h.msg||u[h.err];return h.result}l.prototype.push=function(c,p){var h,m,S,k,E,B,z=this.strm,$=this.options.chunkSize,T=this.options.dictionary,M=!1;if(this.ended)return!1;m=p===~~p?p:p===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof c=="string"?z.input=i.binstring2buf(c):y.call(c)==="[object ArrayBuffer]"?z.input=new Uint8Array(c):z.input=c,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new t.Buf8($),z.next_out=0,z.avail_out=$),(h=n.inflate(z,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&T&&(B=typeof T=="string"?i.string2buf(T):y.call(T)==="[object ArrayBuffer]"?new Uint8Array(T):T,h=n.inflateSetDictionary(this.strm,B)),h===s.Z_BUF_ERROR&&M===!0&&(h=s.Z_OK,M=!1),h!==s.Z_STREAM_END&&h!==s.Z_OK)return this.onEnd(h),!(this.ended=!0);z.next_out&&(z.avail_out!==0&&h!==s.Z_STREAM_END&&(z.avail_in!==0||m!==s.Z_FINISH&&m!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(S=i.utf8border(z.output,z.next_out),k=z.next_out-S,E=i.buf2string(z.output,S),z.next_out=k,z.avail_out=$-k,k&&t.arraySet(z.output,z.output,S,k,0),this.onData(E)):this.onData(t.shrinkBuf(z.output,z.next_out)))),z.avail_in===0&&z.avail_out===0&&(M=!0)}while((0<z.avail_in||z.avail_out===0)&&h!==s.Z_STREAM_END);return h===s.Z_STREAM_END&&(m=s.Z_FINISH),m===s.Z_FINISH?(h=n.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===s.Z_OK):m!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(z.avail_out=0))},l.prototype.onData=function(c){this.chunks.push(c)},l.prototype.onEnd=function(c){c===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},e.Inflate=l,e.inflate=f,e.inflateRaw=function(c,p){return(p=p||{}).raw=!0,f(c,p)},e.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(b,o,e){"use strict";var n=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";e.assign=function(s){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var g in d)d.hasOwnProperty(g)&&(s[g]=d[g])}}return s},e.shrinkBuf=function(s,u){return s.length===u?s:s.subarray?s.subarray(0,u):(s.length=u,s)};var t={arraySet:function(s,u,d,g,y){if(u.subarray&&s.subarray)s.set(u.subarray(d,d+g),y);else for(var l=0;l<g;l++)s[y+l]=u[d+l]},flattenChunks:function(s){var u,d,g,y,l,f;for(u=g=0,d=s.length;u<d;u++)g+=s[u].length;for(f=new Uint8Array(g),u=y=0,d=s.length;u<d;u++)l=s[u],f.set(l,y),y+=l.length;return f}},i={arraySet:function(s,u,d,g,y){for(var l=0;l<g;l++)s[y+l]=u[d+l]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,t)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(n)},{}],42:[function(b,o,e){"use strict";var n=b("./common"),t=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(g){t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(g){i=!1}for(var s=new n.Buf8(256),u=0;u<256;u++)s[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(g,y){if(y<65537&&(g.subarray&&i||!g.subarray&&t))return String.fromCharCode.apply(null,n.shrinkBuf(g,y));for(var l="",f=0;f<y;f++)l+=String.fromCharCode(g[f]);return l}s[254]=s[254]=1,e.string2buf=function(g){var y,l,f,c,p,h=g.length,m=0;for(c=0;c<h;c++)(64512&(l=g.charCodeAt(c)))==55296&&c+1<h&&(64512&(f=g.charCodeAt(c+1)))==56320&&(l=65536+(l-55296<<10)+(f-56320),c++),m+=l<128?1:l<2048?2:l<65536?3:4;for(y=new n.Buf8(m),c=p=0;p<m;c++)(64512&(l=g.charCodeAt(c)))==55296&&c+1<h&&(64512&(f=g.charCodeAt(c+1)))==56320&&(l=65536+(l-55296<<10)+(f-56320),c++),l<128?y[p++]=l:(l<2048?y[p++]=192|l>>>6:(l<65536?y[p++]=224|l>>>12:(y[p++]=240|l>>>18,y[p++]=128|l>>>12&63),y[p++]=128|l>>>6&63),y[p++]=128|63&l);return y},e.buf2binstring=function(g){return d(g,g.length)},e.binstring2buf=function(g){for(var y=new n.Buf8(g.length),l=0,f=y.length;l<f;l++)y[l]=g.charCodeAt(l);return y},e.buf2string=function(g,y){var l,f,c,p,h=y||g.length,m=new Array(2*h);for(l=f=0;l<h;)if((c=g[l++])<128)m[f++]=c;else if(4<(p=s[c]))m[f++]=65533,l+=p-1;else{for(c&=p===2?31:p===3?15:7;1<p&&l<h;)c=c<<6|63&g[l++],p--;1<p?m[f++]=65533:c<65536?m[f++]=c:(c-=65536,m[f++]=55296|c>>10&1023,m[f++]=56320|1023&c)}return d(m,f)},e.utf8border=function(g,y){var l;for((y=y||g.length)>g.length&&(y=g.length),l=y-1;0<=l&&(192&g[l])==128;)l--;return l<0||l===0?y:l+s[g[l]]>y?l:y}},{"./common":41}],43:[function(b,o,e){"use strict";o.exports=function(n,t,i,s){for(var u=65535&n|0,d=n>>>16&65535|0,g=0;i!==0;){for(i-=g=2e3<i?2e3:i;d=d+(u=u+t[s++]|0)|0,--g;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(b,o,e){"use strict";o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(b,o,e){"use strict";var n=function(){for(var t,i=[],s=0;s<256;s++){t=s;for(var u=0;u<8;u++)t=1&t?3988292384^t>>>1:t>>>1;i[s]=t}return i}();o.exports=function(t,i,s,u){var d=n,g=u+s;t^=-1;for(var y=u;y<g;y++)t=t>>>8^d[255&(t^i[y])];return-1^t}},{}],46:[function(b,o,e){"use strict";var n,t=b("../utils/common"),i=b("./trees"),s=b("./adler32"),u=b("./crc32"),d=b("./messages"),g=0,y=4,l=0,f=-2,c=-1,p=4,h=2,m=8,S=9,k=286,E=30,B=19,z=2*k+1,$=15,T=3,M=258,H=M+T+1,_=42,F=113,a=1,N=2,G=3,O=4;function Q(r,L){return r.msg=d[L],L}function W(r){return(r<<1)-(4<r?9:0)}function J(r){for(var L=r.length;0<=--L;)r[L]=0}function A(r){var L=r.state,P=L.pending;P>r.avail_out&&(P=r.avail_out),P!==0&&(t.arraySet(r.output,L.pending_buf,L.pending_out,P,r.next_out),r.next_out+=P,L.pending_out+=P,r.total_out+=P,r.avail_out-=P,L.pending-=P,L.pending===0&&(L.pending_out=0))}function C(r,L){i._tr_flush_block(r,0<=r.block_start?r.block_start:-1,r.strstart-r.block_start,L),r.block_start=r.strstart,A(r.strm)}function q(r,L){r.pending_buf[r.pending++]=L}function K(r,L){r.pending_buf[r.pending++]=L>>>8&255,r.pending_buf[r.pending++]=255&L}function U(r,L){var P,w,v=r.max_chain_length,x=r.strstart,D=r.prev_length,R=r.nice_match,I=r.strstart>r.w_size-H?r.strstart-(r.w_size-H):0,Z=r.window,Y=r.w_mask,j=r.prev,V=r.strstart+M,rt=Z[x+D-1],et=Z[x+D];r.prev_length>=r.good_match&&(v>>=2),R>r.lookahead&&(R=r.lookahead);do if(Z[(P=L)+D]===et&&Z[P+D-1]===rt&&Z[P]===Z[x]&&Z[++P]===Z[x+1]){x+=2,P++;do;while(Z[++x]===Z[++P]&&Z[++x]===Z[++P]&&Z[++x]===Z[++P]&&Z[++x]===Z[++P]&&Z[++x]===Z[++P]&&Z[++x]===Z[++P]&&Z[++x]===Z[++P]&&Z[++x]===Z[++P]&&x<V);if(w=M-(V-x),x=V-M,D<w){if(r.match_start=L,R<=(D=w))break;rt=Z[x+D-1],et=Z[x+D]}}while((L=j[L&Y])>I&&--v!=0);return D<=r.lookahead?D:r.lookahead}function nt(r){var L,P,w,v,x,D,R,I,Z,Y,j=r.w_size;do{if(v=r.window_size-r.lookahead-r.strstart,r.strstart>=j+(j-H)){for(t.arraySet(r.window,r.window,j,j,0),r.match_start-=j,r.strstart-=j,r.block_start-=j,L=P=r.hash_size;w=r.head[--L],r.head[L]=j<=w?w-j:0,--P;);for(L=P=j;w=r.prev[--L],r.prev[L]=j<=w?w-j:0,--P;);v+=j}if(r.strm.avail_in===0)break;if(D=r.strm,R=r.window,I=r.strstart+r.lookahead,Z=v,Y=void 0,Y=D.avail_in,Z<Y&&(Y=Z),P=Y===0?0:(D.avail_in-=Y,t.arraySet(R,D.input,D.next_in,Y,I),D.state.wrap===1?D.adler=s(D.adler,R,Y,I):D.state.wrap===2&&(D.adler=u(D.adler,R,Y,I)),D.next_in+=Y,D.total_in+=Y,Y),r.lookahead+=P,r.lookahead+r.insert>=T)for(x=r.strstart-r.insert,r.ins_h=r.window[x],r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[x+T-1])&r.hash_mask,r.prev[x&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=x,x++,r.insert--,!(r.lookahead+r.insert<T)););}while(r.lookahead<H&&r.strm.avail_in!==0)}function lt(r,L){for(var P,w;;){if(r.lookahead<H){if(nt(r),r.lookahead<H&&L===g)return a;if(r.lookahead===0)break}if(P=0,r.lookahead>=T&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+T-1])&r.hash_mask,P=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),P!==0&&r.strstart-P<=r.w_size-H&&(r.match_length=U(r,P)),r.match_length>=T)if(w=i._tr_tally(r,r.strstart-r.match_start,r.match_length-T),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=T){for(r.match_length--;r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+T-1])&r.hash_mask,P=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart,--r.match_length!=0;);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else w=i._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(w&&(C(r,!1),r.strm.avail_out===0))return a}return r.insert=r.strstart<T-1?r.strstart:T-1,L===y?(C(r,!0),r.strm.avail_out===0?G:O):r.last_lit&&(C(r,!1),r.strm.avail_out===0)?a:N}function tt(r,L){for(var P,w,v;;){if(r.lookahead<H){if(nt(r),r.lookahead<H&&L===g)return a;if(r.lookahead===0)break}if(P=0,r.lookahead>=T&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+T-1])&r.hash_mask,P=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=T-1,P!==0&&r.prev_length<r.max_lazy_match&&r.strstart-P<=r.w_size-H&&(r.match_length=U(r,P),r.match_length<=5&&(r.strategy===1||r.match_length===T&&4096<r.strstart-r.match_start)&&(r.match_length=T-1)),r.prev_length>=T&&r.match_length<=r.prev_length){for(v=r.strstart+r.lookahead-T,w=i._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-T),r.lookahead-=r.prev_length-1,r.prev_length-=2;++r.strstart<=v&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+T-1])&r.hash_mask,P=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),--r.prev_length!=0;);if(r.match_available=0,r.match_length=T-1,r.strstart++,w&&(C(r,!1),r.strm.avail_out===0))return a}else if(r.match_available){if((w=i._tr_tally(r,0,r.window[r.strstart-1]))&&C(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return a}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(w=i._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<T-1?r.strstart:T-1,L===y?(C(r,!0),r.strm.avail_out===0?G:O):r.last_lit&&(C(r,!1),r.strm.avail_out===0)?a:N}function it(r,L,P,w,v){this.good_length=r,this.max_lazy=L,this.nice_length=P,this.max_chain=w,this.func=v}function ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(2*z),this.dyn_dtree=new t.Buf16(2*(2*E+1)),this.bl_tree=new t.Buf16(2*(2*B+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16($+1),this.heap=new t.Buf16(2*k+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*k+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function st(r){var L;return r&&r.state?(r.total_in=r.total_out=0,r.data_type=h,(L=r.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?_:F,r.adler=L.wrap===2?0:1,L.last_flush=g,i._tr_init(L),l):Q(r,f)}function mt(r){var L=st(r);return L===l&&function(P){P.window_size=2*P.w_size,J(P.head),P.max_lazy_match=n[P.level].max_lazy,P.good_match=n[P.level].good_length,P.nice_match=n[P.level].nice_length,P.max_chain_length=n[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=T-1,P.match_available=0,P.ins_h=0}(r.state),L}function ft(r,L,P,w,v,x){if(!r)return f;var D=1;if(L===c&&(L=6),w<0?(D=0,w=-w):15<w&&(D=2,w-=16),v<1||S<v||P!==m||w<8||15<w||L<0||9<L||x<0||p<x)return Q(r,f);w===8&&(w=9);var R=new ot;return(r.state=R).strm=r,R.wrap=D,R.gzhead=null,R.w_bits=w,R.w_size=1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=v+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+T-1)/T),R.window=new t.Buf8(2*R.w_size),R.head=new t.Buf16(R.hash_size),R.prev=new t.Buf16(R.w_size),R.lit_bufsize=1<<v+6,R.pending_buf_size=4*R.lit_bufsize,R.pending_buf=new t.Buf8(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=L,R.strategy=x,R.method=P,mt(r)}n=[new it(0,0,0,0,function(r,L){var P=65535;for(P>r.pending_buf_size-5&&(P=r.pending_buf_size-5);;){if(r.lookahead<=1){if(nt(r),r.lookahead===0&&L===g)return a;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var w=r.block_start+P;if((r.strstart===0||r.strstart>=w)&&(r.lookahead=r.strstart-w,r.strstart=w,C(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-H&&(C(r,!1),r.strm.avail_out===0))return a}return r.insert=0,L===y?(C(r,!0),r.strm.avail_out===0?G:O):(r.strstart>r.block_start&&(C(r,!1),r.strm.avail_out),a)}),new it(4,4,8,4,lt),new it(4,5,16,8,lt),new it(4,6,32,32,lt),new it(4,4,16,16,tt),new it(8,16,32,32,tt),new it(8,16,128,128,tt),new it(8,32,128,256,tt),new it(32,128,258,1024,tt),new it(32,258,258,4096,tt)],e.deflateInit=function(r,L){return ft(r,L,m,15,8,0)},e.deflateInit2=ft,e.deflateReset=mt,e.deflateResetKeep=st,e.deflateSetHeader=function(r,L){return r&&r.state?r.state.wrap!==2?f:(r.state.gzhead=L,l):f},e.deflate=function(r,L){var P,w,v,x;if(!r||!r.state||5<L||L<0)return r?Q(r,f):f;if(w=r.state,!r.output||!r.input&&r.avail_in!==0||w.status===666&&L!==y)return Q(r,r.avail_out===0?-5:f);if(w.strm=r,P=w.last_flush,w.last_flush=L,w.status===_)if(w.wrap===2)r.adler=0,q(w,31),q(w,139),q(w,8),w.gzhead?(q(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),q(w,255&w.gzhead.time),q(w,w.gzhead.time>>8&255),q(w,w.gzhead.time>>16&255),q(w,w.gzhead.time>>24&255),q(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),q(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(q(w,255&w.gzhead.extra.length),q(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(r.adler=u(r.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(q(w,0),q(w,0),q(w,0),q(w,0),q(w,0),q(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),q(w,3),w.status=F);else{var D=m+(w.w_bits-8<<4)<<8;D|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(D|=32),D+=31-D%31,w.status=F,K(w,D),w.strstart!==0&&(K(w,r.adler>>>16),K(w,65535&r.adler)),r.adler=1}if(w.status===69)if(w.gzhead.extra){for(v=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>v&&(r.adler=u(r.adler,w.pending_buf,w.pending-v,v)),A(r),v=w.pending,w.pending!==w.pending_buf_size));)q(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>v&&(r.adler=u(r.adler,w.pending_buf,w.pending-v,v)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){v=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>v&&(r.adler=u(r.adler,w.pending_buf,w.pending-v,v)),A(r),v=w.pending,w.pending===w.pending_buf_size)){x=1;break}x=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,q(w,x)}while(x!==0);w.gzhead.hcrc&&w.pending>v&&(r.adler=u(r.adler,w.pending_buf,w.pending-v,v)),x===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){v=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>v&&(r.adler=u(r.adler,w.pending_buf,w.pending-v,v)),A(r),v=w.pending,w.pending===w.pending_buf_size)){x=1;break}x=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,q(w,x)}while(x!==0);w.gzhead.hcrc&&w.pending>v&&(r.adler=u(r.adler,w.pending_buf,w.pending-v,v)),x===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&A(r),w.pending+2<=w.pending_buf_size&&(q(w,255&r.adler),q(w,r.adler>>8&255),r.adler=0,w.status=F)):w.status=F),w.pending!==0){if(A(r),r.avail_out===0)return w.last_flush=-1,l}else if(r.avail_in===0&&W(L)<=W(P)&&L!==y)return Q(r,-5);if(w.status===666&&r.avail_in!==0)return Q(r,-5);if(r.avail_in!==0||w.lookahead!==0||L!==g&&w.status!==666){var R=w.strategy===2?function(I,Z){for(var Y;;){if(I.lookahead===0&&(nt(I),I.lookahead===0)){if(Z===g)return a;break}if(I.match_length=0,Y=i._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,Y&&(C(I,!1),I.strm.avail_out===0))return a}return I.insert=0,Z===y?(C(I,!0),I.strm.avail_out===0?G:O):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?a:N}(w,L):w.strategy===3?function(I,Z){for(var Y,j,V,rt,et=I.window;;){if(I.lookahead<=M){if(nt(I),I.lookahead<=M&&Z===g)return a;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=T&&0<I.strstart&&(j=et[V=I.strstart-1])===et[++V]&&j===et[++V]&&j===et[++V]){rt=I.strstart+M;do;while(j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&j===et[++V]&&V<rt);I.match_length=M-(rt-V),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=T?(Y=i._tr_tally(I,1,I.match_length-T),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(Y=i._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),Y&&(C(I,!1),I.strm.avail_out===0))return a}return I.insert=0,Z===y?(C(I,!0),I.strm.avail_out===0?G:O):I.last_lit&&(C(I,!1),I.strm.avail_out===0)?a:N}(w,L):n[w.level].func(w,L);if(R!==G&&R!==O||(w.status=666),R===a||R===G)return r.avail_out===0&&(w.last_flush=-1),l;if(R===N&&(L===1?i._tr_align(w):L!==5&&(i._tr_stored_block(w,0,0,!1),L===3&&(J(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),A(r),r.avail_out===0))return w.last_flush=-1,l}return L!==y?l:w.wrap<=0?1:(w.wrap===2?(q(w,255&r.adler),q(w,r.adler>>8&255),q(w,r.adler>>16&255),q(w,r.adler>>24&255),q(w,255&r.total_in),q(w,r.total_in>>8&255),q(w,r.total_in>>16&255),q(w,r.total_in>>24&255)):(K(w,r.adler>>>16),K(w,65535&r.adler)),A(r),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?l:1)},e.deflateEnd=function(r){var L;return r&&r.state?(L=r.state.status)!==_&&L!==69&&L!==73&&L!==91&&L!==103&&L!==F&&L!==666?Q(r,f):(r.state=null,L===F?Q(r,-3):l):f},e.deflateSetDictionary=function(r,L){var P,w,v,x,D,R,I,Z,Y=L.length;if(!r||!r.state||(x=(P=r.state).wrap)===2||x===1&&P.status!==_||P.lookahead)return f;for(x===1&&(r.adler=s(r.adler,L,Y,0)),P.wrap=0,Y>=P.w_size&&(x===0&&(J(P.head),P.strstart=0,P.block_start=0,P.insert=0),Z=new t.Buf8(P.w_size),t.arraySet(Z,L,Y-P.w_size,P.w_size,0),L=Z,Y=P.w_size),D=r.avail_in,R=r.next_in,I=r.input,r.avail_in=Y,r.next_in=0,r.input=L,nt(P);P.lookahead>=T;){for(w=P.strstart,v=P.lookahead-(T-1);P.ins_h=(P.ins_h<<P.hash_shift^P.window[w+T-1])&P.hash_mask,P.prev[w&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=w,w++,--v;);P.strstart=w,P.lookahead=T-1,nt(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=T-1,P.match_available=0,r.next_in=R,r.input=I,r.avail_in=D,P.wrap=x,l},e.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(b,o,e){"use strict";o.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(b,o,e){"use strict";o.exports=function(n,t){var i,s,u,d,g,y,l,f,c,p,h,m,S,k,E,B,z,$,T,M,H,_,F,a,N;i=n.state,s=n.next_in,a=n.input,u=s+(n.avail_in-5),d=n.next_out,N=n.output,g=d-(t-n.avail_out),y=d+(n.avail_out-257),l=i.dmax,f=i.wsize,c=i.whave,p=i.wnext,h=i.window,m=i.hold,S=i.bits,k=i.lencode,E=i.distcode,B=(1<<i.lenbits)-1,z=(1<<i.distbits)-1;t:do{S<15&&(m+=a[s++]<<S,S+=8,m+=a[s++]<<S,S+=8),$=k[m&B];e:for(;;){if(m>>>=T=$>>>24,S-=T,(T=$>>>16&255)===0)N[d++]=65535&$;else{if(!(16&T)){if(!(64&T)){$=k[(65535&$)+(m&(1<<T)-1)];continue e}if(32&T){i.mode=12;break t}n.msg="invalid literal/length code",i.mode=30;break t}M=65535&$,(T&=15)&&(S<T&&(m+=a[s++]<<S,S+=8),M+=m&(1<<T)-1,m>>>=T,S-=T),S<15&&(m+=a[s++]<<S,S+=8,m+=a[s++]<<S,S+=8),$=E[m&z];i:for(;;){if(m>>>=T=$>>>24,S-=T,!(16&(T=$>>>16&255))){if(!(64&T)){$=E[(65535&$)+(m&(1<<T)-1)];continue i}n.msg="invalid distance code",i.mode=30;break t}if(H=65535&$,S<(T&=15)&&(m+=a[s++]<<S,(S+=8)<T&&(m+=a[s++]<<S,S+=8)),l<(H+=m&(1<<T)-1)){n.msg="invalid distance too far back",i.mode=30;break t}if(m>>>=T,S-=T,(T=d-g)<H){if(c<(T=H-T)&&i.sane){n.msg="invalid distance too far back",i.mode=30;break t}if(F=h,(_=0)===p){if(_+=f-T,T<M){for(M-=T;N[d++]=h[_++],--T;);_=d-H,F=N}}else if(p<T){if(_+=f+p-T,(T-=p)<M){for(M-=T;N[d++]=h[_++],--T;);if(_=0,p<M){for(M-=T=p;N[d++]=h[_++],--T;);_=d-H,F=N}}}else if(_+=p-T,T<M){for(M-=T;N[d++]=h[_++],--T;);_=d-H,F=N}for(;2<M;)N[d++]=F[_++],N[d++]=F[_++],N[d++]=F[_++],M-=3;M&&(N[d++]=F[_++],1<M&&(N[d++]=F[_++]))}else{for(_=d-H;N[d++]=N[_++],N[d++]=N[_++],N[d++]=N[_++],2<(M-=3););M&&(N[d++]=N[_++],1<M&&(N[d++]=N[_++]))}break}}break}}while(s<u&&d<y);s-=M=S>>3,m&=(1<<(S-=M<<3))-1,n.next_in=s,n.next_out=d,n.avail_in=s<u?u-s+5:5-(s-u),n.avail_out=d<y?y-d+257:257-(d-y),i.hold=m,i.bits=S}},{}],49:[function(b,o,e){"use strict";var n=b("../utils/common"),t=b("./adler32"),i=b("./crc32"),s=b("./inffast"),u=b("./inftrees"),d=1,g=2,y=0,l=-2,f=1,c=852,p=592;function h(_){return(_>>>24&255)+(_>>>8&65280)+((65280&_)<<8)+((255&_)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function S(_){var F;return _&&_.state?(F=_.state,_.total_in=_.total_out=F.total=0,_.msg="",F.wrap&&(_.adler=1&F.wrap),F.mode=f,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new n.Buf32(c),F.distcode=F.distdyn=new n.Buf32(p),F.sane=1,F.back=-1,y):l}function k(_){var F;return _&&_.state?((F=_.state).wsize=0,F.whave=0,F.wnext=0,S(_)):l}function E(_,F){var a,N;return _&&_.state?(N=_.state,F<0?(a=0,F=-F):(a=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?l:(N.window!==null&&N.wbits!==F&&(N.window=null),N.wrap=a,N.wbits=F,k(_))):l}function B(_,F){var a,N;return _?(N=new m,(_.state=N).window=null,(a=E(_,F))!==y&&(_.state=null),a):l}var z,$,T=!0;function M(_){if(T){var F;for(z=new n.Buf32(512),$=new n.Buf32(32),F=0;F<144;)_.lens[F++]=8;for(;F<256;)_.lens[F++]=9;for(;F<280;)_.lens[F++]=7;for(;F<288;)_.lens[F++]=8;for(u(d,_.lens,0,288,z,0,_.work,{bits:9}),F=0;F<32;)_.lens[F++]=5;u(g,_.lens,0,32,$,0,_.work,{bits:5}),T=!1}_.lencode=z,_.lenbits=9,_.distcode=$,_.distbits=5}function H(_,F,a,N){var G,O=_.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new n.Buf8(O.wsize)),N>=O.wsize?(n.arraySet(O.window,F,a-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(N<(G=O.wsize-O.wnext)&&(G=N),n.arraySet(O.window,F,a-N,G,O.wnext),(N-=G)?(n.arraySet(O.window,F,a-N,N,0),O.wnext=N,O.whave=O.wsize):(O.wnext+=G,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=G))),0}e.inflateReset=k,e.inflateReset2=E,e.inflateResetKeep=S,e.inflateInit=function(_){return B(_,15)},e.inflateInit2=B,e.inflate=function(_,F){var a,N,G,O,Q,W,J,A,C,q,K,U,nt,lt,tt,it,ot,st,mt,ft,r,L,P,w,v=0,x=new n.Buf8(4),D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_||!_.state||!_.output||!_.input&&_.avail_in!==0)return l;(a=_.state).mode===12&&(a.mode=13),Q=_.next_out,G=_.output,J=_.avail_out,O=_.next_in,N=_.input,W=_.avail_in,A=a.hold,C=a.bits,q=W,K=J,L=y;t:for(;;)switch(a.mode){case f:if(a.wrap===0){a.mode=13;break}for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(2&a.wrap&&A===35615){x[a.check=0]=255&A,x[1]=A>>>8&255,a.check=i(a.check,x,2,0),C=A=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&A)<<8)+(A>>8))%31){_.msg="incorrect header check",a.mode=30;break}if((15&A)!=8){_.msg="unknown compression method",a.mode=30;break}if(C-=4,r=8+(15&(A>>>=4)),a.wbits===0)a.wbits=r;else if(r>a.wbits){_.msg="invalid window size",a.mode=30;break}a.dmax=1<<r,_.adler=a.check=1,a.mode=512&A?10:12,C=A=0;break;case 2:for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(a.flags=A,(255&a.flags)!=8){_.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){_.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=A>>8&1),512&a.flags&&(x[0]=255&A,x[1]=A>>>8&255,a.check=i(a.check,x,2,0)),C=A=0,a.mode=3;case 3:for(;C<32;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.head&&(a.head.time=A),512&a.flags&&(x[0]=255&A,x[1]=A>>>8&255,x[2]=A>>>16&255,x[3]=A>>>24&255,a.check=i(a.check,x,4,0)),C=A=0,a.mode=4;case 4:for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.head&&(a.head.xflags=255&A,a.head.os=A>>8),512&a.flags&&(x[0]=255&A,x[1]=A>>>8&255,a.check=i(a.check,x,2,0)),C=A=0,a.mode=5;case 5:if(1024&a.flags){for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.length=A,a.head&&(a.head.extra_len=A),512&a.flags&&(x[0]=255&A,x[1]=A>>>8&255,a.check=i(a.check,x,2,0)),C=A=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(W<(U=a.length)&&(U=W),U&&(a.head&&(r=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),n.arraySet(a.head.extra,N,O,U,r)),512&a.flags&&(a.check=i(a.check,N,U,O)),W-=U,O+=U,a.length-=U),a.length))break t;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(W===0)break t;for(U=0;r=N[O+U++],a.head&&r&&a.length<65536&&(a.head.name+=String.fromCharCode(r)),r&&U<W;);if(512&a.flags&&(a.check=i(a.check,N,U,O)),W-=U,O+=U,r)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(W===0)break t;for(U=0;r=N[O+U++],a.head&&r&&a.length<65536&&(a.head.comment+=String.fromCharCode(r)),r&&U<W;);if(512&a.flags&&(a.check=i(a.check,N,U,O)),W-=U,O+=U,r)break t}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;C<16;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(A!==(65535&a.check)){_.msg="header crc mismatch",a.mode=30;break}C=A=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),_.adler=a.check=0,a.mode=12;break;case 10:for(;C<32;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}_.adler=a.check=h(A),C=A=0,a.mode=11;case 11:if(a.havedict===0)return _.next_out=Q,_.avail_out=J,_.next_in=O,_.avail_in=W,a.hold=A,a.bits=C,2;_.adler=a.check=1,a.mode=12;case 12:if(F===5||F===6)break t;case 13:if(a.last){A>>>=7&C,C-=7&C,a.mode=27;break}for(;C<3;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}switch(a.last=1&A,C-=1,3&(A>>>=1)){case 0:a.mode=14;break;case 1:if(M(a),a.mode=20,F!==6)break;A>>>=2,C-=2;break t;case 2:a.mode=17;break;case 3:_.msg="invalid block type",a.mode=30}A>>>=2,C-=2;break;case 14:for(A>>>=7&C,C-=7&C;C<32;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if((65535&A)!=(A>>>16^65535)){_.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&A,C=A=0,a.mode=15,F===6)break t;case 15:a.mode=16;case 16:if(U=a.length){if(W<U&&(U=W),J<U&&(U=J),U===0)break t;n.arraySet(G,N,O,U,Q),W-=U,O+=U,J-=U,Q+=U,a.length-=U;break}a.mode=12;break;case 17:for(;C<14;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(a.nlen=257+(31&A),A>>>=5,C-=5,a.ndist=1+(31&A),A>>>=5,C-=5,a.ncode=4+(15&A),A>>>=4,C-=4,286<a.nlen||30<a.ndist){_.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;C<3;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.lens[D[a.have++]]=7&A,A>>>=3,C-=3}for(;a.have<19;)a.lens[D[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,P={bits:a.lenbits},L=u(0,a.lens,0,19,a.lencode,0,a.work,P),a.lenbits=P.bits,L){_.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;it=(v=a.lencode[A&(1<<a.lenbits)-1])>>>16&255,ot=65535&v,!((tt=v>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(ot<16)A>>>=tt,C-=tt,a.lens[a.have++]=ot;else{if(ot===16){for(w=tt+2;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(A>>>=tt,C-=tt,a.have===0){_.msg="invalid bit length repeat",a.mode=30;break}r=a.lens[a.have-1],U=3+(3&A),A>>>=2,C-=2}else if(ot===17){for(w=tt+3;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}C-=tt,r=0,U=3+(7&(A>>>=tt)),A>>>=3,C-=3}else{for(w=tt+7;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}C-=tt,r=0,U=11+(127&(A>>>=tt)),A>>>=7,C-=7}if(a.have+U>a.nlen+a.ndist){_.msg="invalid bit length repeat",a.mode=30;break}for(;U--;)a.lens[a.have++]=r}}if(a.mode===30)break;if(a.lens[256]===0){_.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,P={bits:a.lenbits},L=u(d,a.lens,0,a.nlen,a.lencode,0,a.work,P),a.lenbits=P.bits,L){_.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,P={bits:a.distbits},L=u(g,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,P),a.distbits=P.bits,L){_.msg="invalid distances set",a.mode=30;break}if(a.mode=20,F===6)break t;case 20:a.mode=21;case 21:if(6<=W&&258<=J){_.next_out=Q,_.avail_out=J,_.next_in=O,_.avail_in=W,a.hold=A,a.bits=C,s(_,K),Q=_.next_out,G=_.output,J=_.avail_out,O=_.next_in,N=_.input,W=_.avail_in,A=a.hold,C=a.bits,a.mode===12&&(a.back=-1);break}for(a.back=0;it=(v=a.lencode[A&(1<<a.lenbits)-1])>>>16&255,ot=65535&v,!((tt=v>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(it&&!(240&it)){for(st=tt,mt=it,ft=ot;it=(v=a.lencode[ft+((A&(1<<st+mt)-1)>>st)])>>>16&255,ot=65535&v,!(st+(tt=v>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}A>>>=st,C-=st,a.back+=st}if(A>>>=tt,C-=tt,a.back+=tt,a.length=ot,it===0){a.mode=26;break}if(32&it){a.back=-1,a.mode=12;break}if(64&it){_.msg="invalid literal/length code",a.mode=30;break}a.extra=15&it,a.mode=22;case 22:if(a.extra){for(w=a.extra;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.length+=A&(1<<a.extra)-1,A>>>=a.extra,C-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;it=(v=a.distcode[A&(1<<a.distbits)-1])>>>16&255,ot=65535&v,!((tt=v>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(!(240&it)){for(st=tt,mt=it,ft=ot;it=(v=a.distcode[ft+((A&(1<<st+mt)-1)>>st)])>>>16&255,ot=65535&v,!(st+(tt=v>>>24)<=C);){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}A>>>=st,C-=st,a.back+=st}if(A>>>=tt,C-=tt,a.back+=tt,64&it){_.msg="invalid distance code",a.mode=30;break}a.offset=ot,a.extra=15&it,a.mode=24;case 24:if(a.extra){for(w=a.extra;C<w;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}a.offset+=A&(1<<a.extra)-1,A>>>=a.extra,C-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){_.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(J===0)break t;if(U=K-J,a.offset>U){if((U=a.offset-U)>a.whave&&a.sane){_.msg="invalid distance too far back",a.mode=30;break}nt=U>a.wnext?(U-=a.wnext,a.wsize-U):a.wnext-U,U>a.length&&(U=a.length),lt=a.window}else lt=G,nt=Q-a.offset,U=a.length;for(J<U&&(U=J),J-=U,a.length-=U;G[Q++]=lt[nt++],--U;);a.length===0&&(a.mode=21);break;case 26:if(J===0)break t;G[Q++]=a.length,J--,a.mode=21;break;case 27:if(a.wrap){for(;C<32;){if(W===0)break t;W--,A|=N[O++]<<C,C+=8}if(K-=J,_.total_out+=K,a.total+=K,K&&(_.adler=a.check=a.flags?i(a.check,G,K,Q-K):t(a.check,G,K,Q-K)),K=J,(a.flags?A:h(A))!==a.check){_.msg="incorrect data check",a.mode=30;break}C=A=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;C<32;){if(W===0)break t;W--,A+=N[O++]<<C,C+=8}if(A!==(4294967295&a.total)){_.msg="incorrect length check",a.mode=30;break}C=A=0}a.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return l}return _.next_out=Q,_.avail_out=J,_.next_in=O,_.avail_in=W,a.hold=A,a.bits=C,(a.wsize||K!==_.avail_out&&a.mode<30&&(a.mode<27||F!==4))&&H(_,_.output,_.next_out,K-_.avail_out)?(a.mode=31,-4):(q-=_.avail_in,K-=_.avail_out,_.total_in+=q,_.total_out+=K,a.total+=K,a.wrap&&K&&(_.adler=a.check=a.flags?i(a.check,G,K,_.next_out-K):t(a.check,G,K,_.next_out-K)),_.data_type=a.bits+(a.last?64:0)+(a.mode===12?128:0)+(a.mode===20||a.mode===15?256:0),(q==0&&K===0||F===4)&&L===y&&(L=-5),L)},e.inflateEnd=function(_){if(!_||!_.state)return l;var F=_.state;return F.window&&(F.window=null),_.state=null,y},e.inflateGetHeader=function(_,F){var a;return _&&_.state&&2&(a=_.state).wrap?((a.head=F).done=!1,y):l},e.inflateSetDictionary=function(_,F){var a,N=F.length;return _&&_.state?(a=_.state).wrap!==0&&a.mode!==11?l:a.mode===11&&t(1,F,N,0)!==a.check?-3:H(_,F,N,N)?(a.mode=31,-4):(a.havedict=1,y):l},e.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(b,o,e){"use strict";var n=b("../utils/common"),t=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(d,g,y,l,f,c,p,h){var m,S,k,E,B,z,$,T,M,H=h.bits,_=0,F=0,a=0,N=0,G=0,O=0,Q=0,W=0,J=0,A=0,C=null,q=0,K=new n.Buf16(16),U=new n.Buf16(16),nt=null,lt=0;for(_=0;_<=15;_++)K[_]=0;for(F=0;F<l;F++)K[g[y+F]]++;for(G=H,N=15;1<=N&&K[N]===0;N--);if(N<G&&(G=N),N===0)return f[c++]=20971520,f[c++]=20971520,h.bits=1,0;for(a=1;a<N&&K[a]===0;a++);for(G<a&&(G=a),_=W=1;_<=15;_++)if(W<<=1,(W-=K[_])<0)return-1;if(0<W&&(d===0||N!==1))return-1;for(U[1]=0,_=1;_<15;_++)U[_+1]=U[_]+K[_];for(F=0;F<l;F++)g[y+F]!==0&&(p[U[g[y+F]]++]=F);if(z=d===0?(C=nt=p,19):d===1?(C=t,q-=257,nt=i,lt-=257,256):(C=s,nt=u,-1),_=a,B=c,Q=F=A=0,k=-1,E=(J=1<<(O=G))-1,d===1&&852<J||d===2&&592<J)return 1;for(;;){for($=_-Q,M=p[F]<z?(T=0,p[F]):p[F]>z?(T=nt[lt+p[F]],C[q+p[F]]):(T=96,0),m=1<<_-Q,a=S=1<<O;f[B+(A>>Q)+(S-=m)]=$<<24|T<<16|M|0,S!==0;);for(m=1<<_-1;A&m;)m>>=1;if(m!==0?(A&=m-1,A+=m):A=0,F++,--K[_]==0){if(_===N)break;_=g[y+p[F]]}if(G<_&&(A&E)!==k){for(Q===0&&(Q=G),B+=a,W=1<<(O=_-Q);O+Q<N&&!((W-=K[O+Q])<=0);)O++,W<<=1;if(J+=1<<O,d===1&&852<J||d===2&&592<J)return 1;f[k=A&E]=G<<24|O<<16|B-c|0}}return A!==0&&(f[B+A]=_-Q<<24|64<<16|0),h.bits=G,0}},{"../utils/common":41}],51:[function(b,o,e){"use strict";o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(b,o,e){"use strict";var n=b("../utils/common"),t=0,i=1;function s(v){for(var x=v.length;0<=--x;)v[x]=0}var u=0,d=29,g=256,y=g+1+d,l=30,f=19,c=2*y+1,p=15,h=16,m=7,S=256,k=16,E=17,B=18,z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],$=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(y+2));s(H);var _=new Array(2*l);s(_);var F=new Array(512);s(F);var a=new Array(256);s(a);var N=new Array(d);s(N);var G,O,Q,W=new Array(l);function J(v,x,D,R,I){this.static_tree=v,this.extra_bits=x,this.extra_base=D,this.elems=R,this.max_length=I,this.has_stree=v&&v.length}function A(v,x){this.dyn_tree=v,this.max_code=0,this.stat_desc=x}function C(v){return v<256?F[v]:F[256+(v>>>7)]}function q(v,x){v.pending_buf[v.pending++]=255&x,v.pending_buf[v.pending++]=x>>>8&255}function K(v,x,D){v.bi_valid>h-D?(v.bi_buf|=x<<v.bi_valid&65535,q(v,v.bi_buf),v.bi_buf=x>>h-v.bi_valid,v.bi_valid+=D-h):(v.bi_buf|=x<<v.bi_valid&65535,v.bi_valid+=D)}function U(v,x,D){K(v,D[2*x],D[2*x+1])}function nt(v,x){for(var D=0;D|=1&v,v>>>=1,D<<=1,0<--x;);return D>>>1}function lt(v,x,D){var R,I,Z=new Array(p+1),Y=0;for(R=1;R<=p;R++)Z[R]=Y=Y+D[R-1]<<1;for(I=0;I<=x;I++){var j=v[2*I+1];j!==0&&(v[2*I]=nt(Z[j]++,j))}}function tt(v){var x;for(x=0;x<y;x++)v.dyn_ltree[2*x]=0;for(x=0;x<l;x++)v.dyn_dtree[2*x]=0;for(x=0;x<f;x++)v.bl_tree[2*x]=0;v.dyn_ltree[2*S]=1,v.opt_len=v.static_len=0,v.last_lit=v.matches=0}function it(v){8<v.bi_valid?q(v,v.bi_buf):0<v.bi_valid&&(v.pending_buf[v.pending++]=v.bi_buf),v.bi_buf=0,v.bi_valid=0}function ot(v,x,D,R){var I=2*x,Z=2*D;return v[I]<v[Z]||v[I]===v[Z]&&R[x]<=R[D]}function st(v,x,D){for(var R=v.heap[D],I=D<<1;I<=v.heap_len&&(I<v.heap_len&&ot(x,v.heap[I+1],v.heap[I],v.depth)&&I++,!ot(x,R,v.heap[I],v.depth));)v.heap[D]=v.heap[I],D=I,I<<=1;v.heap[D]=R}function mt(v,x,D){var R,I,Z,Y,j=0;if(v.last_lit!==0)for(;R=v.pending_buf[v.d_buf+2*j]<<8|v.pending_buf[v.d_buf+2*j+1],I=v.pending_buf[v.l_buf+j],j++,R===0?U(v,I,x):(U(v,(Z=a[I])+g+1,x),(Y=z[Z])!==0&&K(v,I-=N[Z],Y),U(v,Z=C(--R),D),(Y=$[Z])!==0&&K(v,R-=W[Z],Y)),j<v.last_lit;);U(v,S,x)}function ft(v,x){var D,R,I,Z=x.dyn_tree,Y=x.stat_desc.static_tree,j=x.stat_desc.has_stree,V=x.stat_desc.elems,rt=-1;for(v.heap_len=0,v.heap_max=c,D=0;D<V;D++)Z[2*D]!==0?(v.heap[++v.heap_len]=rt=D,v.depth[D]=0):Z[2*D+1]=0;for(;v.heap_len<2;)Z[2*(I=v.heap[++v.heap_len]=rt<2?++rt:0)]=1,v.depth[I]=0,v.opt_len--,j&&(v.static_len-=Y[2*I+1]);for(x.max_code=rt,D=v.heap_len>>1;1<=D;D--)st(v,Z,D);for(I=V;D=v.heap[1],v.heap[1]=v.heap[v.heap_len--],st(v,Z,1),R=v.heap[1],v.heap[--v.heap_max]=D,v.heap[--v.heap_max]=R,Z[2*I]=Z[2*D]+Z[2*R],v.depth[I]=(v.depth[D]>=v.depth[R]?v.depth[D]:v.depth[R])+1,Z[2*D+1]=Z[2*R+1]=I,v.heap[1]=I++,st(v,Z,1),2<=v.heap_len;);v.heap[--v.heap_max]=v.heap[1],function(et,dt){var At,vt,zt,at,Bt,Ht,wt=dt.dyn_tree,Xt=dt.max_code,ne=dt.stat_desc.static_tree,se=dt.stat_desc.has_stree,ae=dt.stat_desc.extra_bits,Jt=dt.stat_desc.extra_base,Pt=dt.stat_desc.max_length,Lt=0;for(at=0;at<=p;at++)et.bl_count[at]=0;for(wt[2*et.heap[et.heap_max]+1]=0,At=et.heap_max+1;At<c;At++)Pt<(at=wt[2*wt[2*(vt=et.heap[At])+1]+1]+1)&&(at=Pt,Lt++),wt[2*vt+1]=at,Xt<vt||(et.bl_count[at]++,Bt=0,Jt<=vt&&(Bt=ae[vt-Jt]),Ht=wt[2*vt],et.opt_len+=Ht*(at+Bt),se&&(et.static_len+=Ht*(ne[2*vt+1]+Bt)));if(Lt!==0){do{for(at=Pt-1;et.bl_count[at]===0;)at--;et.bl_count[at]--,et.bl_count[at+1]+=2,et.bl_count[Pt]--,Lt-=2}while(0<Lt);for(at=Pt;at!==0;at--)for(vt=et.bl_count[at];vt!==0;)Xt<(zt=et.heap[--At])||(wt[2*zt+1]!==at&&(et.opt_len+=(at-wt[2*zt+1])*wt[2*zt],wt[2*zt+1]=at),vt--)}}(v,x),lt(Z,rt,v.bl_count)}function r(v,x,D){var R,I,Z=-1,Y=x[1],j=0,V=7,rt=4;for(Y===0&&(V=138,rt=3),x[2*(D+1)+1]=65535,R=0;R<=D;R++)I=Y,Y=x[2*(R+1)+1],++j<V&&I===Y||(j<rt?v.bl_tree[2*I]+=j:I!==0?(I!==Z&&v.bl_tree[2*I]++,v.bl_tree[2*k]++):j<=10?v.bl_tree[2*E]++:v.bl_tree[2*B]++,Z=I,rt=(j=0)===Y?(V=138,3):I===Y?(V=6,3):(V=7,4))}function L(v,x,D){var R,I,Z=-1,Y=x[1],j=0,V=7,rt=4;for(Y===0&&(V=138,rt=3),R=0;R<=D;R++)if(I=Y,Y=x[2*(R+1)+1],!(++j<V&&I===Y)){if(j<rt)for(;U(v,I,v.bl_tree),--j!=0;);else I!==0?(I!==Z&&(U(v,I,v.bl_tree),j--),U(v,k,v.bl_tree),K(v,j-3,2)):j<=10?(U(v,E,v.bl_tree),K(v,j-3,3)):(U(v,B,v.bl_tree),K(v,j-11,7));Z=I,rt=(j=0)===Y?(V=138,3):I===Y?(V=6,3):(V=7,4)}}s(W);var P=!1;function w(v,x,D,R){K(v,(u<<1)+(R?1:0),3),function(I,Z,Y,j){it(I),j&&(q(I,Y),q(I,~Y)),n.arraySet(I.pending_buf,I.window,Z,Y,I.pending),I.pending+=Y}(v,x,D,!0)}e._tr_init=function(v){P||(function(){var x,D,R,I,Z,Y=new Array(p+1);for(I=R=0;I<d-1;I++)for(N[I]=R,x=0;x<1<<z[I];x++)a[R++]=I;for(a[R-1]=I,I=Z=0;I<16;I++)for(W[I]=Z,x=0;x<1<<$[I];x++)F[Z++]=I;for(Z>>=7;I<l;I++)for(W[I]=Z<<7,x=0;x<1<<$[I]-7;x++)F[256+Z++]=I;for(D=0;D<=p;D++)Y[D]=0;for(x=0;x<=143;)H[2*x+1]=8,x++,Y[8]++;for(;x<=255;)H[2*x+1]=9,x++,Y[9]++;for(;x<=279;)H[2*x+1]=7,x++,Y[7]++;for(;x<=287;)H[2*x+1]=8,x++,Y[8]++;for(lt(H,y+1,Y),x=0;x<l;x++)_[2*x+1]=5,_[2*x]=nt(x,5);G=new J(H,z,g+1,y,p),O=new J(_,$,0,l,p),Q=new J(new Array(0),T,0,f,m)}(),P=!0),v.l_desc=new A(v.dyn_ltree,G),v.d_desc=new A(v.dyn_dtree,O),v.bl_desc=new A(v.bl_tree,Q),v.bi_buf=0,v.bi_valid=0,tt(v)},e._tr_stored_block=w,e._tr_flush_block=function(v,x,D,R){var I,Z,Y=0;0<v.level?(v.strm.data_type===2&&(v.strm.data_type=function(j){var V,rt=4093624447;for(V=0;V<=31;V++,rt>>>=1)if(1&rt&&j.dyn_ltree[2*V]!==0)return t;if(j.dyn_ltree[18]!==0||j.dyn_ltree[20]!==0||j.dyn_ltree[26]!==0)return i;for(V=32;V<g;V++)if(j.dyn_ltree[2*V]!==0)return i;return t}(v)),ft(v,v.l_desc),ft(v,v.d_desc),Y=function(j){var V;for(r(j,j.dyn_ltree,j.l_desc.max_code),r(j,j.dyn_dtree,j.d_desc.max_code),ft(j,j.bl_desc),V=f-1;3<=V&&j.bl_tree[2*M[V]+1]===0;V--);return j.opt_len+=3*(V+1)+5+5+4,V}(v),I=v.opt_len+3+7>>>3,(Z=v.static_len+3+7>>>3)<=I&&(I=Z)):I=Z=D+5,D+4<=I&&x!==-1?w(v,x,D,R):v.strategy===4||Z===I?(K(v,2+(R?1:0),3),mt(v,H,_)):(K(v,4+(R?1:0),3),function(j,V,rt,et){var dt;for(K(j,V-257,5),K(j,rt-1,5),K(j,et-4,4),dt=0;dt<et;dt++)K(j,j.bl_tree[2*M[dt]+1],3);L(j,j.dyn_ltree,V-1),L(j,j.dyn_dtree,rt-1)}(v,v.l_desc.max_code+1,v.d_desc.max_code+1,Y+1),mt(v,v.dyn_ltree,v.dyn_dtree)),tt(v),R&&it(v)},e._tr_tally=function(v,x,D){return v.pending_buf[v.d_buf+2*v.last_lit]=x>>>8&255,v.pending_buf[v.d_buf+2*v.last_lit+1]=255&x,v.pending_buf[v.l_buf+v.last_lit]=255&D,v.last_lit++,x===0?v.dyn_ltree[2*D]++:(v.matches++,x--,v.dyn_ltree[2*(a[D]+g+1)]++,v.dyn_dtree[2*C(x)]++),v.last_lit===v.lit_bufsize-1},e._tr_align=function(v){K(v,2,3),U(v,S,H),function(x){x.bi_valid===16?(q(x,x.bi_buf),x.bi_buf=0,x.bi_valid=0):8<=x.bi_valid&&(x.pending_buf[x.pending++]=255&x.bi_buf,x.bi_buf>>=8,x.bi_valid-=8)}(v)}},{"../utils/common":41}],53:[function(b,o,e){"use strict";o.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(b,o,e){(function(n){(function(t,i){"use strict";if(!t.setImmediate){var s,u,d,g,y=1,l={},f=!1,c=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,s={}.toString.call(t.process)==="[object process]"?function(k){process.nextTick(function(){m(k)})}:function(){if(t.postMessage&&!t.importScripts){var k=!0,E=t.onmessage;return t.onmessage=function(){k=!1},t.postMessage("","*"),t.onmessage=E,k}}()?(g="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",S,!1):t.attachEvent("onmessage",S),function(k){t.postMessage(g+k,"*")}):t.MessageChannel?((d=new MessageChannel).port1.onmessage=function(k){m(k.data)},function(k){d.port2.postMessage(k)}):c&&"onreadystatechange"in c.createElement("script")?(u=c.documentElement,function(k){var E=c.createElement("script");E.onreadystatechange=function(){m(k),E.onreadystatechange=null,u.removeChild(E),E=null},u.appendChild(E)}):function(k){setTimeout(m,0,k)},p.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var E=new Array(arguments.length-1),B=0;B<E.length;B++)E[B]=arguments[B+1];var z={callback:k,args:E};return l[y]=z,s(y),y++},p.clearImmediate=h}function h(k){delete l[k]}function m(k){if(f)setTimeout(m,0,k);else{var E=l[k];if(E){f=!0;try{(function(B){var z=B.callback,$=B.args;switch($.length){case 0:z();break;case 1:z($[0]);break;case 2:z($[0],$[1]);break;case 3:z($[0],$[1],$[2]);break;default:z.apply(i,$)}})(E)}finally{h(k),f=!1}}}}function S(k){k.source===t&&typeof k.data=="string"&&k.data.indexOf(g)===0&&m(+k.data.slice(g.length))}})(typeof self=="undefined"?n===void 0?this:n:self)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})});var ve={};pe(ve,{default:()=>Yt});module.exports=fe(ve);var ut=require("obsidian");var ct={watchedFolderPath:"",notesFolderPath:"KrispNotes/Notes",attachmentsFolderPath:"KrispNotes/Attachments",noteNameTemplate:"{{YYYY}}-{{MM}}-{{DD}}_{{HHMM}}_{{meetingTitle}}",attachmentNameTemplate:"{{YYYY}}-{{MM}}-{{DD}}_{{meetingTitle}}_audio",noteContentTemplate:`---
title: {{meetingTitle}}
date: {{date}}
time: {{time}}
type: meeting
source: krisp
tags:
{{yamlTags}}
  - meeting
  - krisp
audio: "{{audioPathForYaml}}"
participants: [{{participants}}]
duration: {{duration}}
meeting_stats:
  participants_count: {{participantsCount}}
  transcript_length: {{transcriptWords}}
  most_active_speaker: "{{mostActiveSpeaker}}"
---

# \u{1F399}\uFE0F {{meetingTitle}}

> [!info]+ \u{1F4CB} \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0432\u0441\u0442\u0440\u0435\u0447\u0435
>
> **\u{1F4C5} \u0414\u0430\u0442\u0430:** {{date}}
> **\u23F0 \u0412\u0440\u0435\u043C\u044F:** {{time}}
> **\u23F1\uFE0F \u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C:** {{duration}}
> **\u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438:** {{participantsCount}} \u0447\u0435\u043B\u043E\u0432\u0435\u043A
> **\u{1F4CA} \u0421\u043B\u043E\u0432 \u0432 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442\u0435:** {{transcriptWords}}
> **\u{1F5E3}\uFE0F \u0421\u0430\u043C\u044B\u0439 \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439:** {{mostActiveSpeaker}}

---

## \u{1F3A7} \u0410\u0443\u0434\u0438\u043E\u0437\u0430\u043F\u0438\u0441\u044C

![[{{audioPathForYaml}}]]

*\u0414\u043B\u044F \u0432\u043E\u0441\u043F\u0440\u043E\u0438\u0437\u0432\u0435\u0434\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u0441\u0442\u0440\u043E\u0435\u043D\u043D\u044B\u0439 \u043F\u043B\u0435\u0435\u0440 Obsidian \u0438\u043B\u0438 \u043E\u0442\u043A\u0440\u043E\u0439\u0442\u0435 \u0444\u0430\u0439\u043B: [[{{audioPathForYaml}}]]*

---

## \u{1F4DD} \u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435

> [!note]+ \u{1F4A1} \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B \u0432\u0441\u0442\u0440\u0435\u0447\u0438
>
> {{summary}}

---

## \u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438 \u0432\u0441\u0442\u0440\u0435\u0447\u0438

{{participantsList}}

### \u{1F4C8} \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438

{{participantsStats}}

---

## \u2705 \u0417\u0430\u0434\u0430\u0447\u0438 \u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F

> [!todo]+ \u{1F4CB} Action Items
>
> {{actionItemsList}}

---

## \u{1F511} \u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B

> [!important]+ \u2B50 Key Points
>
> {{keyPointsList}}

---

## \u{1F3F7}\uFE0F \u0418\u0437\u0432\u043B\u0435\u0447\u0435\u043D\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F

{{extractedEntities}}

---

## \u{1F4CB} \u041F\u043E\u043B\u043D\u0430\u044F \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0446\u0438\u044F

> [!quote]- \u{1F399}\uFE0F \u0422\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u0432\u0441\u0442\u0440\u0435\u0447\u0438 ({{transcriptWords}} \u0441\u043B\u043E\u0432)
>
> {{formattedTranscript}}

---

## \u{1F517} \u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u043C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B

- \u{1F4C4} **\u0417\u0430\u043C\u0435\u0442\u043A\u0430:** [[{{noteFileName}}]]
- \u{1F3B5} **\u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B:** [[{{audioPathForYaml}}]]

{{relatedLinks}}

---

## \u{1F4CA} \u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u0432\u0441\u0442\u0440\u0435\u0447\u0438

| \u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440 | \u0417\u043D\u0430\u0447\u0435\u043D\u0438\u0435 |
|----------|----------|
| \u{1F4C5} \u0414\u0430\u0442\u0430 | {{date}} |
| \u23F0 \u0412\u0440\u0435\u043C\u044F \u043D\u0430\u0447\u0430\u043B\u0430 | {{time}} |
| \u23F1\uFE0F \u0414\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C | {{duration}} |
| \u{1F465} \u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432 | {{participantsCount}} |
| \u{1F4DD} \u0421\u043B\u043E\u0432 \u0432 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442\u0435 | {{transcriptWords}} |
| \u{1F5E3}\uFE0F \u0421\u0430\u043C\u044B\u0439 \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439 | {{mostActiveSpeaker}} |

---

> [!tip]+ \u{1F916} \u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E\u0431 \u0438\u043C\u043F\u043E\u0440\u0442\u0435
>
> **\u0421\u043E\u0437\u0434\u0430\u043D\u043E:** Krisp Notes Importer
> **\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043E:** {{importDate}}
> **\u0418\u0441\u0442\u043E\u0447\u043D\u0438\u043A:** Krisp Meeting Archive
`,duplicateStrategy:"rename",deleteZipAfterImport:!1,openNoteAfterImport:!0,autoScanEnabled:!1,language:"en"};var Ot=class{constructor(o){this.plugin=o}async loadSettings(){this.settings=Object.assign({},ct,await this.plugin.loadData())}async saveSettings(){await this.plugin.saveData(this.settings)}getSetting(o){return this.settings?this.settings[o]:ct[o]}getAllSettings(){return this.settings||ct}async updateSetting(o,e){this.settings||await this.loadSettings(),this.settings[o]=e,await this.saveSettings()}validateSettings(){let o=[];return(!this.settings.watchedFolderPath||this.settings.watchedFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.notesFolderPath||this.settings.notesFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435 \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.attachmentsFolderPath||this.settings.attachmentsFolderPath.trim()==="")&&o.push("\u041F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435 \u0432\u043B\u043E\u0436\u0435\u043D\u0438\u0439 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.noteNameTemplate||this.settings.noteNameTemplate.trim()==="")&&o.push("\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),(!this.settings.attachmentNameTemplate||this.settings.attachmentNameTemplate.trim()==="")&&o.push("\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u0430 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043F\u0443\u0441\u0442\u044B\u043C"),["skip","overwrite","rename"].includes(this.settings.duplicateStrategy)||o.push(`\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u0430\u044F \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432: ${this.settings.duplicateStrategy}`),["en","ru"].includes(this.settings.language)||o.push(`\u041D\u0435\u0434\u043E\u043F\u0443\u0441\u0442\u0438\u043C\u044B\u0439 \u044F\u0437\u044B\u043A: ${this.settings.language}`),{isValid:o.length===0,errors:o}}getValidatedSettings(){let o=this.validateSettings();return o.isValid?this.settings:(console.warn("[Krisp Importer] \u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442 \u043E\u0448\u0438\u0431\u043A\u0438:",o.errors),this.getSettingsWithDefaults())}getSettingsWithDefaults(){var o,e,n,t,i;return{...ct,...this.settings,watchedFolderPath:((o=this.settings.watchedFolderPath)==null?void 0:o.trim())||ct.watchedFolderPath,notesFolderPath:((e=this.settings.notesFolderPath)==null?void 0:e.trim())||ct.notesFolderPath,attachmentsFolderPath:((n=this.settings.attachmentsFolderPath)==null?void 0:n.trim())||ct.attachmentsFolderPath,noteNameTemplate:((t=this.settings.noteNameTemplate)==null?void 0:t.trim())||ct.noteNameTemplate,attachmentNameTemplate:((i=this.settings.attachmentNameTemplate)==null?void 0:i.trim())||ct.attachmentNameTemplate,duplicateStrategy:["skip","overwrite","rename"].includes(this.settings.duplicateStrategy)?this.settings.duplicateStrategy:ct.duplicateStrategy,language:["en","ru"].includes(this.settings.language)?this.settings.language:ct.language}}};var X=require("obsidian");var ge={settings:{title:"Krisp Notes Importer Settings",sections:{basic:"\u{1F527} Basic Settings",storage:"\u{1F4BE} Obsidian Storage",templates:"\u{1F4DD} Templates & Naming",duplicates:"\u{1F504} Duplicate Handling",postImport:"\u26A1 Post-Import Actions",advanced:"\u{1F6E0}\uFE0F Advanced & Maintenance"},fields:{watchedFolder:{name:"Watched Folder Path",desc:"Full path to the folder where Krisp saves ZIP archives"},autoScan:{name:"Enable Auto-Watching",desc:"Automatically monitor the folder for new ZIP files"},notesFolder:{name:"Notes Folder",desc:"Folder in your Obsidian vault for saving meeting notes"},attachmentsFolder:{name:"Attachments Folder",desc:"Folder in your Obsidian vault for saving audio files"},noteNameTemplate:{name:"Note Name Template",desc:"Template for naming note files. Available variables: {{YYYY}}, {{MM}}, {{DD}}, {{HHMM}}, {{meetingTitle}}"},attachmentNameTemplate:{name:"Audio Name Template",desc:"Template for naming audio files. Same variables available"},noteContentTemplate:{name:"Note Content Template",desc:"Template for note content. Available variables: {{title}}, {{date}}, {{time}}, {{participants}}, {{summary}}, {{actionItems}}, {{keyPoints}}, {{transcript}}, {{audioLink}}"},duplicateStrategy:{name:"Duplicate Strategy",desc:"What to do when a meeting with the same name already exists",options:{skip:"Skip import",overwrite:"Overwrite existing",rename:"Create with suffix"}},deleteZipAfterImport:{name:"Delete ZIP after import",desc:"Automatically delete the ZIP file after successful import"},openNoteAfterImport:{name:"Open note after import",desc:"Automatically open the created note in Obsidian"},language:{name:"Interface Language",desc:"Choose the language for the plugin interface"}},buttons:{testImport:"Test Import",massImport:"Import All Files",resetSettings:"Reset Settings",showLogs:"Show Logs",restoreTemplate:"Restore Default Template"},info:{title:"Plugin Information",version:"Version",status:"Status",features:["\u2705 Manual ZIP import","\u2705 Automatic folder watching","\u2705 Beautiful note formatting with callouts","\u2705 Advanced participant analytics","\u2705 Complete UI settings","\u2705 Logging and diagnostic system","\u2705 Bilingual support (English/Russian)"],commands:["Import ZIP file manually","Start auto-watching folder","Stop auto-watching","Scan existing files","Check watching status","Debug current settings"]}},commands:{importZip:"Import ZIP file manually",startWatching:"Start auto-watching folder",stopWatching:"Stop auto-watching",scanExisting:"Scan existing files in folder",checkStatus:"Check watching status",debugSettings:"Debug current settings"},notifications:{success:{imported:"Meeting '{{title}}' imported successfully!",watchingStarted:"Auto-watching started for: {{path}}",watchingStopped:"Auto-watching stopped",settingsReset:"Settings reset to defaults"},error:{invalidZip:"Invalid ZIP file: {{file}}",missingFiles:"Required files not found in: {{file}}",createNote:"Failed to create note for: {{title}}",copyAudio:"Failed to copy audio file for: {{title}}",watchingFailed:"Failed to start watching: {{error}}"},warning:{duplicateSkipped:"Meeting '{{title}}' already exists - skipped",duplicateRenamed:"Meeting '{{title}}' already exists - created as '{{newTitle}}'",duplicateOverwritten:"Meeting '{{title}}' already exists - overwritten"},info:{processing:"Processing: {{file}}",scanningFolder:"Scanning folder for ZIP files..."}},statusBar:{idle:"Idle",watching:"Watching: {{path}}",processing:"Processing...",error:"Error: {{message}}"},modals:{testImport:{title:"Test Import ZIP File",placeholder:"Enter full path to ZIP file...",button:"Test Import"},confirmReset:{title:"Reset Settings",message:"Are you sure you want to reset all settings to defaults? This action cannot be undone.",confirm:"Reset",cancel:"Cancel"},logs:{title:"Plugin Logs",export:"Export",clear:"Clear",close:"Close"}}},me={settings:{title:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 Krisp Notes Importer",sections:{basic:"\u{1F527} \u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",storage:"\u{1F4BE} \u0425\u0440\u0430\u043D\u0435\u043D\u0438\u0435 \u0432 Obsidian",templates:"\u{1F4DD} \u0428\u0430\u0431\u043B\u043E\u043D\u044B \u0438 \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",duplicates:"\u{1F504} \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432",postImport:"\u26A1 \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",advanced:"\u{1F6E0}\uFE0F \u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0438 \u043E\u0431\u0441\u043B\u0443\u0436\u0438\u0432\u0430\u043D\u0438\u0435"},fields:{watchedFolder:{name:"\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u0430\u044F \u043F\u0430\u043F\u043A\u0430",desc:"\u041F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043A \u043F\u0430\u043F\u043A\u0435, \u0433\u0434\u0435 Krisp \u0441\u043E\u0445\u0440\u0430\u043D\u044F\u0435\u0442 ZIP-\u0430\u0440\u0445\u0438\u0432\u044B"},autoScan:{name:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0442\u044C \u043F\u0430\u043F\u043A\u0443 \u043D\u0430 \u043F\u0440\u0435\u0434\u043C\u0435\u0442 \u043D\u043E\u0432\u044B\u0445 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432"},notesFolder:{name:"\u041F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A",desc:"\u041F\u0430\u043F\u043A\u0430 \u0432 \u0432\u0430\u0448\u0435\u043C \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 Obsidian \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0437\u0430\u043C\u0435\u0442\u043E\u043A \u0432\u0441\u0442\u0440\u0435\u0447"},attachmentsFolder:{name:"\u041F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u0432\u043B\u043E\u0436\u0435\u043D\u0438\u0439",desc:"\u041F\u0430\u043F\u043A\u0430 \u0432 \u0432\u0430\u0448\u0435\u043C \u0445\u0440\u0430\u043D\u0438\u043B\u0438\u0449\u0435 Obsidian \u0434\u043B\u044F \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432"},noteNameTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0437\u0430\u043C\u0435\u0442\u043A\u0438",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u044F \u0444\u0430\u0439\u043B\u043E\u0432 \u0437\u0430\u043C\u0435\u0442\u043E\u043A. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{YYYY}}, {{MM}}, {{DD}}, {{HHMM}}, {{meetingTitle}}"},attachmentNameTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0438\u043C\u0435\u043D\u0438 \u0430\u0443\u0434\u0438\u043E",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u044F \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B\u043E\u0432. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0442\u0435 \u0436\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435"},noteContentTemplate:{name:"\u0428\u0430\u0431\u043B\u043E\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438",desc:"\u0428\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{title}}, {{date}}, {{time}}, {{participants}}, {{summary}}, {{actionItems}}, {{keyPoints}}, {{transcript}}, {{audioLink}}"},duplicateStrategy:{name:"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432",desc:"\u0427\u0442\u043E \u0434\u0435\u043B\u0430\u0442\u044C, \u043A\u043E\u0433\u0434\u0430 \u0432\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0442\u0430\u043A\u0438\u043C \u0436\u0435 \u0438\u043C\u0435\u043D\u0435\u043C \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442",options:{skip:"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0438\u043C\u043F\u043E\u0440\u0442",overwrite:"\u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0443\u044E",rename:"\u0421\u043E\u0437\u0434\u0430\u0442\u044C \u0441 \u0441\u0443\u0444\u0444\u0438\u043A\u0441\u043E\u043C"}},deleteZipAfterImport:{name:"\u0423\u0434\u0430\u043B\u044F\u0442\u044C ZIP \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u0443\u0434\u0430\u043B\u044F\u0442\u044C ZIP-\u0444\u0430\u0439\u043B \u043F\u043E\u0441\u043B\u0435 \u0443\u0441\u043F\u0435\u0448\u043D\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430"},openNoteAfterImport:{name:"\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u043F\u043E\u0441\u043B\u0435 \u0438\u043C\u043F\u043E\u0440\u0442\u0430",desc:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u0438 \u043E\u0442\u043A\u0440\u044B\u0432\u0430\u0442\u044C \u0441\u043E\u0437\u0434\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0432 Obsidian"},language:{name:"\u042F\u0437\u044B\u043A \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430",desc:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u044F\u0437\u044B\u043A \u0434\u043B\u044F \u0438\u043D\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043F\u043B\u0430\u0433\u0438\u043D\u0430"}},buttons:{testImport:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442",massImport:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435 \u0444\u0430\u0439\u043B\u044B",resetSettings:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438",showLogs:"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u043B\u043E\u0433\u0438",restoreTemplate:"\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D"},info:{title:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043F\u043B\u0430\u0433\u0438\u043D\u0430",version:"\u0412\u0435\u0440\u0441\u0438\u044F",status:"\u0422\u0435\u043A\u0443\u0449\u0438\u0439 \u0441\u0442\u0430\u0442\u0443\u0441",features:["\u2705 \u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP","\u2705 \u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438","\u2705 \u041A\u0440\u0430\u0441\u0438\u0432\u043E\u0435 \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u0435 \u0437\u0430\u043C\u0435\u0442\u043E\u043A","\u2705 \u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u0430\u044F \u0430\u043D\u0430\u043B\u0438\u0442\u0438\u043A\u0430","\u2705 \u041F\u043E\u043B\u043D\u044B\u0439 UI \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A","\u2705 \u0421\u0438\u0441\u0442\u0435\u043C\u0430 \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F"],commands:["\u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430","\u0417\u0430\u043F\u0443\u0441\u043A/\u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0430 \u0430\u0432\u0442\u043E\u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F","\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0445 \u0444\u0430\u0439\u043B\u043E\u0432","\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F","\u041E\u0442\u043B\u0430\u0434\u043A\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A"]}},commands:{importZip:"\u0420\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430",startWatching:"\u0417\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438",stopWatching:"\u041E\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435",scanExisting:"\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u0444\u0430\u0439\u043B\u044B \u0432 \u043F\u0430\u043F\u043A\u0435",checkStatus:"\u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u0441\u0442\u0430\u0442\u0443\u0441 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F",debugSettings:"\u041E\u0442\u043B\u0430\u0434\u043A\u0430 \u0442\u0435\u043A\u0443\u0449\u0438\u0445 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A"},notifications:{success:{imported:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0430!",watchingStarted:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D\u043E \u0434\u043B\u044F: {{path}}",watchingStopped:"\u0410\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0435 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E",settingsReset:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0431\u0440\u043E\u0448\u0435\u043D\u044B \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E"},error:{invalidZip:"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ZIP-\u0444\u0430\u0439\u043B: {{file}}",missingFiles:"\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u044B\u0435 \u0444\u0430\u0439\u043B\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B \u0432: {{file}}",createNote:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043E\u0437\u0434\u0430\u0442\u044C \u0437\u0430\u043C\u0435\u0442\u043A\u0443 \u0434\u043B\u044F: {{title}}",copyAudio:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u0434\u043B\u044F: {{title}}",watchingFailed:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435: {{error}}"},warning:{duplicateSkipped:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u043F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u0430",duplicateRenamed:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u0441\u043E\u0437\u0434\u0430\u043D\u0430 \u043A\u0430\u043A '{{newTitle}}'",duplicateOverwritten:"\u0412\u0441\u0442\u0440\u0435\u0447\u0430 '{{title}}' \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 - \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0441\u0430\u043D\u0430"},info:{processing:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430: {{file}}",scanningFolder:"\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043D\u0430 \u043F\u0440\u0435\u0434\u043C\u0435\u0442 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432..."}},statusBar:{idle:"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435",watching:"\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435: {{path}}",processing:"\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430...",error:"\u041E\u0448\u0438\u0431\u043A\u0430: {{message}}"},modals:{testImport:{title:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043A ZIP-\u0444\u0430\u0439\u043B\u0443...",button:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442"},confirmReset:{title:"\u0421\u0431\u0440\u043E\u0441 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",message:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B, \u0447\u0442\u043E \u0445\u043E\u0442\u0438\u0442\u0435 \u0441\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0432\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E? \u042D\u0442\u043E \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043D\u0435\u043B\u044C\u0437\u044F \u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C.",confirm:"\u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C",cancel:"\u041E\u0442\u043C\u0435\u043D\u0430"},logs:{title:"\u041B\u043E\u0433\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430",export:"\u042D\u043A\u0441\u043F\u043E\u0440\u0442",clear:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C",close:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"}}},Et=class{constructor(o){this.currentLanguage="en";this.strings={en:ge,ru:me};o&&(this.currentLanguage=o)}setLanguage(o){this.currentLanguage=o}getCurrentLanguage(){return this.currentLanguage}t(o,e){let n=o.split("."),t=this.strings[this.currentLanguage];for(let i of n)if(t&&typeof t=="object"&&i in t)t=t[i];else{t=this.strings.en;for(let s of n)if(t&&typeof t=="object"&&s in t)t=t[s];else return`[Missing: ${o}]`;break}if(typeof t!="string")return`[Invalid: ${o}]`;if(e)for(let[i,s]of Object.entries(e))t=t.replace(new RegExp(`{{${i}}}`,"g"),s);return t}getSettingsStrings(){return this.strings[this.currentLanguage].settings}getCommandStrings(){return this.strings[this.currentLanguage].commands}getNotificationStrings(){return this.strings[this.currentLanguage].notifications}getStatusBarStrings(){return this.strings[this.currentLanguage].statusBar}getModalStrings(){return this.strings[this.currentLanguage].modals}};var Rt=class extends X.PluginSettingTab{constructor(e,n){super(e,n);this.plugin=n;let t=this.plugin.settingsManager.getSetting("language")||"en";this.localization=n.localizationService||new Et(t)}updateLanguage(e){this.localization.setLanguage(e),this.display()}display(){let{containerEl:e}=this;e.empty(),e.createEl("h1",{text:this.localization.t("settings.title")}),e.createEl("p",{text:this.localization.t("settings.title")+" - "+this.localization.t("settings.sections.basic")}),new X.Setting(e).setName(this.localization.t("settings.fields.language.name")).setDesc(this.localization.t("settings.fields.language.desc")).addDropdown(u=>u.addOption("en","English").addOption("ru","\u0420\u0443\u0441\u0441\u043A\u0438\u0439").setValue(this.plugin.settingsManager.getSetting("language")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("language",d),this.updateLanguage(d)})),e.createEl("h2",{text:"\u{1F527} "+this.localization.t("settings.sections.basic")}),new X.Setting(e).setName(this.localization.t("settings.fields.watchedFolder.name")).setDesc(this.localization.t("settings.fields.watchedFolder.desc")).addText(u=>u.setPlaceholder("/Users/username/Downloads/Krisp").setValue(this.plugin.settingsManager.getSetting("watchedFolderPath")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("watchedFolderPath",d)})),new X.Setting(e).setName(this.localization.t("settings.fields.autoScan.name")).setDesc(this.localization.t("settings.fields.autoScan.desc")).addToggle(u=>u.setValue(this.plugin.settingsManager.getSetting("autoScanEnabled")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("autoScanEnabled",d)})),e.createEl("h2",{text:this.localization.t("settings.sections.storage")}),new X.Setting(e).setName(this.localization.t("settings.fields.notesFolder.name")).setDesc(this.localization.t("settings.fields.notesFolder.desc")).addText(u=>u.setPlaceholder("KrispNotes/Notes").setValue(this.plugin.settingsManager.getSetting("notesFolderPath")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("notesFolderPath",d)})),new X.Setting(e).setName(this.localization.t("settings.fields.attachmentsFolder.name")).setDesc(this.localization.t("settings.fields.attachmentsFolder.desc")).addText(u=>u.setPlaceholder("KrispNotes/Attachments").setValue(this.plugin.settingsManager.getSetting("attachmentsFolderPath")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("attachmentsFolderPath",d)})),e.createEl("h2",{text:this.localization.t("settings.sections.templates")}),new X.Setting(e).setName(this.localization.t("settings.fields.noteNameTemplate.name")).setDesc(this.localization.t("settings.fields.noteNameTemplate.desc")).addText(u=>u.setPlaceholder("{{YYYY}}-{{MM}}-{{DD}}_{{HHMM}}_{{meetingTitle}}").setValue(this.plugin.settingsManager.getSetting("noteNameTemplate")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("noteNameTemplate",d)})),new X.Setting(e).setName(this.localization.t("settings.fields.attachmentNameTemplate.name")).setDesc(this.localization.t("settings.fields.attachmentNameTemplate.desc")).addText(u=>u.setPlaceholder("{{YYYY}}-{{MM}}-{{DD}}_{{meetingTitle}}_audio").setValue(this.plugin.settingsManager.getSetting("attachmentNameTemplate")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("attachmentNameTemplate",d)})),e.createEl("h2",{text:this.localization.t("settings.sections.duplicates")}),new X.Setting(e).setName(this.localization.t("settings.fields.duplicateStrategy.name")).setDesc(this.localization.t("settings.fields.duplicateStrategy.desc")).addDropdown(u=>u.addOption("skip",this.localization.t("settings.fields.duplicateStrategy.options.skip")).addOption("overwrite",this.localization.t("settings.fields.duplicateStrategy.options.overwrite")).addOption("rename",this.localization.t("settings.fields.duplicateStrategy.options.rename")).setValue(this.plugin.settingsManager.getSetting("duplicateStrategy")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("duplicateStrategy",d)})),e.createEl("h2",{text:this.localization.t("settings.sections.postImport")}),new X.Setting(e).setName(this.localization.t("settings.fields.openNoteAfterImport.name")).setDesc(this.localization.t("settings.fields.openNoteAfterImport.desc")).addToggle(u=>u.setValue(this.plugin.settingsManager.getSetting("openNoteAfterImport")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("openNoteAfterImport",d)})),new X.Setting(e).setName(this.localization.t("settings.fields.deleteZipAfterImport.name")).setDesc(this.localization.t("settings.fields.deleteZipAfterImport.desc")).addToggle(u=>u.setValue(this.plugin.settingsManager.getSetting("deleteZipAfterImport")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("deleteZipAfterImport",d)})),e.createEl("h2",{text:this.localization.t("settings.sections.advanced")}),new X.Setting(e).setName(this.localization.t("settings.fields.noteContentTemplate.name")).setDesc(this.localization.t("settings.fields.noteContentTemplate.desc")).addTextArea(u=>(u.setValue(this.plugin.settingsManager.getSetting("noteContentTemplate")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",d)}),u.inputEl.rows=10,u.inputEl.cols=50,u)).addButton(u=>u.setButtonText(this.localization.t("settings.buttons.restoreTemplate")).onClick(async()=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",ct.noteContentTemplate),this.display(),new X.Notice(this.localization.t("notifications.success.settingsReset"),3e3)})),new X.Setting(e).setName(this.localization.t("settings.buttons.testImport")).setDesc("\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 ZIP-\u0444\u0430\u0439\u043B \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0441 \u0442\u0435\u043A\u0443\u0449\u0438\u043C\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u043C\u0438").addButton(u=>u.setButtonText(this.localization.t("settings.buttons.testImport")).setClass("mod-cta").onClick(async()=>{let d=this.localization,g=this.plugin;new class extends X.Modal{constructor(l){super(l)}onOpen(){let{contentEl:l}=this;l.createEl("h2",{text:d.t("modals.testImport.title")});let f=l.createEl("input",{type:"text",placeholder:d.t("modals.testImport.placeholder")});f.style.width="100%",f.style.marginBottom="10px";let c=l.createEl("button",{text:d.t("modals.testImport.button"),cls:"mod-cta"});c.onclick=async()=>{let p=f.value.trim();if(p){this.close();let h=g;if(h.processingService)try{await h.processingService.processZipFile(p)}catch(m){new X.Notice(`Error: ${m.message}`,5e3)}}}}onClose(){let{contentEl:l}=this;l.empty()}}(this.app).open()})),new X.Setting(e).setName(this.localization.t("settings.buttons.massImport")).setDesc("\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435 ZIP-\u0444\u0430\u0439\u043B\u044B \u0438\u0437 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0438").addButton(u=>u.setButtonText(this.localization.t("settings.buttons.massImport")).onClick(async()=>{let d=this.plugin;if(d.fileWatcherService&&d.fileWatcherService.scanExistingFiles)try{await d.fileWatcherService.scanExistingFiles(),new X.Notice(this.localization.t("notifications.info.scanningFolder"),3e3)}catch(g){new X.Notice(`Error: ${g.message}`,5e3)}else new X.Notice("FileWatcherService not available",3e3)})),new X.Setting(e).setName(this.localization.t("settings.buttons.showLogs")).setDesc("\u041F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0434\u0435\u0442\u0430\u043B\u044C\u043D\u044B\u0435 \u043B\u043E\u0433\u0438 \u0440\u0430\u0431\u043E\u0442\u044B \u043F\u043B\u0430\u0433\u0438\u043D\u0430 \u0434\u043B\u044F \u0434\u0438\u0430\u0433\u043D\u043E\u0441\u0442\u0438\u043A\u0438 \u043F\u0440\u043E\u0431\u043B\u0435\u043C").addButton(u=>u.setButtonText(this.localization.t("settings.buttons.showLogs")).onClick(async()=>{let d=this.plugin;d.loggingService?new class extends X.Modal{constructor(y){super(y)}onOpen(){let{contentEl:y}=this;y.createEl("h2",{text:"\u{1F4CB} \u041B\u043E\u0433\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430 Krisp Notes Importer"});let l=d.loggingService.getLogStats(),f=y.createEl("div");f.style.marginBottom="15px",f.style.padding="10px",f.style.backgroundColor="var(--background-secondary)",f.style.borderRadius="5px",f.createEl("p",{text:`\u{1F4CA} \u0412\u0441\u0435\u0433\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439: ${l.total}`});let c=Object.entries(l.byLevel).map(([B,z])=>`${B}: ${z}`).join(", ");f.createEl("p",{text:`\u{1F4C8} \u041F\u043E \u0443\u0440\u043E\u0432\u043D\u044F\u043C: ${c}`});let p=y.createEl("div");p.style.display="flex",p.style.gap="10px",p.style.marginBottom="15px";let h=p.createEl("button",{text:"\u{1F4CB} \u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u043B\u043E\u0433\u0438"});h.className="mod-cta",h.onclick=async()=>{await d.loggingService.copyLogsToClipboard()};let m=p.createEl("button",{text:"\u{1F5D1}\uFE0F \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043B\u043E\u0433\u0438"});m.className="mod-warning",m.onclick=()=>{d.loggingService.clearLogs(),this.close(),new X.Notice("\u{1F5D1}\uFE0F \u041B\u043E\u0433\u0438 \u043E\u0447\u0438\u0449\u0435\u043D\u044B",3e3)};let S=p.createEl("button",{text:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"});S.onclick=()=>this.close();let k=y.createEl("div");k.style.maxHeight="400px",k.style.overflow="auto",k.style.border="1px solid var(--background-modifier-border)",k.style.borderRadius="5px",k.style.padding="10px",k.style.backgroundColor="var(--background-primary-alt)",k.style.fontFamily="monospace",k.style.fontSize="0.8em",k.style.whiteSpace="pre-wrap";let E=d.loggingService.getRecentLogs(100);if(E.length===0)k.textContent="\u041B\u043E\u0433\u0438 \u043E\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044E\u0442";else{let B=E.map(z=>{let $=z.timestamp.toLocaleString(),T=z.level===0?"DEBUG":z.level===1?"INFO":z.level===2?"WARN":"ERROR";return`[${$}] [${T}] [${z.category}] ${z.message}`}).join(`
`);k.textContent=B}}onClose(){let{contentEl:y}=this;y.empty()}}(this.app).open():new X.Notice("\u274C LoggingService \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D",5e3)})),new X.Setting(e).setName("\u0418\u043C\u043F\u043E\u0440\u0442 \u0432\u0441\u0435\u0445 \u0444\u0430\u0439\u043B\u043E\u0432").setDesc("\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u0442\u044C \u0432\u0441\u0435 ZIP-\u0444\u0430\u0439\u043B\u044B \u0432 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043F\u0440\u044F\u043C\u043E \u0441\u0435\u0439\u0447\u0430\u0441").addButton(u=>u.setButtonText("\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0432\u0441\u0435").setClass("mod-warning").onClick(async()=>{let d=this.plugin;if(!d.settingsManager.getSetting("watchedFolderPath")){new X.Notice("\u274C \u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u0430\u044F \u043F\u0430\u043F\u043A\u0430",5e3);return}new X.Notice("\u{1F504} \u041D\u0430\u0447\u0438\u043D\u0430\u044E \u043C\u0430\u0441\u0441\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442...",3e3);try{d.fileWatcher&&d.fileWatcher.scanExistingFiles?(await d.fileWatcher.scanExistingFiles(),new X.Notice("\u2705 \u041C\u0430\u0441\u0441\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D!",5e3)):new X.Notice("\u274C FileWatcherService \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D",5e3)}catch(y){console.error("[Krisp Importer] \u041E\u0448\u0438\u0431\u043A\u0430 \u043C\u0430\u0441\u0441\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430:",y),new X.Notice(`\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u043C\u0430\u0441\u0441\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430: ${y.message}`,8e3)}})),new X.Setting(e).setName("\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442").setDesc("\u0412\u044B\u0431\u0440\u0430\u0442\u044C ZIP-\u0444\u0430\u0439\u043B \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0441 \u0442\u0435\u043A\u0443\u0449\u0438\u043C\u0438 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u043C\u0438").addButton(u=>u.setButtonText("\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442").onClick(async()=>{let d=this.plugin;new class extends X.Modal{constructor(l){super(l);this.result=""}onOpen(){let{contentEl:l}=this;l.createEl("h2",{text:"\u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 ZIP-\u0444\u0430\u0439\u043B\u0430"}),l.createEl("p",{text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u043E\u043B\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043A ZIP-\u0444\u0430\u0439\u043B\u0443 Krisp \u0434\u043B\u044F \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430:"});let f=l.createEl("input",{type:"text",placeholder:"/path/to/meeting.zip"});f.style.width="100%",f.style.marginBottom="10px";let c=l.createEl("div");c.style.display="flex",c.style.gap="10px",c.style.justifyContent="flex-end";let p=c.createEl("button",{text:"\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"});p.className="mod-cta",p.onclick=async()=>{let m=f.value.trim();if(m){this.result=m,this.close();let S=d;if(S&&S.processingService)try{new X.Notice("\u{1F9EA} \u0412\u044B\u043F\u043E\u043B\u043D\u044F\u044E \u0442\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442...",3e3),await S.processingService.processZipFile(m),new X.Notice("\u2705 \u0422\u0435\u0441\u0442\u043E\u0432\u044B\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E!",5e3)}catch(k){console.error("[Krisp Importer] \u041E\u0448\u0438\u0431\u043A\u0430 \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430:",k),new X.Notice(`\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0442\u0435\u0441\u0442\u043E\u0432\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430: ${k.message}`,8e3)}else new X.Notice("\u274C ProcessingService \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D",5e3)}};let h=c.createEl("button",{text:"\u041E\u0442\u043C\u0435\u043D\u0430"});h.onclick=()=>this.close(),f.focus(),f.addEventListener("keypress",m=>{m.key==="Enter"&&p.click()})}onClose(){let{contentEl:l}=this;l.empty()}}(this.app).open()})),e.createEl("h2",{text:"\u{1F4DD} \u0428\u0430\u0431\u043B\u043E\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0433\u043E \u0437\u0430\u043C\u0435\u0442\u043A\u0438"});let n=e.createEl("p",{text:"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D \u0434\u043B\u044F \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0435\u043C\u044B\u0445 \u0437\u0430\u043C\u0435\u0442\u043E\u043A. \u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043F\u0435\u0440\u0435\u043C\u0435\u043D\u043D\u044B\u0435: {{meetingTitle}}, {{date}}, {{time}}, {{participants}}, {{summary}}, {{actionItems}}, {{keyPoints}}, {{formattedTranscript}}, {{audioPathForYaml}} \u0438 \u0434\u0440\u0443\u0433\u0438\u0435."});n.style.fontSize="0.9em",n.style.color="var(--text-muted)",new X.Setting(e).setName("\u0428\u0430\u0431\u043B\u043E\u043D \u0437\u0430\u043C\u0435\u0442\u043A\u0438").setDesc("").addTextArea(u=>(u.inputEl.rows=10,u.inputEl.style.width="100%",u.inputEl.style.fontFamily="monospace",u.inputEl.style.fontSize="0.85em",u.setPlaceholder("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0448\u0430\u0431\u043B\u043E\u043D \u0437\u0430\u043C\u0435\u0442\u043A\u0438...").setValue(this.plugin.settingsManager.getSetting("noteContentTemplate")).onChange(async d=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",d)}))),new X.Setting(e).setName("\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E").setDesc("\u0412\u0435\u0440\u043D\u0443\u0442\u044C \u0441\u0442\u0430\u043D\u0434\u0430\u0440\u0442\u043D\u044B\u0439 \u0448\u0430\u0431\u043B\u043E\u043D \u0437\u0430\u043C\u0435\u0442\u043A\u0438").addButton(u=>u.setButtonText("\u0412\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C").setCta().onClick(async()=>{await this.plugin.settingsManager.updateSetting("noteContentTemplate",ct.noteContentTemplate),this.display()})),e.createEl("h2",{text:"\u{1F527} \u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u043C\u0438"}),new X.Setting(e).setName(this.localization.t("settings.buttons.resetSettings")).setDesc("\u0412\u0435\u0440\u043D\u0443\u0442\u044C \u0432\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u043F\u043B\u0430\u0433\u0438\u043D\u0430 \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E").addButton(u=>u.setButtonText(this.localization.t("settings.buttons.resetSettings")).setClass("mod-warning").onClick(async()=>{let d=this.plugin,g=this.localization;new class extends X.Modal{constructor(l){super(l)}onOpen(){let{contentEl:l}=this;l.createEl("h2",{text:g.t("modals.confirmReset.title")}),l.createEl("p",{text:g.t("modals.confirmReset.message")});let f=l.createEl("div");f.style.display="flex",f.style.gap="10px",f.style.justifyContent="flex-end",f.style.marginTop="20px";let c=f.createEl("button",{text:g.t("modals.confirmReset.confirm")});c.className="mod-warning",c.onclick=async()=>{this.close();let h=d;if(h&&h.settingsManager)try{for(let[S,k]of Object.entries(ct))await h.settingsManager.updateSetting(S,k);new X.Notice("\u2705 \u0412\u0441\u0435 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0431\u0440\u043E\u0448\u0435\u043D\u044B \u043A \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u044F\u043C \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",5e3);let m=h.settingsTab;m&&m.display&&m.display()}catch(m){console.error("[Krisp Importer] \u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0431\u0440\u043E\u0441\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A:",m),new X.Notice(`\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0431\u0440\u043E\u0441\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A: ${m.message}`,8e3)}else new X.Notice("\u274C \u041F\u043B\u0430\u0433\u0438\u043D \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D \u0434\u043B\u044F \u0441\u0431\u0440\u043E\u0441\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0435\u043A",5e3)};let p=f.createEl("button",{text:g.t("modals.confirmReset.cancel")});p.onclick=()=>this.close()}onClose(){let{contentEl:l}=this;l.empty()}}(this.app).open()})),e.createEl("h2",{text:this.localization.t("settings.info.title")});let t=e.createEl("div");t.createEl("p",{text:`${this.localization.t("settings.info.version")}: v3.3.0`}),t.createEl("p",{text:`${this.localization.t("settings.info.status")}: ${this.localization.t("settings.info.features.0")}`}),this.localization.getSettingsStrings().info.features.forEach(u=>{t.createEl("p",{text:u})});let i=e.createEl("div");i.style.padding="15px",i.style.backgroundColor="var(--background-secondary)",i.style.borderRadius="8px",i.style.marginTop="15px",i.style.border="1px solid var(--background-modifier-border)",i.createEl("h4",{text:"\u{1F680} "+(this.localization.getCurrentLanguage()==="ru"?"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B\u0435 \u043A\u043E\u043C\u0430\u043D\u0434\u044B:":"Available commands:")}),this.localization.getSettingsStrings().info.commands.forEach(u=>{i.createEl("p",{text:`\u2022 ${u}`})});let s=e.createEl("div");s.style.padding="10px",s.style.backgroundColor="var(--background-primary-alt)",s.style.borderRadius="5px",s.style.marginTop="10px",s.style.borderLeft="4px solid var(--interactive-accent)",s.createEl("p",{text:"\u{1F4A1} \u0421\u043E\u0432\u0435\u0442: \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043F\u0430\u043B\u0438\u0442\u0440\u0443 \u043A\u043E\u043C\u0430\u043D\u0434 (Ctrl/Cmd + P) \u0434\u043B\u044F \u0431\u044B\u0441\u0442\u0440\u043E\u0433\u043E \u0434\u043E\u0441\u0442\u0443\u043F\u0430 \u043A\u043E \u0432\u0441\u0435\u043C \u0444\u0443\u043D\u043A\u0446\u0438\u044F\u043C \u043F\u043B\u0430\u0433\u0438\u043D\u0430"})}};var yt=require("obsidian");var ie=xt(ee()),ht=require("fs"),Tt=require("obsidian"),It=xt(require("path")),$t=class{constructor(o){this.app=o}async extract(o,e){try{let n=await ht.promises.readFile(o),t=await ie.loadAsync(n),s=require("os").tmpdir(),u=It.join(s,"krisp-importer-temp",e+"_"+Date.now());if(!(0,ht.existsSync)(u)){let d=It.join(s,"krisp-importer-temp");(0,ht.existsSync)(d)||(0,ht.mkdirSync)(d,{recursive:!0}),(0,ht.mkdirSync)(u,{recursive:!0})}for(let d in t.files)if(!t.files[d].dir){let g=await t.files[d].async("nodebuffer"),y=(0,Tt.normalizePath)(It.join(u,d)),l=It.dirname(y);(0,ht.existsSync)(l)||(0,ht.mkdirSync)(l,{recursive:!0}),await ht.promises.writeFile(y,g)}return console.log(`Successfully extracted to ${u}`),u}catch(n){return new Tt.Notice("Error extracting ZIP file: "+n.message),console.error("Error extracting ZIP file:",n),null}}async cleanup(o){if(o)try{(0,ht.existsSync)(o)&&((0,ht.rmSync)(o,{recursive:!0,force:!0}),console.log(`Successfully cleaned up temp directory: ${o}`))}catch(e){new Tt.Notice("Error cleaning up temporary directory: "+e.message),console.error("Error cleaning up temporary directory:",e)}}};var Mt=class{constructor(){}parseMeetingNotes(o,e,n){var y;let t={},i=n;i=i.replace(/\s*\([0-9a-fA-F]{8}-(?:[0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}\)$/,""),i=i.replace(/-[0-9a-fA-F]{32}$/,""),i=i.replace(/\s*-\s*[A-Za-z]+(?:\s+|,\s*)[0-9]{1,2}(?:,\s*[0-9]{4})?(?:\s+[0-9]{1,2}[0-9]{2}(?:\s*(?:AM|PM))?)?$/,"").trim(),t.meetingTitle=i;let s=(y=o.split(`
`)[0])==null?void 0:y.trim(),u=null,d=null;if(s&&(u=this.extractDateFromString(s),d=this.extractTimeFromString(s)),u||(u=this.extractDateFromString(n)),!d&&(d=this.extractTimeFromString(n),d==="00:00"&&e)){let l=e.match(/(\d{2}:\d{2}(?::\d{2})?)/)}t.date=u||void 0,t.time=d||void 0,t.summary=this.extractSection(o,"Summary"),t.actionItems=this.extractSection(o,"Action Items",!0),t.keyPoints=this.extractSection(o,"Key Points",!0);let g=this.parseTranscript(e);return t.participants=g.participants,t.rawTranscript=e,t.formattedTranscript=g.formattedTranscript,t.duration=g.duration,t.participantsCount=g.participants.length,t.transcriptWords=this.countWords(e),t.mostActiveSpeaker=this.findMostActiveSpeaker(e),t.participantsStats=this.generateParticipantsStats(e,g.participants),t.extractedEntities=this.extractEntities(o,e),t.relatedLinks=this.generateRelatedLinks(o,i),t.importDate=new Date().toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),t.smartTags=this.generateSmartTags(o,e,i),t.tags=[...t.smartTags||[]],t}parseTranscript(o){let e=o.split(`
`),n=new Set,t=[],i="00:00:00",s=/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/;for(let d=0;d<e.length;d++){let y=e[d].trim();if(y==="")continue;let l=y.match(s);if(l){let f=l[1].trim(),c=l[2];f&&!f.toLowerCase().includes("transcription service")&&!f.toLowerCase().includes("meeting summary")&&n.add(f);let p=c.length===5?`${c}:00`:c;i=p;let h=[],m=d+1;for(;m<e.length;){let S=e[m].trim();if(S===""){m++;continue}if(s.test(S))break;S.toLowerCase()==="\u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u0435 \u0441\u043B\u0435\u0434\u0443\u0435\u0442..."?h.push(`_${S}_`):h.push(S),m++}if(h.length>0){let S=h.join(`
`);t.push(`[[${p}]] **${f}**: ${S}`)}else t.push(`[[${p}]] **${f}**:`);d=m-1}else y.toLowerCase()==="\u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u0435 \u0441\u043B\u0435\u0434\u0443\u0435\u0442..."?t.push(`_${y}_`):t.length>0?t[t.length-1]+=`
${y}`:t.push(y)}let u="N/A";return i!=="00:00:00"&&(u=i),{participants:Array.from(n),formattedTranscript:t.join(`

`),duration:u}}extractDateFromString(o){if(!o)return null;let e,n,t,i=o.match(/(\d{4})-(\d{2})-(\d{2})/);if(i&&(e=parseInt(i[1],10),n=parseInt(i[2],10),t=parseInt(i[3],10),n>=1&&n<=12&&t>=1&&t<=31))return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`;if(i=o.match(/([A-Za-z]+)\s+(\d{1,2}),\s+(\d{4})/),i){let s=i[1];if(t=parseInt(i[2],10),e=parseInt(i[3],10),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}if(i=o.match(/([A-Za-z]+),\s*(\d{1,2})(?!\s*,\s*\d{4})/),i){let s=i[1];if(t=parseInt(i[2],10),e=new Date().getFullYear(),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}if(i=o.match(/(\d{1,2})\s+([A-Za-z]+)\s+(\d{4})/),i){t=parseInt(i[1],10);let s=i[2];if(e=parseInt(i[3],10),n=this.monthNameToNumber(s),n&&t>=1&&t<=31)return`${String(e).padStart(4,"0")}-${String(n).padStart(2,"0")}-${String(t).padStart(2,"0")}`}return null}extractTimeFromString(o){if(!o)return null;let e=o.match(/(\d{2}):(\d{2})(?!\s*(?:AM|PM))/);if(e){let n=parseInt(e[1],10),t=parseInt(e[2],10);if(n>=0&&n<=23&&t>=0&&t<=59)return`${String(n).padStart(2,"0")}:${String(t).padStart(2,"0")}`}if(e=o.match(/(\d{1,2}):(\d{2})\s*(AM|PM)/i),e){let n=parseInt(e[1],10),t=parseInt(e[2],10),i=e[3].toUpperCase();if(n>=1&&n<=12&&t>=0&&t<=59)return i==="PM"&&n!==12?n+=12:i==="AM"&&n===12&&(n=0),`${String(n).padStart(2,"0")}:${String(t).padStart(2,"0")}`}return"00:00"}extractSection(o,e,n=!1){var y,l;let t=o.split(`
`),i=[],s=!1,u=new RegExp(`^${e}s*$`,"i"),d=["Summary","Action Items","Key Points","Transcript","Transcription"],g=new RegExp(`^(${d.filter(f=>f.toLowerCase()!==e.toLowerCase()).join("|")})s*$`,"i");for(let f=0;f<t.length;f++){let c=t[f];if(u.test(c)){s=!0;continue}if(s){if(g.test(c))break;let p=c.trim();if(p===""){if(n){let h=(y=t[f+1])==null?void 0:y.trim();if(!(h&&!h.match(/^(\s*[-*]|[0-9]+\.)/)&&!h.match(/^\s+/))){if(!h)break}}else if(((l=t[f+1])==null?void 0:l.trim())==="")break}if(p!==""||n&&i.length>0)if(n){let h=p;(h.startsWith("- ")||h.startsWith("* "))&&(h=h.substring(2).trim()),(e==="Action Items"&&h||h)&&i.push(h)}else i.push(p);else i.length>0}}return i}escapeRegExp(o){return o.replace(/[.*+?^${}()|[\\\]]/g,"\\$&")}isLikelyDateOrTime(o){if(!o)return!1;let e=/^(\d{4}-\d{2}-\d{2}|[A-Za-z]+\s+\d{1,2}(?:,\s*\d{4})?)$/i,n=/^(\d{1,2}:\d{2}(\s*[APap][Mm])?)$/;return e.test(o)||n.test(o)}isSectionHeader(o){if(!o)return!1;let e=o.toLowerCase();return e.startsWith("summary")||e.startsWith("action items")||e.startsWith("key points")||e.startsWith("transcript")}monthNameToNumber(o){if(!o)return null;let e=o.toLowerCase().substring(0,3);return{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,\u044F\u043D\u0432:1,\u0444\u0435\u0432:2,\u043C\u0430\u0440:3,\u0430\u043F\u0440:4,\u043C\u0430\u044F:5,\u0438\u044E\u043D:6,\u0438\u044E\u043B:7,\u0430\u0432\u0433:8,\u0441\u0435\u043D:9,\u043E\u043A\u0442:10,\u043D\u043E\u044F:11,\u0434\u0435\u043A:12}[e]||null}countWords(o){return o?o.trim().split(/\s+/).filter(e=>e.length>0).length:0}findMostActiveSpeaker(o){let e=o.split(`
`),n={},t="";for(let u of e){let d=u.trim();if(d==="")continue;let g=d.match(/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/);if(g)t=g[1].trim(),n[t]||(n[t]=0);else if(t){let y=this.countWords(d);n[t]+=y}}let i="",s=0;for(let[u,d]of Object.entries(n))d>s&&(s=d,i=u);return i||"N/A"}generateParticipantsStats(o,e){let n=o.split(`
`),t={},i={},s="";for(let g of e)t[g]=0,i[g]=0;for(let g of n){let y=g.trim();if(y==="")continue;let l=y.match(/^(.+?)\s*\|\s*(\d{2}:\d{2}(?::\d{2})?)$/);if(l)s=l[1].trim(),i[s]!==void 0&&i[s]++;else if(s&&t[s]!==void 0){let f=this.countWords(y);t[s]+=f}}let u=[],d=Object.values(t).reduce((g,y)=>g+y,0);for(let g of e){let y=t[g]||0,l=i[g]||0,f=d>0?(y/d*100).toFixed(1):"0";u.push(`- **${g}**: ${y} \u0441\u043B\u043E\u0432 (${f}%), ${l} \u0432\u044B\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0439`)}return u.length>0?["### \u{1F4CA} \u0410\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432","",...u]:[]}extractEntities(o,e){let n=[],i=`${o} ${e}`.substring(0,5e3),s={projects:/(?:проект|project|система|платформа|сервис|приложение|продукт)\s+([А-Яа-я\w\s]{3,30})/gi,companies:/(?:компания|компании|организация|корпорация|фирма|бизнес)\s+([А-Яа-я\w\s]{3,30})|([А-Яа-я][А-Яа-я\w]*(?:нефть|банк|групп|холдинг|корп))/gi,dates:/\d{1,2}[\.\-\/]\d{1,2}[\.\-\/]\d{2,4}|\d{4}[\.\-\/]\d{1,2}[\.\-\/]\d{1,2}/g},u=i.match(s.projects);u&&u.length>0&&(n.push("### \u{1F680} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u043F\u0440\u043E\u0435\u043A\u0442\u044B",""),[...new Set(u.slice(0,5))].forEach(l=>n.push(`- ${l.trim()}`)),n.push(""));let d=i.match(s.companies);d&&d.length>0&&(n.push("### \u{1F3E2} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0438",""),[...new Set(d.slice(0,5))].forEach(l=>n.push(`- ${l.trim()}`)),n.push(""));let g=i.match(s.dates);return g&&g.length>0&&(n.push("### \u{1F4C5} \u0423\u043F\u043E\u043C\u044F\u043D\u0443\u0442\u044B\u0435 \u0434\u0430\u0442\u044B",""),[...new Set(g.slice(0,5))].forEach(l=>n.push(`- ${l}`)),n.push("")),n}generateRelatedLinks(o,e){let n=[],t=o.match(/встреча|совещание|планерка|созвон/gi);t&&t.length>1&&n.push("- \u{1F4CB} **\u0421\u0432\u044F\u0437\u0430\u043D\u043D\u044B\u0435 \u0432\u0441\u0442\u0440\u0435\u0447\u0438:** [[\u041F\u043E\u0438\u0441\u043A \u0432\u0441\u0442\u0440\u0435\u0447]]");let i=o.match(/документ|файл|презентация|отчет|план/gi);return i&&i.length>0&&n.push("- \u{1F4C4} **\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B:** [[\u041F\u043E\u0438\u0441\u043A \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u043E\u0432]]"),e.toLowerCase().includes("\u043F\u0440\u043E\u0435\u043A\u0442")&&n.push("- \u{1F680} **\u041F\u0440\u043E\u0435\u043A\u0442:** [[\u041F\u0440\u043E\u0435\u043A\u0442\u044B]]"),n}generateSmartTags(o,e,n){let t=new Set,i=`${o} ${e} ${n}`.toLowerCase();t.add("meeting"),t.add("krisp");let s={\u043F\u0440\u043E\u0435\u043A\u0442:"project",project:"project",\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435:"planning",planning:"planning",\u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u043A\u0430:"development",development:"development",\u043E\u0431\u0441\u0443\u0436\u0434\u0435\u043D\u0438\u0435:"discussion",\u0432\u0441\u0442\u0440\u0435\u0447\u0430:"meeting",\u0430\u043D\u0430\u043B\u0438\u0437:"analysis",strategy:"strategy",\u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F:"strategy",\u0432\u043D\u0435\u0434\u0440\u0435\u043D\u0438\u0435:"implementation",\u0442\u0435\u0441\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435:"testing",\u0440\u0435\u0432\u044C\u044E:"review",review:"review",\u0431\u044E\u0434\u0436\u0435\u0442:"budget",budget:"budget",deadline:"deadline",\u0434\u0435\u0434\u043B\u0430\u0439\u043D:"deadline",hr:"hr",\u0440\u0435\u043A\u0440\u0443\u0442\u0438\u043D\u0433:"hr",recruiting:"hr",\u0438\u043D\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044F:"integration",integration:"integration",api:"technical",\u0441\u0438\u0441\u0442\u0435\u043C\u0430:"system",system:"system",\u0431\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C:"security",security:"security",\u043F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430:"support",support:"support"};for(let[u,d]of Object.entries(s))i.includes(u)&&t.add(d);return(i.includes("ceo")||i.includes("director")||i.includes("\u0434\u0438\u0440\u0435\u043A\u0442\u043E\u0440"))&&t.add("management"),(i.includes("developer")||i.includes("\u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A")||i.includes("\u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C\u0438\u0441\u0442"))&&t.add("technical"),(i.includes("designer")||i.includes("\u0434\u0438\u0437\u0430\u0439\u043D\u0435\u0440"))&&t.add("design"),(i.includes("\u0440\u0435\u0442\u0440\u043E\u0441\u043F\u0435\u043A\u0442\u0438\u0432\u0430")||i.includes("retrospective"))&&t.add("retrospective"),(i.includes("\u043F\u043B\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435")||i.includes("planning"))&&t.add("planning"),(i.includes("\u0434\u0435\u043C\u043E")||i.includes("demo")||i.includes("\u043F\u0440\u0435\u0437\u0435\u043D\u0442\u0430\u0446\u0438\u044F"))&&t.add("demo"),Array.from(t)}};var gt=require("obsidian"),_t=xt(require("path")),Wt=class{constructor(o,e){this.app=o,this.vault=o.vault,this.settings=e}applyTemplate(o,e,n,t,i){var k,E,B,z,$,T,M,H;let s=o;s=s.replace(/{{meetingTitle}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{title}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{date}}/g,e.date||"YYYY-MM-DD"),s=s.replace(/{{time}}/g,e.time||"HH:MM"),s=s.replace(/{{duration}}/g,e.duration||"N/A");let u=((k=e.participants)==null?void 0:k.map(_=>`- **${_}**`).join(`
`))||"- *\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430\u0445 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430*";s=s.replace(/{{participantsList}}/g,u),s=s.replace(/{{participants}}/g,((E=e.participants)==null?void 0:E.join(", "))||"N/A"),s=s.replace(/{{participantsCount}}/g,String(e.participantsCount||0)),s=s.replace(/{{transcriptWords}}/g,String(e.transcriptWords||0)),s=s.replace(/{{mostActiveSpeaker}}/g,e.mostActiveSpeaker||"N/A"),s=s.replace(/{{importDate}}/g,e.importDate||new Date().toLocaleDateString("ru-RU"));let d=((B=e.participantsStats)==null?void 0:B.join(`
`))||"*\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043A\u0430 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430*";s=s.replace(/{{participantsStats}}/g,d);let g=(z=e.extractedEntities)!=null&&z.length?e.extractedEntities.join(`

`):"*\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u0430*";s=s.replace(/{{extractedEntities}}/g,g);let y=($=e.relatedLinks)!=null&&$.length?`
`+e.relatedLinks.join(`
`):"";s=s.replace(/{{relatedLinks}}/g,y);let l=(T=e.summary)!=null&&T.length?e.summary.map(_=>_.trim().startsWith("- ")||_.trim().startsWith("* ")?_.trim():_.trim()===""?"":_.trim()).join(`
>
> `):"*\u041A\u0440\u0430\u0442\u043A\u043E\u0435 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u043D\u0438\u0435 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u043D\u043E*";s=s.replace(/{{summary}}/g,l);let f=((M=e.actionItems)==null?void 0:M.map(_=>`- [ ] ${_}`).join(`
> 
> `))||"*\u041D\u0435\u0442 \u0437\u0430\u0434\u0430\u0447 \u0434\u043B\u044F \u0432\u044B\u043F\u043E\u043B\u043D\u0435\u043D\u0438\u044F*";s=s.replace(/{{actionItemsList}}/g,f),s=s.replace(/{{actionItems}}/g,f);let c=((H=e.keyPoints)==null?void 0:H.map(_=>`- ${_}`).join(`
> 
> `))||"*\u041A\u043B\u044E\u0447\u0435\u0432\u044B\u0435 \u043C\u043E\u043C\u0435\u043D\u0442\u044B \u043D\u0435 \u0432\u044B\u0434\u0435\u043B\u0435\u043D\u044B*";s=s.replace(/{{keyPointsList}}/g,c),s=s.replace(/{{keyPoints}}/g,c);let p=e.formattedTranscript?e.formattedTranscript.split(`
`).map(_=>`> ${_}`).join(`
`):"> *\u0422\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D*";s=s.replace(/{{formattedTranscript}}/g,p),s=s.replace(/{{transcript}}/g,p),s=s.replace(/{{rawTranscript}}/g,e.rawTranscript||"\u0421\u044B\u0440\u043E\u0439 \u0442\u0440\u0430\u043D\u0441\u043A\u0440\u0438\u043F\u0442 \u043D\u0435\u0434\u043E\u0441\u0442\u0443\u043F\u0435\u043D");let h=[...e.tags||[],...e.smartTags||[]],m=[...new Set(h)],S=m.length>0?m.map(_=>`  - ${_}`).join(`
`)+`
`:"";if(s=s.replace(/{{yamlTags}}/g,S),i){let _=(0,gt.normalizePath)(i);s=s.replace(/{{audioPathForYaml}}/g,_),s=s.replace(/{{audioLink}}/g,_),s=s.replace(/{{audioEmbed}}/g,`![[${_}]]`)}else s=s.replace(/{{audioPathForYaml}}/g,""),s=s.replace(/{{audioLink}}/g,"N/A"),s=s.replace(/{{audioEmbed}}/g,`> [!warning] \u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D
> \u0410\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B \u043D\u0435 \u0431\u044B\u043B \u0438\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D \u0438\u043B\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D \u0432 \u0430\u0440\u0445\u0438\u0432\u0435.`);return t?s=s.replace(/{{noteFileName}}/g,t.replace(/\.md$/,"")):s=s.replace(/{{noteFileName}}/g,e.meetingTitle||"Untitled Meeting"),s=s.replace(/{{YYYY}}/g,e.date?e.date.substring(0,4):"YYYY"),s=s.replace(/{{MM}}/g,e.date?e.date.substring(5,7):"MM"),s=s.replace(/{{DD}}/g,e.date?e.date.substring(8,10):"DD"),s=s.replace(/{{HH}}/g,e.time?e.time.substring(0,2):"HH"),s=s.replace(/{{mm}}/g,e.time?e.time.substring(3,5):"mm"),s=s.replace(/{{HHMM}}/g,e.time?e.time.replace(":",""):"HHMM"),s}generateFileName(o,e,n){var i,s,u,d,g,y;let t=o;return t=t.replace(/{{YYYY}}/g,((i=e.date)==null?void 0:i.substring(0,4))||"YYYY"),t=t.replace(/{{MM}}/g,((s=e.date)==null?void 0:s.substring(5,7))||"MM"),t=t.replace(/{{DD}}/g,((u=e.date)==null?void 0:u.substring(8,10))||"DD"),t=t.replace(/{{HHMM}}/g,((d=e.time)==null?void 0:d.replace(":",""))||"HHMM"),t=t.replace(/{{HH}}/g,((g=e.time)==null?void 0:g.substring(0,2))||"HH"),t=t.replace(/{{mm}}/g,((y=e.time)==null?void 0:y.substring(3,5))||"mm"),t=t.replace(/{{meetingTitle}}/g,e.meetingTitle||"Untitled Meeting"),t=t.replace(/[\/:\[\]\*\?"<>\|#^]/g,"_").replace(/\s+/g,"_"),`${t}.${n}`}async createNote(o,e){var f,c,p;let n=this.generateFileName(this.settings.noteNameTemplate,o,"md"),t=((f=o.date)==null?void 0:f.substring(0,4))||"YYYY",i=((c=o.date)==null?void 0:c.substring(5,7))||"MM",s=(0,gt.normalizePath)(_t.join(this.settings.notesFolderPath,t,i));await this.ensureFolderExists(s);let u=(0,gt.normalizePath)(_t.join(s,n)),d=this.vault.getAbstractFileByPath(u);if(d&&d instanceof gt.TFile)switch(this.settings.duplicateStrategy){case"skip":return console.log(`Note ${u} already exists. Skipping.`),new Notification("Krisp Importer",{body:`\u0417\u0430\u043C\u0435\u0442\u043A\u0430 ${n} \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442. \u0418\u043C\u043F\u043E\u0440\u0442 \u043F\u0440\u043E\u043F\u0443\u0449\u0435\u043D.`}),{notePath:u,noteFile:d};case"overwrite":console.log(`Note ${u} already exists. Overwriting.`),await this.vault.delete(d);break;case"rename":let h=1,m=n.substring(0,n.lastIndexOf(".")),S=n.substring(n.lastIndexOf(".")+1);for(;d;)u=(0,gt.normalizePath)(_t.join(s,`${m}_${h}.${S}`)),d=this.vault.getAbstractFileByPath(u),h++;console.log(`Note ${u} will be created with a new name.`);break}let g;if(e&&o.meetingTitle){let h=_t.extname(e)||".mp3",m=this.generateFileName(this.settings.attachmentNameTemplate,o,h.substring(1)),S=this.settings.attachmentsFolderPath;!S.includes("{{YYYY}}")&&!S.includes("{{MM}}")&&(S=_t.join(S,t,i)),S=S.replace(/{{YYYY}}/g,t).replace(/{{MM}}/g,i).replace(/{{DD}}/g,((p=o.date)==null?void 0:p.substring(8,10))||"DD"),await this.ensureFolderExists((0,gt.normalizePath)(S)),g=(0,gt.normalizePath)(_t.join(S,m));let k=this.vault.getAbstractFileByPath(g);if(k){let E=1,B=m.substring(0,m.lastIndexOf(".")),z=m.substring(m.lastIndexOf(".")+1);for(;k;)g=(0,gt.normalizePath)(_t.join(S,`${B}_${E}.${z}`)),k=this.vault.getAbstractFileByPath(g),E++}}let y=this.applyTemplate(this.settings.noteContentTemplate,o,this.settings,u.split("/").pop(),g),l=await this.vault.create(u,y);return console.log(`Note created: ${u}`),{notePath:u,audioDestPath:g,noteFile:l}}async ensureFolderExists(o){let e=(0,gt.normalizePath)(o);if(e==="/"||e==="")return;if(!this.vault.getAbstractFileByPath(e)){let t=e.split("/"),i="";for(let s of t){if(!s)continue;if(i=i?`${i}/${s}`:s,!this.vault.getAbstractFileByPath(i))try{await this.vault.createFolder(i)}catch(d){if(!this.vault.getAbstractFileByPath(i))throw console.error(`Failed to create folder ${i}:`,d),d}}}}};var Ft=require("obsidian"),Ct=class{constructor(){}showSuccess(o,e=5e3){new Ft.Notice(o,e),console.log(`[Krisp Importer] SUCCESS: ${o}`)}showError(o,e=8e3){new Ft.Notice(`ERROR: ${o}`,e),console.error(`[Krisp Importer] ERROR: ${o}`)}showWarning(o,e=6e3){new Ft.Notice(`WARNING: ${o}`,e),console.warn(`[Krisp Importer] WARNING: ${o}`)}showInfo(o,e=4e3){new Ft.Notice(o,e),console.log(`[Krisp Importer] INFO: ${o}`)}showDuplicateFound(o,e,n){let t=`\u0414\u0443\u0431\u043B\u0438\u043A\u0430\u0442 "${o}": ${n} (\u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044F: ${e})`;this.showWarning(t)}showBatchImportResult(o,e,n,t){o>0&&e===0?this.showSuccess(`\u0418\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D: ${o} \u0432\u0441\u0442\u0440\u0435\u0447(\u0438) \u0438\u0437 "${t}"`,8e3):o>0&&e>0?this.showWarning(`\u0418\u043C\u043F\u043E\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D \u0447\u0430\u0441\u0442\u0438\u0447\u043D\u043E: ${o} \u0443\u0441\u043F\u0435\u0448\u043D\u043E, ${e} \u043E\u0448\u0438\u0431\u043E\u043A \u0438\u0437 "${t}"`,1e4):e>0?this.showError(`\u0418\u043C\u043F\u043E\u0440\u0442 \u043D\u0435 \u0443\u0434\u0430\u043B\u0441\u044F: ${e} \u043E\u0448\u0438\u0431\u043E\u043A \u0432 "${t}"`,1e4):this.showInfo(`\u041D\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0432 "${t}"`,6e3),n>0&&this.showInfo(`\u041F\u0440\u043E\u043F\u0443\u0449\u0435\u043D\u043E \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u043E\u0432: ${n}`,4e3)}};var St=xt(require("path")),bt=require("fs"),Zt=class{constructor(o,e){this.app=o,this.zipExtractor=new $t(this.app),this.noteParser=new Mt,this.noteCreator=null,this.notificationService=new Ct,this.statusBarService=e||null}async processZipFile(o,e){var s,u,d;let n=null,t=St.basename(o),i=new yt.Notice(`Processing ${t}...`,0);this.statusBarService&&this.statusBarService.setProcessing(t),this.noteCreator=new Wt(this.app,e);try{let g=`${t.replace(".zip","")}_${Date.now()}`;if(n=await this.zipExtractor.extract(o,g),!n){this.notificationService.showError(`Failed to extract ZIP file: ${t}`),i&&i.hide();return}let l=(await bt.promises.readdir(n,{withFileTypes:!0})).filter(p=>p.isDirectory());if(l.length===0){this.notificationService.showError(`No meeting folders found in ZIP: ${t}`),i&&i.hide(),await this.zipExtractor.cleanup(n);return}let f=0,c=0;for(let p of l){let h=p.name,m=(0,yt.normalizePath)(St.join(n,h));new yt.Notice(`Processing meeting: ${h}...`);let S="meeting_notes.txt",k="transcript.txt",E="recording.mp3",B=(0,yt.normalizePath)(St.join(m,S)),z=(0,yt.normalizePath)(St.join(m,k)),$=await bt.promises.readdir(m),M=$.find(G=>G.toLowerCase().startsWith("recording.")&&(G.toLowerCase().endsWith(".mp3")||G.toLowerCase().endsWith(".m4a")))||E,H=(0,yt.normalizePath)(St.join(m,M)),_="",F="";try{_=await bt.promises.readFile(B,"utf-8")}catch(G){this.notificationService.showError(`Failed to read ${S} from ${h} in ${t}`);let O=$.find(Q=>Q.toLowerCase().includes("notes")&&Q.toLowerCase().endsWith(".txt")&&Q!==S);if(O){this.notificationService.showInfo(`Attempting to use alternative notes file: ${O}`);try{_=await bt.promises.readFile(St.join(m,O),"utf-8")}catch(Q){this.notificationService.showError(`Failed to read alternative notes file ${O} for ${h}.`),c++;continue}}else{c++;continue}}try{F=await bt.promises.readFile(z,"utf-8")}catch(G){this.notificationService.showWarning(`Failed to read ${k} for ${h} in ${t}. Transcript might be missing.`)}let a=this.noteParser.parseMeetingNotes(_,F,h);console.log(`[DEBUG] Parsed data for ${h}:`,{title:a.meetingTitle,date:a.date,time:a.time,participants:a.participants,hasTranscript:!!a.formattedTranscript,transcriptLength:((s=a.formattedTranscript)==null?void 0:s.length)||0,summaryLength:((u=a.summary)==null?void 0:u.length)||0,actionItemsLength:((d=a.actionItems)==null?void 0:d.length)||0});let N=await this.noteCreator.createNote(a,H);if(!N.notePath){this.notificationService.showError(`Failed to create note for ${h}`),c++;continue}console.log(`[DEBUG] Note created at: ${N.notePath}, audio dest: ${N.audioDestPath}`);try{await bt.promises.access(H),console.log(`[DEBUG] Audio file found: ${H}`);let G=await bt.promises.readFile(H);if(console.log(`[DEBUG] Audio file read, size: ${G.length} bytes`),N.audioDestPath){let O=this.app.vault.getAbstractFileByPath(N.audioDestPath);O&&O instanceof yt.TFile?(this.notificationService.showInfo(`Overwriting existing audio file: ${N.audioDestPath}`),await this.app.vault.modifyBinary(O,G)):await this.app.vault.createBinary(N.audioDestPath,G),console.log(`[DEBUG] Audio file saved to: ${N.audioDestPath}`),this.notificationService.showInfo(`Audio file for ${h} saved: ${N.audioDestPath}`)}}catch(G){console.log("[DEBUG] Audio file error:",G),this.notificationService.showWarning(`Audio file ${M} not found in ${m}. Skipped audio.`)}this.notificationService.showSuccess(`Successfully imported meeting ${h} to ${N.notePath}`),f++}if(i&&i.hide(),this.statusBarService&&(c===0&&f>0?this.statusBarService.showTemporaryMessage(`\u0418\u043C\u043F\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u043E: ${f}`,3e3):c>0&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043E\u043A: ${c}`)),this.notificationService.showBatchImportResult(f,c,0,t),console.log(`[DEBUG] deleteZipAfterImport setting: ${e.deleteZipAfterImport}`),console.log(`[DEBUG] errorCount: ${c}, importedCount: ${f}`),e.deleteZipAfterImport&&c===0&&f>0)try{console.log(`[DEBUG] Attempting to delete ZIP file: ${o}`),await bt.promises.rm(o),this.notificationService.showInfo(`Deleted original ZIP file: ${t}`),console.log(`[DEBUG] Successfully deleted ZIP file: ${o}`)}catch(p){console.error("[DEBUG] Failed to delete ZIP file:",p),this.notificationService.showError(`Failed to delete original ZIP file ${t}: ${p.message}`)}else e.deleteZipAfterImport?console.log(`[DEBUG] ZIP file not deleted due to errors or no imports. errorCount: ${c}, importedCount: ${f}`):console.log("[DEBUG] ZIP file deletion disabled in settings")}catch(g){i&&i.hide(),this.statusBarService&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043A\u0430: ${g.message}`),console.error("Error processing ZIP file:",g),this.notificationService.showError(`An unexpected error occurred while processing ${t}: ${g.message}`)}finally{n&&await this.zipExtractor.cleanup(n)}}};var pt=xt(require("fs")),Nt=xt(require("path")),jt=class{constructor(o,e,n,t,i){this.watcher=null;this.isWatching=!1;this.watchedPath="";this.app=o,this.processingService=e,this.notificationService=n,this.settingsProvider=t,this.statusBarService=i||null}async startWatching(o){if(this.isWatching&&await this.stopWatching(),!o||o.trim()===""){this.notificationService.showError("\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F");return}try{if(!pt.existsSync(o)){this.notificationService.showError(`\u041F\u0430\u043F\u043A\u0430 \u043D\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442: ${o}`);return}if(!pt.statSync(o).isDirectory()){this.notificationService.showError(`\u0423\u043A\u0430\u0437\u0430\u043D\u043D\u044B\u0439 \u043F\u0443\u0442\u044C \u043D\u0435 \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043F\u0430\u043F\u043A\u043E\u0439: ${o}`);return}this.watchedPath=o,this.watcher=pt.watch(o,{persistent:!0},(n,t)=>{console.log(`[FileWatcher] Event detected: ${n}, filename: ${t}`),n==="rename"&&t&&this.handleFileEvent(t)}),this.isWatching=!0,this.statusBarService&&this.statusBarService.setWatching(o),this.notificationService.showSuccess(`\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u0437\u0430\u043F\u0443\u0449\u0435\u043D\u043E: ${o}`),console.log(`[Krisp Importer] FileWatcher started for: ${o}`)}catch(e){this.statusBarService&&this.statusBarService.setError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F: ${e.message}`),console.error("[Krisp Importer] Error starting file watcher:",e),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u043F\u0443\u0441\u043A\u0430 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F: ${e.message}`)}}async stopWatching(){this.watcher&&(this.watcher.close(),this.watcher=null),this.isWatching&&(this.isWatching=!1,this.statusBarService&&this.statusBarService.setIdle("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),this.notificationService.showInfo("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),console.log("[Krisp Importer] FileWatcher stopped"))}isCurrentlyWatching(){return this.isWatching}getWatchedPath(){return this.watchedPath}async handleFileEvent(o){console.log(`[FileWatcher] Processing file event for: ${o}`);try{if(!o.toLowerCase().endsWith(".zip")){console.log(`[FileWatcher] Ignoring non-ZIP file: ${o}`);return}let e=Nt.join(this.watchedPath,o);if(!pt.existsSync(e)||!pt.statSync(e).isFile())return;console.log(`[Krisp Importer] New ZIP file detected: ${o}`),await this.waitForFileStability(e);let t=this.settingsProvider();await this.processNewZipFile(e,t)}catch(e){console.error("[Krisp Importer] Error handling file event:",e),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0444\u0430\u0439\u043B\u0430 ${o}: ${e.message}`)}}async waitForFileStability(o,e=5e3){let t=0,i=0,s=3;return new Promise(u=>{let d=()=>{try{if(!pt.existsSync(o)){u();return}let l=pt.statSync(o).size;if(l===t&&l>0){if(i++,i>=s){u();return}}else i=0;t=l,Date.now()-g<e?setTimeout(d,500):u()}catch(y){u()}},g=Date.now();d()})}async processNewZipFile(o,e){try{console.log(`[FileWatcher] Processing new ZIP file: ${o}`),console.log(`[FileWatcher] Settings - deleteZipAfterImport: ${e.deleteZipAfterImport}`),this.notificationService.showInfo(`\u041E\u0431\u043D\u0430\u0440\u0443\u0436\u0435\u043D \u043D\u043E\u0432\u044B\u0439 \u0444\u0430\u0439\u043B: ${Nt.basename(o)}`),await this.processingService.processZipFile(o,e)}catch(n){console.error("[Krisp Importer] Error processing new ZIP file:",n),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0432\u0442\u043E\u043C\u0430\u0442\u0438\u0447\u0435\u0441\u043A\u043E\u0439 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 \u0444\u0430\u0439\u043B\u0430: ${n.message}`)}}async scanExistingFiles(){if(!(!this.isWatching||!this.watchedPath))try{let e=pt.readdirSync(this.watchedPath).filter(i=>i.toLowerCase().endsWith(".zip"));if(e.length===0){this.notificationService.showInfo("\u0412 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u0435\u043C\u043E\u0439 \u043F\u0430\u043F\u043A\u0435 \u043D\u0435\u0442 ZIP-\u0444\u0430\u0439\u043B\u043E\u0432");return}this.notificationService.showInfo(`\u041D\u0430\u0439\u0434\u0435\u043D\u043E ${e.length} ZIP-\u0444\u0430\u0439\u043B\u043E\u0432 \u0434\u043B\u044F \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438`);let n=0,t=0;for(let i of e)try{let s=Nt.join(this.watchedPath,i),u=this.settingsProvider();await this.processNewZipFile(s,u),n++}catch(s){console.error(`[Krisp Importer] Error processing ${i}:`,s),t++}this.notificationService.showBatchImportResult(n,t,0,"\u043C\u0430\u0441\u0441\u043E\u0432\u043E\u0435 \u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435")}catch(o){console.error("[Krisp Importer] Error scanning existing files:",o),this.notificationService.showError(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043F\u0430\u043F\u043A\u0438: ${o.message}`)}}};var Vt=require("obsidian"),kt=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(kt||{}),Ut=class{constructor(o=1){this.logs=[];this.maxLogEntries=1e3;this.currentLogLevel=1;this.currentLogLevel=o,this.log(1,"System","LoggingService initialized")}log(o,e,n,t){if(o<this.currentLogLevel)return;let i={timestamp:new Date,level:o,category:e,message:n,details:t};this.logs.push(i),this.logs.length>this.maxLogEntries&&(this.logs=this.logs.slice(-this.maxLogEntries));let s=kt[o],d=`[${i.timestamp.toISOString()}] [${s}] [${e}] ${n}`;switch(o){case 0:console.debug(d,t);break;case 1:console.info(d,t);break;case 2:console.warn(d,t);break;case 3:console.error(d,t);break}}debug(o,e,n){this.log(0,o,e,n)}info(o,e,n){this.log(1,o,e,n)}warn(o,e,n){this.log(2,o,e,n)}error(o,e,n){this.log(3,o,e,n)}logZipProcessingStart(o){this.info("Processing",`\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0443 ZIP-\u0444\u0430\u0439\u043B\u0430: ${o}`)}logZipProcessingSuccess(o,e){this.info("Processing",`\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0430\u043D ZIP-\u0444\u0430\u0439\u043B: ${o}`,{noteName:e})}logZipProcessingError(o,e){this.error("Processing",`\u041E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0438 ZIP-\u0444\u0430\u0439\u043B\u0430: ${o}`,{error:e.message,stack:e.stack})}logFileWatcherStart(o){this.info("FileWatcher",`\u0417\u0430\u043F\u0443\u0449\u0435\u043D\u043E \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438: ${o}`)}logFileWatcherStop(){this.info("FileWatcher","\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043F\u0430\u043F\u043A\u0438 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E")}logFileWatcherError(o){this.error("FileWatcher","\u041E\u0448\u0438\u0431\u043A\u0430 \u0432 FileWatcher",{error:o.message,stack:o.stack})}logDuplicateHandling(o,e,n){this.info("Duplicates",`\u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0434\u0443\u0431\u043B\u0438\u043A\u0430\u0442\u0430: ${e}`,{strategy:o,action:n})}logSettingsChange(o,e,n){this.info("Settings",`\u0418\u0437\u043C\u0435\u043D\u0435\u043D\u0430 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430: ${o}`,{oldValue:e,newValue:n})}logNoteCreation(o,e){this.info("NoteCreator",`\u0421\u043E\u0437\u0434\u0430\u043D\u0430 \u0437\u0430\u043C\u0435\u0442\u043A\u0430: ${o}`,{templateUsed:e})}logAudioFileCopy(o,e){this.info("AudioCopy",`\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D \u0430\u0443\u0434\u0438\u043E\u0444\u0430\u0439\u043B: ${o} -> ${e}`)}getAllLogs(){return[...this.logs]}getLogsByLevel(o){return this.logs.filter(e=>e.level>=o)}getLogsByCategory(o){return this.logs.filter(e=>e.category===o)}getRecentLogs(o=50){return this.logs.slice(-o)}exportLogsAsText(){return this.logs.map(e=>{let n=e.timestamp.toISOString(),t=kt[e.level].padEnd(5),i=e.category.padEnd(12),s=`[${n}] [${t}] [${i}] ${e.message}`;return e.details&&(s+=`
    Details: ${JSON.stringify(e.details,null,2)}`),s}).join(`
`)}exportLogsAsJSON(){return JSON.stringify(this.logs,null,2)}clearLogs(){let o=this.logs.length;this.logs=[],this.info("System",`\u041E\u0447\u0438\u0449\u0435\u043D\u044B \u043B\u043E\u0433\u0438 (\u0431\u044B\u043B\u043E \u0437\u0430\u043F\u0438\u0441\u0435\u0439: ${o})`)}setLogLevel(o){let e=this.currentLogLevel;this.currentLogLevel=o,this.info("System",`\u0418\u0437\u043C\u0435\u043D\u0435\u043D \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F: ${kt[e]} -> ${kt[o]}`)}getLogStats(){let o={},e={};return this.logs.forEach(n=>{let t=kt[n.level];o[t]=(o[t]||0)+1,e[n.category]=(e[n.category]||0)+1}),{total:this.logs.length,byLevel:o,byCategory:e}}async copyLogsToClipboard(){try{let o=this.exportLogsAsText();await navigator.clipboard.writeText(o),new Vt.Notice("\u{1F4CB} \u041B\u043E\u0433\u0438 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430",3e3),this.info("System","\u041B\u043E\u0433\u0438 \u0441\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u044B \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430")}catch(o){this.error("System","\u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043B\u043E\u0433\u043E\u0432 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043E\u0431\u043C\u0435\u043D\u0430",o),new Vt.Notice("\u274C \u041E\u0448\u0438\u0431\u043A\u0430 \u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F \u043B\u043E\u0433\u043E\u0432",5e3)}}};var re=require("obsidian");var Kt=class{constructor(o){this.statusBarItem=null;this.currentStatus="idle";this.currentMessage="";this.plugin=o,this.initialize()}initialize(){this.statusBarItem=this.plugin.addStatusBarItem(),this.statusBarItem.addClass("krisp-importer-status"),this.statusBarItem.style.cursor="pointer",this.statusBarItem.addEventListener("click",()=>{this.plugin.app.setting.open(),this.plugin.app.setting.openTabById("krisp-notes-importer")}),this.updateDisplay()}updateDisplay(){if(!this.statusBarItem)return;let{icon:o,text:e,color:n}=this.getStatusDisplay();this.statusBarItem.empty(),this.statusBarItem.removeClass("idle","watching","processing","error");let t=this.currentStatus.toLowerCase();this.statusBarItem.addClass(t);let i=this.statusBarItem.createEl("span");i.style.marginRight="4px",(0,re.setIcon)(i,o);let s=this.statusBarItem.createEl("span");s.textContent=e,this.statusBarItem.style.color=n,this.statusBarItem.setAttribute("aria-label",this.getTooltipText())}getStatusDisplay(){switch(this.currentStatus){case"idle":return{icon:"pause-circle",text:"Krisp",color:"var(--text-muted)"};case"watching":return{icon:"eye",text:"Krisp",color:"var(--color-green)"};case"processing":return{icon:"loader-2",text:"Krisp",color:"var(--color-blue)"};case"error":return{icon:"alert-circle",text:"Krisp",color:"var(--color-red)"};default:return{icon:"help-circle",text:"Krisp",color:"var(--text-muted)"}}}getTooltipText(){let o="Krisp Notes Importer";switch(this.currentStatus){case"idle":return`${o}: \u041D\u0435\u0430\u043A\u0442\u0438\u0432\u0435\u043D`;case"watching":return`${o}: \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u043D\u043E${this.currentMessage?` - ${this.currentMessage}`:""}`;case"processing":return`${o}: \u041E\u0431\u0440\u0430\u0431\u043E\u0442\u043A\u0430 \u0444\u0430\u0439\u043B\u0430${this.currentMessage?` - ${this.currentMessage}`:""}`;case"error":return`${o}: \u041E\u0448\u0438\u0431\u043A\u0430${this.currentMessage?` - ${this.currentMessage}`:""}`;default:return o}}setIdle(o){this.currentStatus="idle",this.currentMessage=o||"",this.updateDisplay()}setWatching(o){this.currentStatus="watching",this.currentMessage=o?`\u041F\u0430\u043F\u043A\u0430: ${o}`:"",this.updateDisplay()}setProcessing(o){this.currentStatus="processing",this.currentMessage=o?`\u0424\u0430\u0439\u043B: ${o}`:"",this.updateDisplay()}setError(o){this.currentStatus="error",this.currentMessage=o||"",this.updateDisplay(),setTimeout(()=>{this.currentStatus==="error"&&this.setIdle()},1e4)}showTemporaryMessage(o,e=3e3){let n=this.currentStatus,t=this.currentMessage;this.currentMessage=o,this.updateDisplay(),setTimeout(()=>{this.currentStatus=n,this.currentMessage=t,this.updateDisplay()},e)}getCurrentStatus(){return this.currentStatus}isActive(){return this.currentStatus==="watching"||this.currentStatus==="processing"}destroy(){this.statusBarItem&&(this.statusBarItem.remove(),this.statusBarItem=null)}startProcessingAnimation(){if(!this.statusBarItem||this.currentStatus!=="processing")return;let o=this.statusBarItem.querySelector("span:first-child");o&&(o.style.animation="spin 1s linear infinite")}stopAnimation(){if(!this.statusBarItem)return;let o=this.statusBarItem.querySelector("span:first-child");o&&(o.style.animation="")}updateDisplayWithAnimation(){this.updateDisplay(),this.currentStatus==="processing"?this.startProcessingAnimation():this.stopAnimation()}};var Yt=class extends ut.Plugin{async onload(){console.log("Loading Krisp Notes Importer plugin..."),this.loggingService=new Ut(1),this.loggingService.info("Plugin","\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0443 \u043F\u043B\u0430\u0433\u0438\u043D\u0430 Krisp Notes Importer"),this.settingsManager=new Ot(this),await this.settingsManager.loadSettings(),this.loggingService.info("Plugin","\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D\u044B");let e=this.settingsManager.getSetting("language")||"en";this.localizationService=new Et(e),this.loggingService.info("Plugin",`\u041B\u043E\u043A\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u0430: ${e}`),this.notificationService=new Ct,this.statusBarService=new Kt(this),this.processingService=new Zt(this.app,this.statusBarService),this.loggingService.info("Plugin","\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0441\u0435\u0440\u0432\u0438\u0441\u044B \u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0438\u0440\u043E\u0432\u0430\u043D\u044B"),this.fileWatcherService=new jt(this.app,this.processingService,this.notificationService,()=>this.settingsManager.getAllSettings(),this.statusBarService),this.addSettingTab(new Rt(this.app,this)),this.addCommand({id:"import-krisp-zip-manually",name:this.localizationService.t("commands.importZip"),callback:()=>{this.loggingService.info("Commands","\u0417\u0430\u043F\u0443\u0449\u0435\u043D\u0430 \u043A\u043E\u043C\u0430\u043D\u0434\u0430 \u0440\u0443\u0447\u043D\u043E\u0433\u043E \u0438\u043C\u043F\u043E\u0440\u0442\u0430 ZIP-\u0444\u0430\u0439\u043B\u0430"),new qt(this.app,async i=>{i&&i.trim()!==""?(this.loggingService.info("Commands",`\u041D\u0430\u0447\u0438\u043D\u0430\u044E \u0440\u0443\u0447\u043D\u043E\u0439 \u0438\u043C\u043F\u043E\u0440\u0442 \u0444\u0430\u0439\u043B\u0430: ${i}`),new ut.Notice(`Starting import for: ${i}`),await this.processingService.processZipFile(i,this.settingsManager.settings)):(this.loggingService.warn("Commands","\u041F\u043E\u043F\u044B\u0442\u043A\u0430 \u0438\u043C\u043F\u043E\u0440\u0442\u0430 \u0441 \u043F\u0443\u0441\u0442\u044B\u043C \u043F\u0443\u0442\u0435\u043C \u043A \u0444\u0430\u0439\u043B\u0443"),new ut.Notice("File path cannot be empty."))},this.localizationService).open()}}),this.addCommand({id:"start-auto-watching",name:this.localizationService.t("commands.startWatching"),callback:async()=>{let i=this.settingsManager.getSetting("watchedFolderPath");i&&i.trim()!==""?(this.statusBarService.setWatching(i),await this.fileWatcherService.startWatching(i)):(this.statusBarService.setError("\u041D\u0435 \u0443\u043A\u0430\u0437\u0430\u043D\u0430 \u043F\u0430\u043F\u043A\u0430 \u0434\u043B\u044F \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F"),new ut.Notice("Please set the watched folder path in settings first."))}}),this.addCommand({id:"stop-auto-watching",name:this.localizationService.t("commands.stopWatching"),callback:async()=>{this.statusBarService.setIdle("\u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043E\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043E"),await this.fileWatcherService.stopWatching()}}),this.addCommand({id:"scan-existing-files",name:this.localizationService.t("commands.scanExisting"),callback:async()=>{this.statusBarService.setProcessing("\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0444\u0430\u0439\u043B\u043E\u0432"),await this.fileWatcherService.scanExistingFiles(),this.statusBarService.setIdle("\u0421\u043A\u0430\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E")}}),this.addCommand({id:"debug-settings",name:this.localizationService.t("commands.debugSettings"),callback:()=>{let i=this.settingsManager.getAllSettings();console.log("[Krisp Importer] Current settings:",i),new ut.Notice(`Settings logged to console. deleteZipAfterImport: ${i.deleteZipAfterImport}`,5e3)}}),this.addCommand({id:"check-watching-status",name:this.localizationService.t("commands.checkStatus"),callback:()=>{let i=this.fileWatcherService.isCurrentlyWatching(),s=this.fileWatcherService.getWatchedPath(),u=this.settingsManager.getSetting("autoScanEnabled");console.log("[Krisp Importer] Watching status:",{isWatching:i,watchedPath:s,autoScanEnabled:u});let d=i?`\u2705 \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u0430\u043A\u0442\u0438\u0432\u043D\u043E: ${s}`:`\u274C \u041E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u0435 \u043D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u043E. AutoScan \u0432 \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0430\u0445: ${u?"\u0432\u043A\u043B\u044E\u0447\u0435\u043D":"\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D"}`;new ut.Notice(d,7e3)}});let n=this.settingsManager.getSetting("autoScanEnabled"),t=this.settingsManager.getSetting("watchedFolderPath");n&&t&&t.trim()!==""?(this.loggingService.info("Plugin",`\u0410\u0432\u0442\u043E\u0437\u0430\u043F\u0443\u0441\u043A \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F \u043F\u0430\u043F\u043A\u0438: ${t}`),this.statusBarService.setWatching(t),await this.fileWatcherService.startWatching(t)):this.statusBarService.setIdle("\u0413\u043E\u0442\u043E\u0432 \u043A \u0440\u0430\u0431\u043E\u0442\u0435"),this.loggingService.info("Plugin","\u041F\u043B\u0430\u0433\u0438\u043D Krisp Notes Importer \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043D \u0443\u0441\u043F\u0435\u0448\u043D\u043E"),console.log("Krisp Notes Importer plugin loaded successfully.")}onunload(){this.fileWatcherService&&this.fileWatcherService.stopWatching(),this.statusBarService&&this.statusBarService.destroy(),this.loggingService&&this.loggingService.info("Plugin","\u0412\u044B\u0433\u0440\u0443\u0436\u0430\u044E \u043F\u043B\u0430\u0433\u0438\u043D Krisp Notes Importer"),console.log("Unloading Krisp Notes Importer plugin.")}},qt=class extends ut.Modal{constructor(e,n,t){super(e);this.onSubmitCallback=n,this.localization=t}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:this.localization.t("modal.importZip.title")}),new ut.Setting(e).setName(this.localization.t("modal.importZip.pathLabel")).setDesc(this.localization.t("modal.importZip.pathDesc")).addText(n=>{n.setPlaceholder("/path/to/your/krisp_meeting.zip"),n.onChange(t=>{this.filePath=t}),n.inputEl.style.width="100%",n.inputEl.addEventListener("keypress",t=>{t.key==="Enter"&&(t.preventDefault(),this.submitForm())})}),new ut.Setting(e).addButton(n=>n.setButtonText(this.localization.t("modal.importZip.importButton")).setCta().onClick(()=>{this.submitForm()}))}submitForm(){this.filePath&&this.filePath.trim()!==""?(this.onSubmitCallback(this.filePath.trim()),this.close()):new ut.Notice(this.localization.t("modal.importZip.emptyPathError"))}onClose(){let{contentEl:e}=this;e.empty()}};
/*! Bundled license information:

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)
*/
